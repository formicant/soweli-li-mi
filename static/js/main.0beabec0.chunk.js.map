{"version":3,"sources":["insa/lon.ts","insa/maIjo.ts","insa/lonPali.ts","insa/kepeken.ts","insa/nimiAli.ts","insa/toki.ts","insa/pilinToki.ts","insa/pali.ts","insa/tawa.ts","insa/lipuMa.ts","insa/lipuIjo.ts","insa/ijo.ts","insa/musi.ts","lukin/iloPalisa.tsx","lukin/kipisiENimi.ts","lukin/lukinIjo.ts","lukin/jasima.ts","lukin/leko.tsx","lukin/ma.tsx","lukin/tenpo.tsx","lukin/iloTenpo.tsx","lukin/lukinMusi.tsx","lukin/maSeme.tsx","lukin/sijelo.tsx","reportWebVitals.ts","index.tsx"],"names":["nasinTawaAli","liNasinTawa","sitelen","includes","lonAla","x","NaN","y","Lon","nasin","this","RangeError","suliMa","Im","Record","MaIjo","lipuIjo","lonIjo","filter","ijo","liLon","groupBy","lon","toMap","paliELonPali","maIjo","nasinMusi","Map","mapEntries","ijoMute","map","nanpa","ijoAntePiLonSama","get","filterNot","_","nanpaNi","toSet","nimiPiIjoSitelenAntePiLonSama","toSeq","ni","liSitelen","nimi","nasinLiLon","semeLiLon","seme","contains","liNimi","lonSemeLiLon","lonSeme","some","isEmpty","intersect","Seq","flatMap","liSeme","panaEPali","monsiELukinKulupu","lukin","tawaMute","tan","tawa","nimiInsaKulupu","toki","kulupu","pali","kulupuPiNimiAli","nimiAli","keySeq","toArray","liInsaKulupu","panaEKulupuNimi","panaELinjaTokiAli","panaELinjaTokiMute","paliELon","suli","linjaToki","undefined","paliEToki","ijoENanpa","tokiSinpin","lonToki","index","rowBegin","columnBegin","rowEnd","columnEnd","panaELonToki","nimiWan","entrySeq","first","nanpaIjo","kind","text","pos","next","pilinMute","pilinInsa","pilinJaki","rep","alt","tok","pilinIjo","pilinKulupu","pilinPali","pilinLi","str","pilinEn","pilinLon","pilinSeme","apply","seq","lawa","sijelo","concat","insa","mute","pilinLeko","Set","of","union","pilinPiNasinMusi","leko","li","pilin","kmid","panaENasinMusiLinja","linja","nasinLinja","successful","candidates","ken","result","nasinNi","nasinAnte","nanpaIjoMuteNi","nanpaIjoMuteAnte","size","isSubset","paliAnte","lonPali","ante","Keyed","paliMute","toKeyedSeq","anteMute","weka","toIndexedSeq","panaENanpaWeka","paliLeko","lekoLiMoli","paliTawaMi","panaEKulupuTawa","paliTawaTawa","anpa","sewi","mamaTawa","miMute","lukinEKulupuTawa","lukinNi","lonSin","lukinSin","liInsaMa","panaENanpaTanPali","lukinTawa","valueSeq","panaEPilinMusi","liPini","liTawa","lekoLiPini","lekoLiMi","KulupuToki","tawaAla","lukinWawa","Tawa","tokiAli","expectEOF","parse","panaENasinMusiAli","antePiLipuIjo","lipuIjoSin","lipuIjoMajuna","lipu","merge","anteELipuIjo","ijoAla","Ijo","assert","set","mamaToki","buildLexer","Nimi","Sitelen","Namako","Kon","Insa","nimiNimi","nimiSitelen","panaENimi","nimiLili","toLowerCase","nimiOpen","startsWith","Error","join","pilinPiIjoNimi","pilinPiIjoSitelen","pilinKon","pilinPiLinjaNamako","pilinLinja","expectSingleResult","musiAla","nimiMa","tenpo","List","tenpoNi","Musi","lipuMa","namakoAli","namako","flat","pilinPiIjoNamako","pilinPiLinjaMa","ma","cacheResult","suliLinja","length","toList","skip","ijoAli","wan","pilinELipuMa","tenpoOpen","kamaKin","take","ali","tawaNi","paliTawa","tenpoNiSin","t0","Date","now","tawaSin","sin","equals","tenpoSin","push","t1","console","log","tokiNasin","split","musiOpen","tenpoMonsi","reduce","musi","nasinTawa","musiSin","tawaTawa","tawaPalisa","palisaAli","palisaPiNimiPalisa","IloPalisa","render","lukaPalisa","palisa","code","repeat","props","palisaLa","preventDefault","window","addEventListener","removeEventListener","Component","panaENimiPalisa","replace","kipisiPiNimiAli","lukinPiKulupuNimi","kule","lukinPiIjoAli","soweli","anteTawa","waso","kala","akesi","pipi","jan","mije","meli","tomo","kiwen","telo","ko","kili","kasi","pan","sike","nena","lupa","poki","supa","ilo","len","mani","jaki","suno","mun","olin","luka","noka","uta","kute","oko","pu","kipisiENimi","lonSitelen","document","createElement","getContext","paliELinja","suliPokaAli","suliPoka","Math","round","measureText","width","nanpaSuliPiLinjaWan","Range","meso","substring","nanpaSuliPiLinjaTu","minBy","tu","abs","font","kipisi","paliEKipisiPiNimiAli","panaEJasima","jasimaMajuna","lonMajuna","nanpaNasin","namakoLawa","nanpaMajuna","jasima","alasaNanpaPiJasimaSike","exec","parseFloat","panaENanpaPiJasimaSike","floor","Leko","memo","lukinNimi","kulupuLukin","classNames","ijoMajuna","ona","useRef","useEffect","current","useMajuna","useState","sinEJasima","left","top","transform","color","className","style","nanpaLinja","fontVariationSettings","Ma","jo","lekoAli","nanpaTaso","height","Tenpo","tenpoNanpaLa","panaTanPokiLa","nanpaTanNi","paliLa","title","onClick","slice","navigator","clipboard","writeText","panaTawaPoki","readText","then","panaTanPoki","nimiNasin","nanpaTawa","nimiNanpa","sinpinAnuMonsi","IloTenpo","timer","lukaTenpo","tenpoLa","prevProps","setInterval","clearInterval","LukinMusi","lukaIloTenpo","setState","state","lukaTenpoNanpa","tenpoNanpa","lukaPanaTanPoki","sinETenpoAli","paliPalisa","tenpoSinpin","panaENasin","MaSeme","lipuMaAli","Sijelo","lukaPali","lukaMonsi","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","getElementById"],"mappings":"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","file":"static/js/main.0beabec0.chunk.js","sourcesContent":["import Im from 'immutable';\r\n\r\nconst nasinTawaAli = ['↑', '↓', '←', '→'] as const;\r\n\r\n/**\r\n * nasin pi tawa e ijo.\r\n * (↑ sewi, ↓ anpa, ← soto, → teje.)\r\n */\r\nexport type NasinTawa = typeof nasinTawaAli[number];\r\n\r\nexport function liNasinTawa(sitelen: string): sitelen is NasinTawa\r\n{\r\n  return (nasinTawaAli as readonly string[]).includes(sitelen);\r\n}\r\n\r\ninterface ILon\r\n{\r\n  readonly x: number,\r\n  readonly y: number;\r\n}\r\n// ni li ike. taso, ni li nasin pali pi ilo Im.Record:\r\nconst lonAla: ILon = { x: NaN, y: NaN };\r\n\r\n/**\r\n * li jo e suli tan poka soto (x), e suli tan sewi (y).\r\n */\r\nexport class Lon extends Im.Record<ILon>(lonAla) implements ILon\r\n{\r\n  constructor(x: number, y: number)\r\n  {\r\n    super({ x: x, y: y });\r\n  }\r\n  \r\n  /**\r\n   * li tawa e Lon kepeken leko wan tawa nasin.\r\n   * @param nasin li nasin tawa.\r\n   * @returns e Lon sin.\r\n   */\r\n  tawa(nasin: NasinTawa)\r\n  {\r\n    switch(nasin)\r\n    {\r\n      case '↑': return new Lon(this.x, this.y - 1);\r\n      case '↓': return new Lon(this.x, this.y + 1);\r\n      case '←': return new Lon(this.x - 1, this.y);\r\n      case '→': return new Lon(this.x + 1, this.y);\r\n      default: throw new RangeError('nasin li ike!');\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Lon ni li insa ala insa ma?\r\n   */\r\n  liInsaMa(suliMa: Lon)\r\n  {\r\n    return (\r\n      this.x >= 0 && this.x < suliMa.x &&\r\n      this.y >= 0 && this.y < suliMa.y\r\n    );\r\n  }\r\n}\r\n","import Im from 'immutable';\r\nimport { Lon } from './lon';\r\nimport { Ijo } from './ijo';\r\nimport { LipuIjo } from './lipuIjo';\r\n\r\n/**\r\n * li jo e suli ma, e ijo ali insa kulupu Lon.\r\n * ijo pi lon ala li lon ala.\r\n */\r\nexport class MaIjo\r\n{\r\n  constructor(suliMa: Lon, lipuIjo: LipuIjo)\r\n  {\r\n    this.suliMa = suliMa;\r\n    this.lonIjo = lipuIjo\r\n      .filter(ijo => ijo.liLon)\r\n      .groupBy(ijo => ijo.lon)\r\n      .toMap();\r\n  }\r\n  \r\n  readonly suliMa: Lon;\r\n  readonly lonIjo: Im.Map<Lon, Im.Collection<number, Ijo>>;\r\n}\r\n","import Im from 'immutable';\r\nimport { Lon } from './lon';\r\nimport { Ijo } from './ijo';\r\nimport { NimiIjo } from './nimiAli';\r\nimport { LiSeme, NasinMusi } from './nasinMusi';\r\nimport { MaIjo } from './maIjo';\r\n\r\nexport type LonPali = Im.Map<Lon, Im.Collection<number, Im.Set<LiSeme>>>;\r\n\r\nexport function paliELonPali(maIjo: MaIjo, nasinMusi: readonly NasinMusi[]): LonPali\r\n{\r\n  // O PALI: nasin musi pi lukin ‘kon li ...’!\r\n  \r\n  return Im.Map(\r\n    maIjo.lonIjo.mapEntries(([lon, ijoMute]) =>\r\n      [lon, ijoMute.map((ijo, nanpa) => panaEPali(lon, ijo, nanpa, maIjo, nasinMusi))])\r\n  );\r\n}\r\n\r\nfunction panaEPali(lon: Lon, ijo: Ijo, nanpa: number, maIjo: MaIjo, nasinMusi: readonly NasinMusi[])\r\n{\r\n  const ijoAntePiLonSama = maIjo.lonIjo\r\n    .get(lon)!\r\n    .filterNot((_, nanpaNi) => nanpaNi === nanpa)\r\n    .toSet();\r\n  const nimiPiIjoSitelenAntePiLonSama = ijoAntePiLonSama\r\n    .toSeq()\r\n    .filter(ni => ni.liSitelen())\r\n    .map(ni => ni.nimi as NimiIjo)\r\n    .toSet();\r\n  \r\n  function nasinLiLon(nasin: NasinMusi)\r\n  {\r\n    const semeLiLon =\r\n      nasin.seme.contains('ali') ||\r\n      (ijo.liNimi() && nasin.seme.contains('nimi')) ||\r\n      (ijo.liSitelen() && nasin.seme.contains(ijo.nimi));\r\n    \r\n    const lonSemeLiLon =\r\n      nasin.lonSeme.contains('ali') ||\r\n      (nasin.lonSeme.contains('nimi') && ijoAntePiLonSama.some(ni => ni.liNimi())) ||\r\n      (nasin.lonSeme.contains('kon') && ijoAntePiLonSama.isEmpty()) ||\r\n      !nasin.lonSeme.intersect(nimiPiIjoSitelenAntePiLonSama).isEmpty();\r\n    \r\n    return semeLiLon && lonSemeLiLon;\r\n  }\r\n  \r\n  const paliMute = Im.Seq(nasinMusi)\r\n    .filter(nasinLiLon)\r\n    .flatMap(nasin => nasin.liSeme)\r\n    .toSet();\r\n  return paliMute;\r\n}\r\n","import Im from 'immutable';\r\n\r\n/**\r\n * li pali e lukin monsi tan lukin kulupu.\r\n * @param lukin li lukin tan ijo pi nanpa wan tawa kulupu pi ijo pi nanpa tu.\r\n * @returns e lukin tan ijo pi nanpa tu tawa ijo pi nanpa wan.\r\n */\r\nexport function monsiELukinKulupu<TWan extends string, TTu>(lukin: Record<TWan, readonly TTu[]>)\r\n{\r\n  return Im.Seq(lukin)\r\n    .flatMap((tawaMute, tan) => Im.Seq(tawaMute as readonly TTu[]).map(tawa => [tawa, tan as TWan]))\r\n    .toMap();\r\n}\r\n","import { monsiELukinKulupu } from './kepeken';\r\n\r\n/**\r\n * nimi ali li insa kulupu mute:\r\n *   nimi ijo li nimi e sitelen.\r\n *   nimi kulupu li nimi e kulupu ijo.\r\n *   nimi pali li nimi e ni: ijo li pali seme?\r\n *   nimi toki li insa nimi ante mute, li pali e nasin musi.\r\n */\r\nexport type KulupuNimi = 'ijo' | 'kulupu' | 'pali' | 'toki';\r\n\r\n/**\r\n * nimi ali insa kulupu ona.\r\n */\r\nexport const nimiInsaKulupu =\r\n{\r\n  toki:\r\n  [\r\n    'li',\r\n    'e',\r\n    'en',\r\n    'ala',\r\n    'lon',\r\n  ],\r\n  kulupu:\r\n  [\r\n    'nimi',    // nimi ali\r\n    'sitelen', // sitelen ali\r\n    'ali',     // nimi anu sitelen ali\r\n    'kon',     // leko pi ijo ala\r\n  ],\r\n  pali:\r\n  [\r\n    'mi',\r\n    'pini',\r\n    'moli',\r\n    'awen',\r\n    'weka',\r\n    'tawa',\r\n    'sewi',\r\n    'anpa',\r\n  ],\r\n  ijo:\r\n  [\r\n    'soweli',\r\n    'waso',\r\n    'kala',\r\n    'akesi',\r\n    'pipi',\r\n    'jan',\r\n    'mije',\r\n    'meli',\r\n    'tomo',\r\n    'ma',\r\n    'kiwen',\r\n    'telo',\r\n    'ko',\r\n    'kili',\r\n    'kasi',\r\n    'pan',\r\n    'sike',\r\n    'lipu',\r\n    'nena',\r\n    'lupa',\r\n    'poki',\r\n    'supa',\r\n    'palisa',\r\n    'ilo',\r\n    'len',\r\n    'mani',\r\n    'linja',\r\n    'jaki',\r\n    'suno',\r\n    'mun',\r\n    'pilin',\r\n    'olin',\r\n    'tenpo',\r\n    'sijelo',\r\n    'lawa',\r\n    'luka',\r\n    'noka',\r\n    'uta',\r\n    'kute',\r\n    'oko',\r\n    'pu',\r\n  ]\r\n} as const;\r\n\r\nconst kulupuPiNimiAli = monsiELukinKulupu(nimiInsaKulupu);\r\n\r\nexport const nimiAli = kulupuPiNimiAli.keySeq().toArray();\r\n\r\nexport type NimiToki   = typeof nimiInsaKulupu.toki  [number];\r\nexport type NimiKulupu = typeof nimiInsaKulupu.kulupu[number];\r\nexport type NimiIjo    = typeof nimiInsaKulupu.ijo   [number];\r\nexport type NimiPali   = typeof nimiInsaKulupu.pali  [number];\r\n\r\nexport type Nimi = NimiToki | NimiKulupu | NimiIjo | NimiPali;\r\n\r\n/**\r\n * nimi li insa ala insa kulupu ni?\r\n */\r\nexport function liInsaKulupu(nimi: Nimi, kulupu: 'toki'  ): nimi is NimiToki\r\nexport function liInsaKulupu(nimi: Nimi, kulupu: 'kulupu'): nimi is NimiKulupu\r\nexport function liInsaKulupu(nimi: Nimi, kulupu: 'ijo'   ): nimi is NimiIjo\r\nexport function liInsaKulupu(nimi: Nimi, kulupu: 'pali'  ): nimi is NimiPali\r\nexport function liInsaKulupu(nimi: Nimi, kulupu: KulupuNimi)\r\n{\r\n  return (nimiInsaKulupu[kulupu] as readonly Nimi[]).includes(nimi);\r\n}\r\n\r\nexport function panaEKulupuNimi(nimi: Nimi)\r\n{\r\n  return kulupuPiNimiAli.get(nimi) as KulupuNimi;\r\n}\r\n","import Im from 'immutable';\r\nimport { Token, TokenPosition } from 'typescript-parsec';\r\nimport { KulupuNimi, panaEKulupuNimi } from './nimiAli';\r\nimport { Lon } from './lon';\r\nimport { MaIjo } from './maIjo';\r\nimport { Ijo } from './ijo';\r\n\r\ntype KulupuToki = KulupuNimi | 'ala';\r\n\r\n/**\r\n * li poki pi jo e nimi, e nanpa ijo, e namako mute.\r\n * ilo PilinToki li moku e ona mute.\r\n * Toki wan li ken lukin tawa Toki poka sinpin tan linja toki sama.\r\n */\r\nexport interface Toki extends Token<KulupuToki>\r\n{\r\n  nanpaIjo?: number;\r\n}\r\n\r\n/**\r\n * li pana e linja toki ali tan poka tawa poka,\r\n * e linja toki ali tan sewi tawa anpa.\r\n */\r\nexport function* panaELinjaTokiAli(maIjo: MaIjo)\r\n{\r\n  yield* panaELinjaTokiMute(maIjo, (x: number, y: number) => new Lon(x, y));\r\n  yield* panaELinjaTokiMute(maIjo, (x: number, y: number) => new Lon(y, x));\r\n}\r\n\r\nfunction* panaELinjaTokiMute(maIjo: MaIjo, paliELon: (x: number, y: number) => Lon)\r\n{\r\n  const suli = paliELon(maIjo.suliMa.x, maIjo.suliMa.y);\r\n  for(let y = 0; y < suli.y; y++)\r\n  {\r\n    let linjaToki: Toki | undefined = undefined;\r\n    for(let x = suli.x - 1; x >= 0; x--)\r\n      linjaToki = paliEToki(x, maIjo.lonIjo.get(paliELon(x, y)), linjaToki);\r\n    yield linjaToki!;\r\n  }\r\n}\r\n\r\nfunction paliEToki(x: number, ijoENanpa: Im.Collection<number, Ijo> | undefined, tokiSinpin?: Toki): Toki\r\n{\r\n  const lonToki = panaELonToki(x);\r\n  \r\n  if(ijoENanpa !== undefined)\r\n  {\r\n    const nimiWan = ijoENanpa.filterNot(ijo => ijo.liSitelen()).entrySeq().first();\r\n    // O PALI: leko wan li ken jo e nimi mute. o pali pana e ken ali!\r\n    if(nimiWan !== undefined)\r\n    {\r\n      const [nanpa, { nimi }] = nimiWan;\r\n      const kulupu = panaEKulupuNimi(nimi);\r\n      return {\r\n        nanpaIjo: nanpa,\r\n        kind: kulupu,\r\n        text: nimi,\r\n        pos: lonToki,\r\n        next: tokiSinpin,\r\n      };\r\n    }\r\n  }\r\n  \r\n  return {\r\n    kind: 'ala',\r\n    text: '',\r\n    pos: lonToki,\r\n    next: tokiSinpin,\r\n  };\r\n}\r\n\r\nfunction panaELonToki(x: number): TokenPosition\r\n{\r\n  return {\r\n    index: x,\r\n    rowBegin: 1,\r\n    columnBegin: x + 1,\r\n    rowEnd: 1,\r\n    columnEnd: x + 2,\r\n  };\r\n}\r\n","import Im from 'immutable';\r\nimport { apply, expectEOF, str, tok, seq, rep, alt, kmid, Parser, ParserOutput } from 'typescript-parsec';\r\nimport { MaIjo } from './maIjo';\r\nimport { panaELinjaTokiAli, Toki } from './toki';\r\nimport { Seme, LiSeme, NasinMusi } from './nasinMusi';\r\n\r\n/**\r\n * li lukin e nimi ali lon ma ijo li pilin e nasin musi ali li pana e ona.\r\n * @param maIjo li ijo ali insa kulupu lon.\r\n * @returns nasin musi ali pi ma ni.\r\n */\r\n export function panaENasinMusiAli(maIjo: MaIjo): readonly NasinMusi[]\r\n {\r\n   const tokiAli = panaELinjaTokiAli(maIjo);\r\n   const nasinAli = Im.Seq(tokiAli)\r\n     .map(linja => expectEOF(pilin.parse(linja)))\r\n     .flatMap(panaENasinMusiLinja);\r\n   \r\n   return nasinAli.toArray();\r\n }\r\n \r\nconst pilinJaki = rep(alt(tok('ala'), tok('ijo'), tok('kulupu'), tok('toki'), tok('pali')));\r\n\r\nconst pilinIjo    = tok('ijo'    as const);\r\nconst pilinKulupu = tok('kulupu' as const);\r\nconst pilinPali   = tok('pali'   as const);\r\n\r\nconst pilinLi  = str<'toki'>('li');\r\nconst pilinEn  = str<'toki'>('en');\r\nconst pilinLon = str<'toki'>('lon');\r\n//const pilinAla = str<'toki'>('ala');\r\n\r\nconst pilinSeme = apply(\r\n  muteEnInsa(alt(pilinIjo, pilinKulupu), pilinEn),\r\n  ([mute, insa]) =>\r\n  ({\r\n    seme: Im.Seq(mute).map(ni => ni.text as Seme).toSet(),\r\n    nanpaIjo: Im.Seq(mute).map((ni: Toki) => ni.nanpaIjo!)\r\n      .concat(Im.Seq(insa).map((ni: Toki) => ni.nanpaIjo!))\r\n      .toSet()\r\n  } as const)\r\n);\r\n\r\nconst pilinLeko = alt(\r\n  apply(\r\n    pilinSeme,\r\n    ({ nanpaIjo, seme }) =>\r\n    ({\r\n      seme: seme,\r\n      lonSeme: Im.Set.of('ali' as Seme),\r\n      nanpaIjo: nanpaIjo\r\n    })\r\n  ),\r\n  apply(\r\n    seq(pilinSeme, pilinLon, pilinSeme),\r\n    ([seme, lon, lonSeme]) =>\r\n    ({\r\n      seme: seme.seme,\r\n      lonSeme: lonSeme.seme,\r\n      nanpaIjo: Im.Set.of((lon as Toki).nanpaIjo!).union(seme.nanpaIjo, lonSeme.nanpaIjo)\r\n    })\r\n  )\r\n);\r\n\r\nconst pilinPiNasinMusi = apply(\r\n  seq(pilinLeko, pilinLi, alt(pilinPali, pilinIjo)),\r\n  ([leko, li, liSeme]) =>\r\n  ({\r\n    seme: leko.seme,\r\n    lonSeme: leko.lonSeme,\r\n    liSeme: Im.Set.of(liSeme.text as LiSeme),\r\n    nanpaIjo: Im.Set.of((li as Toki).nanpaIjo!, (liSeme as Toki).nanpaIjo!).union(leko.nanpaIjo)\r\n  } as NasinMusi)\r\n);\r\n\r\nconst pilin = kmid(pilinJaki, pilinPiNasinMusi, pilinJaki);\r\n\r\nfunction panaENasinMusiLinja(linja: ParserOutput<string, NasinMusi>)\r\n{\r\n  const nasinLinja = linja.successful\r\n    ? linja.candidates.map(ken => ken.result)\r\n    : [];\r\n  return Im.Seq(nasinLinja)\r\n    .filterNot(nasinNi =>\r\n      nasinLinja.some(nasinAnte => liLiliPiNasinMusiAnte(nasinNi.nanpaIjo, nasinAnte.nanpaIjo)));\r\n}\r\n\r\nfunction liLiliPiNasinMusiAnte(nanpaIjoMuteNi: Im.Set<number>, nanpaIjoMuteAnte: Im.Set<number>)\r\n{\r\n  return nanpaIjoMuteNi.size < nanpaIjoMuteAnte.size &&\r\n    nanpaIjoMuteNi.isSubset(nanpaIjoMuteAnte);\r\n}\r\n\r\nfunction muteEnInsa<TKulupu, TMute, TInsa>(\r\n  pilinMute: Parser<TKulupu, TMute>,\r\n  pilinInsa: Parser<TKulupu, TInsa>\r\n): Parser<TKulupu, [TMute[], TInsa[]]>\r\n{\r\n  return apply(\r\n    seq(pilinMute, rep(seq(pilinInsa, pilinMute))),\r\n    ([lawa, sijelo]) =>\r\n    [\r\n      [lawa].concat(sijelo.map(([insa, mute]) => mute)),\r\n      sijelo.map(([insa, mute]) => insa)\r\n    ]\r\n  );\r\n}\r\n","import Im from 'immutable';\r\nimport { AntePiLipuIjo } from './lipuIjo';\r\nimport { Lon, NasinTawa } from './lon';\r\nimport { LonPali } from './lonPali';\r\nimport { LiSeme } from './nasinMusi';\r\nimport { liInsaKulupu, NimiIjo, NimiPali } from './nimiAli';\r\n\r\nexport type Pali = (suliMa: Lon, lonPali: LonPali, nasin: NasinTawa) => AntePiLipuIjo;\r\n\r\nexport const paliAnte: Pali = (suliMa, lonPali, nasin) =>\r\n{\r\n  const ante = Im.Seq.Keyed(\r\n    lonPali.entrySeq().flatMap(([_, mute]) =>\r\n      mute\r\n        .map(paliMute => paliMute.filter(pali => liInsaKulupu(pali, 'ijo')) as Im.Set<NimiIjo>)\r\n        .filterNot(paliMute => paliMute.isEmpty())\r\n        .toKeyedSeq()\r\n    )\r\n  // O PALI: ante e ijo wan tawa ijo mute!\r\n  ).map(anteMute => ({ kulupu: 'sitelen' as const, nimi: anteMute.first()! }));\r\n  \r\n  const weka = Im.Seq.Keyed(\r\n    lonPali\r\n      .toIndexedSeq()\r\n      .map(panaENanpaWeka)\r\n      .flatMap(ni => ni)\r\n      .map(nanpa => [nanpa, { liLon: false }])\r\n  );\r\n  \r\n  return { anteMute: ante.concat(weka) };\r\n}\r\n\r\nfunction panaENanpaWeka(paliLeko: Im.Collection<number, Im.Set<LiSeme>>)\r\n{\r\n  const lekoLiMoli = paliLeko.some(pali => pali.contains('moli'));\r\n  return paliLeko\r\n    .filter(pali => pali.contains('weka') || (lekoLiMoli && pali.contains('mi')))\r\n    .keySeq();\r\n}\r\n\r\nexport const paliTawaMi: Pali = (suliMa, lonPali, nasin) =>\r\n  ({\r\n    anteMute: panaEKulupuTawa('mi', suliMa, lonPali, nasin)\r\n      .toKeyedSeq()\r\n      .map(lon => ({ lon: lon.tawa(nasin) }))\r\n  });\r\n\r\nexport const paliTawaTawa: Pali = (suliMa, lonPali, nasin) =>\r\n{\r\n  const anpa = panaEKulupuTawa('anpa', suliMa, lonPali, '↓')\r\n    .toKeyedSeq()\r\n    .map(lon => ({ lon: lon.tawa('↓') }))\r\n  const sewi = panaEKulupuTawa('sewi', suliMa, lonPali, '↑')\r\n    .toKeyedSeq()\r\n    .map(lon => ({ lon: lon.tawa('↑') }))\r\n  return {\r\n    anteMute: anpa.concat(sewi)\r\n  };\r\n}\r\n\r\nfunction panaEKulupuTawa(mamaTawa: NimiPali, suliMa: Lon, lonPali: LonPali, nasin: NasinTawa)\r\n{\r\n  const miMute = Im.Seq.Keyed(\r\n    lonPali.entrySeq().flatMap(([lon, mute]) =>\r\n      mute\r\n        .filter(pali => pali.contains(mamaTawa))\r\n        .toKeyedSeq()\r\n        .mapEntries(([nanpa, _]) => [nanpa, lon]))\r\n  );\r\n\r\n  function lukinEKulupuTawa(nanpa: number, lon: Lon): Im.Seq.Keyed<number, Lon>\r\n  {\r\n    const lukinNi = lonPali.get(lon);\r\n    const lonSin = lon.tawa(nasin);\r\n    const lukinSin = lonPali.get(lonSin);\r\n    const ken =\r\n      lonSin.liInsaMa(suliMa) &&\r\n      panaENanpaTanPali(lukinNi, 'awen').isEmpty() &&\r\n      panaENanpaTanPali(lukinSin, 'awen').isEmpty();\r\n    \r\n    if(ken)\r\n    {\r\n      const tawa = panaENanpaTanPali(lukinSin, 'tawa')\r\n        .union(panaENanpaTanPali(lukinSin, 'mi'));\r\n      const lukinTawa = tawa.toSeq().map(ni => lukinEKulupuTawa(ni, lonSin));\r\n      if(lukinTawa.some(ni => ni.isEmpty()))\r\n        return Im.Seq.Keyed();\r\n      else\r\n        return Im.Seq.Keyed([[nanpa, lon]]).concat(...lukinTawa);\r\n    }\r\n    else\r\n      return Im.Seq.Keyed();\r\n  }\r\n  \r\n  const kulupuTawaAli = Im.Map(miMute\r\n    .map((lon, nanpa) => lukinEKulupuTawa(nanpa, lon))\r\n    .valueSeq().flatMap(ni => ni)\r\n  );\r\n\r\n  return kulupuTawaAli;\r\n}\r\n\r\n\r\nfunction panaENanpaTanPali(lukin: Im.Collection<number, Im.Set<LiSeme>> | undefined, pali: NimiPali)\r\n{\r\n  if(lukin !== undefined)\r\n    return lukin.filter(paliMute => paliMute.contains(pali)).keySeq().toSet();\r\n  else\r\n    return Im.Set.of<number>();\r\n}\r\n\r\nexport function panaEPilinMusi(suliMa: Lon, lonPali: LonPali)\r\n{\r\n  if(lonPali.some(liPini))\r\n    return 'pini';\r\n  else if(liTawa(suliMa, lonPali))\r\n    return 'tawa';\r\n  else\r\n    return 'palisa';\r\n}\r\n\r\nfunction liPini(paliLeko: Im.Collection<number, Im.Set<LiSeme>>)\r\n{\r\n  const lekoLiPini = paliLeko.some(pali => pali.contains('pini'));\r\n  const lekoLiMi = paliLeko.some(pali => pali.contains('mi'));\r\n  return lekoLiPini && lekoLiMi;\r\n}\r\n\r\nfunction liTawa(suliMa: Lon, lonPali: LonPali)\r\n{\r\n  const anpa = panaEKulupuTawa('anpa', suliMa, lonPali, '↓');\r\n  const sewi = panaEKulupuTawa('sewi', suliMa, lonPali, '↑');\r\n  return anpa.size > 0 || sewi.size > 0;\r\n}\r\n","import Im from 'immutable';\r\nimport { Ijo } from './ijo';\r\nimport { anteELipuIjo, LipuIjo } from './lipuIjo';\r\nimport { Lon, NasinTawa } from './lon';\r\nimport { MaIjo } from './maIjo';\r\nimport { LonPali, paliELonPali } from './lonPali';\r\nimport { panaENasinMusiAli } from './pilinToki';\r\nimport { Pali, panaEPilinMusi } from './pali';\r\n\r\nexport type PilinMusi =\r\n  | 'pini'   // musi li pini pona\r\n  | 'palisa' // jan musi li ken kepeken e ilo palisa\r\n  | 'tawa';  // musi li wile tawa sin\r\n\r\ninterface ITawa\r\n{\r\n  readonly nasin: NasinTawa | undefined;\r\n  readonly suliMa: Lon;\r\n  readonly lipuIjo: LipuIjo;\r\n  readonly lonPali: LonPali;\r\n  readonly lukinWawa: Im.Set<number>;\r\n  readonly pilin: PilinMusi;\r\n}\r\n// ni li ike. taso, ni li nasin pali pi ilo Im.Record:\r\nconst tawaAla: ITawa = { nasin: undefined, suliMa: new Lon(NaN, NaN), lipuIjo: Im.Map<number, Ijo>(), lonPali: Im.Map<Lon, any>(), lukinWawa: Im.Set(), pilin: 'pini' };\r\n\r\n/**\r\n * tawa wan lon tenpo musi.\r\n */\r\nexport class Tawa extends Im.Record<ITawa>(tawaAla) implements ITawa\r\n{\r\n  constructor(suliMa: Lon, lipuIjo: LipuIjo, nasin?: NasinTawa)\r\n  {\r\n    const maIjo = new MaIjo(suliMa, lipuIjo);\r\n    const nasinMusi = panaENasinMusiAli(maIjo);\r\n    const lonPali = paliELonPali(maIjo, nasinMusi);\r\n    \r\n    // O PALI: ken ante e ijo wan tawa ijo mute!\r\n    const lukinWawa = Im.Seq(nasinMusi).flatMap(nasin => nasin.nanpaIjo)\r\n      .concat(lonPali.valueSeq().flatMap(mute => mute.filter((pali, nanpa) => lipuIjo.get(nanpa)!.liSitelen() && !pali.isEmpty()).keySeq()))\r\n      .toSet();\r\n    \r\n    const pilin = panaEPilinMusi(suliMa, lonPali);\r\n    \r\n    super({\r\n      nasin: nasin,\r\n      suliMa: suliMa,\r\n      lipuIjo: lipuIjo,\r\n      lonPali: lonPali,\r\n      lukinWawa: lukinWawa,\r\n      pilin: pilin,\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * pali e tawa sin tan tawa ni.\r\n   * @param pali tawa kepeken pali seme?\r\n   * @param nasin nasin tawa.\r\n   * @returns tawa sin.\r\n   */\r\n  sin(pali: Pali, nasin: NasinTawa): Tawa\r\n  {\r\n    const antePiLipuIjo = pali(this.suliMa, this.lonPali, nasin);\r\n    const lipuIjoSin = anteELipuIjo(this.lipuIjo, antePiLipuIjo);\r\n    return new Tawa(this.suliMa, lipuIjoSin, nasin);\r\n  }\r\n}\r\n","import Im from 'immutable';\r\nimport { Lon } from './lon';\r\nimport { buildLexer, apply, expectSingleResult, expectEOF, tok, rep, alt, Parser } from 'typescript-parsec';\r\nimport { Nimi, nimiAli, nimiInsaKulupu } from './nimiAli';\r\nimport { Ijo, KulupuIjo } from './ijo';\r\n\r\n/**\r\n * ma wan tan lipu Json.\r\n */\r\n export interface LipuMa\r\n {\r\n   readonly nimi: string;\r\n   readonly ma: string[];\r\n   readonly namako?: { [sitelen: string]: string | undefined };\r\n   // pona la, ni li { [sitelen: string]: string }. taso, ni li nasin pali pi ilo Import pi lipu Json.\r\n }\r\n\r\nenum KulupuToki { Nimi, Sitelen, Namako, Kon, Insa }\r\n \r\n/**\r\n * li pilin e lipu ma tan lipu Json.\r\n * @param lipuMa li ma wan tan lipu Json.\r\n * @returns e jo ali pi ma ni.\r\n */\r\nexport function pilinELipuMa(lipuMa: LipuMa)\r\n{\r\n  // O PALI: pilin ike la, pana e nimi ma, e nanpa pi linja ike!\r\n  \r\n  const namakoAli = lipuMa.namako !== undefined\r\n    ? Im.Map(lipuMa.namako).map(linja => pilin(pilinPiLinjaNamako, linja as string).flat())\r\n    : Im.Map<string, Wan[]>();\r\n  \r\n  const pilinPiIjoNamako = apply(\r\n    tok(KulupuToki.Namako),\r\n    (toki): readonly Wan[] =>\r\n    {\r\n      const namako = namakoAli.get(toki.text);\r\n      if(namako !== undefined)\r\n        return namako;\r\n      else\r\n        throw new Error(`namako ${toki.text} li lon ala!`);\r\n    }\r\n  );\r\n  const pilinPiLinjaMa = rep(alt(pilinPiIjoNimi, pilinPiIjoSitelen, pilinPiIjoNamako, pilinKon));\r\n  \r\n  const ma = Im.Seq(lipuMa.ma)\r\n    .map(linja => pilin(pilinPiLinjaMa, linja))\r\n    .cacheResult();\r\n  \r\n  const suliLinja = ma.map(linja => linja.length).toList();\r\n  if(suliLinja.size === 0)\r\n    throw new Error('ma li jo e linja ala!');\r\n  \r\n  const suliMa = new Lon(suliLinja.first()!, suliLinja.size);\r\n  if(suliMa.x === 0)\r\n    throw new Error('linja ma li jo e leko ala!');\r\n  if(suliLinja.skip(1).some(ni => ni !== suliMa.x))\r\n    throw new Error('suli pi linja ma li sama ala!');\r\n  const ijoAli = ma\r\n    .flatMap((linja, y) =>\r\n      Im.Seq(linja).flatMap((leko, x) =>\r\n        Im.Seq(leko).map(wan => ({  ...wan, lon: new Lon(x, y) }))))\r\n    .map((ijo, nanpa) => new Ijo({ ...ijo, nanpa: nanpa, liLon: true }))\r\n    .toArray();\r\n  \r\n  return {\r\n    nimiMa: lipuMa.nimi,\r\n    suliMa: suliMa,\r\n    ijoAli: ijoAli,\r\n  };\r\n}\r\n\r\nconst mamaToki = buildLexer<KulupuToki>([\r\n  [true,  /^[A-Z][A-Za-z]*/g,      KulupuToki.Nimi   ],\r\n  [true,  /^[a-z]+/g,              KulupuToki.Sitelen],\r\n  [true,  /^[^A-Za-z.\\s][^.\\s]*/g, KulupuToki.Namako ],\r\n  [true,  /^\\./g,                  KulupuToki.Kon    ],\r\n  [false, /^\\s+/g,                 KulupuToki.Insa   ],\r\n]);\r\n\r\nconst nimiNimi = Im.Set<string>(nimiAli);\r\nconst nimiSitelen = Im.Set<string>(nimiInsaKulupu['ijo']);\r\n\r\nfunction panaENimi(nimi: string, liSitelen: boolean)\r\n{\r\n  const nimiLili = nimi.toLowerCase();\r\n  const tan = liSitelen ? nimiSitelen : nimiNimi;\r\n  if(tan.contains(nimiLili))\r\n    return nimiLili as Nimi;\r\n  else\r\n  {\r\n    const nimiOpen = tan.filter(ni => ni.startsWith(nimiLili));\r\n    if(nimiOpen.size === 1)\r\n      return nimiOpen.first()! as Nimi;\r\n    else if(nimiOpen.isEmpty())\r\n      throw new Error(`nimi '${nimi}' li ken open e ala!`);\r\n    else\r\n      throw new Error(`nimi '${nimi}' li ken open e '${nimiOpen.join(\"' anu '\")}''!`);\r\n  }\r\n}\r\n\r\ntype Wan = { readonly kulupu: KulupuIjo, readonly nimi: Nimi };\r\n\r\nconst pilinPiIjoNimi = apply(\r\n  tok(KulupuToki.Nimi),\r\n  (toki): readonly Wan[] =>\r\n  [{\r\n    kulupu: 'nimi',\r\n    nimi: panaENimi(toki.text, false),\r\n  }]\r\n);\r\n\r\nconst pilinPiIjoSitelen = apply(\r\n  tok(KulupuToki.Sitelen),\r\n  (toki): readonly Wan[] =>\r\n  [{\r\n    kulupu: 'sitelen',\r\n    nimi: panaENimi(toki.text, true),\r\n  }]\r\n);\r\n\r\nconst pilinKon = apply(\r\n  tok(KulupuToki.Kon),\r\n  (toki): readonly Wan[] => []\r\n);\r\n  \r\nconst pilinPiLinjaNamako = rep(alt(pilinPiIjoNimi, pilinPiIjoSitelen));\r\n\r\nfunction pilin<T>(pilinLinja: Parser<KulupuToki, T>, linja: string)\r\n{\r\n  return expectSingleResult(expectEOF(pilinLinja.parse(mamaToki.parse(linja))))\r\n}\r\n","import Im from 'immutable';\r\nimport { Ijo, IIjo } from './ijo';\r\n\r\n/**\r\n * ijo mute en nanpa ona.\r\n */\r\nexport type LipuIjo = Im.Map<number, Ijo>;\r\n\r\nexport type IjoSin = Omit<IIjo, 'nanpa'>;\r\nexport type AnteIjo = Partial<IjoSin>;\r\n\r\nexport interface AntePiLipuIjo\r\n{\r\n  readonly anteMute?: Im.Seq.Keyed<number, AnteIjo>;\r\n  readonly sinMute?: Im.Seq.Indexed<IjoSin>;\r\n}\r\n\r\nexport function anteELipuIjo(lipuIjoMajuna: LipuIjo, ante: AntePiLipuIjo): LipuIjo\r\n{\r\n  let lipu = lipuIjoMajuna;\r\n  if(ante.anteMute)\r\n    lipu = lipu.merge(ante.anteMute.map((ante, nanpa) => lipu.get(nanpa)!.merge(ante)));\r\n  return lipu;\r\n}\r\n","import assert from 'assert';\r\nimport Im from 'immutable';\r\nimport { Lon, NasinTawa } from './lon';\r\nimport { liInsaKulupu, Nimi, NimiIjo } from './nimiAli'\r\n\r\n/**\r\n * ijo ali li tan kulupu tu:\r\n *   ijo nimi li lukin sama nimi, li ken pali e nasin musi.\r\n *   ijo sitelen li lukin sama sitelen pi Sitelen Pona.\r\n */\r\nexport type KulupuIjo = 'nimi' | 'sitelen';\r\n\r\nexport interface IIjo\r\n{\r\n  readonly nanpa: number;\r\n  readonly liLon: boolean;\r\n  readonly lon: Lon;\r\n  readonly kulupu: KulupuIjo;\r\n  readonly nimi: Nimi;\r\n}\r\n// ni li ike. taso, ni li nasin pali pi ilo Im.Record:\r\nconst ijoAla: IIjo = { nanpa: NaN, liLon: false, lon: new Lon(NaN, NaN), kulupu: 'nimi', nimi: 'ala' };\r\n\r\n/**\r\n * ijo wan lon ma musi, li nimi anu sitelen.\r\n */\r\nexport class Ijo extends Im.Record<IIjo>(ijoAla) implements IIjo\r\n{\r\n  constructor(ijo: IIjo)\r\n  {\r\n    super(ijo);\r\n    assert(\r\n      ijo.kulupu !== 'sitelen' || liInsaKulupu(ijo.nimi, 'ijo'),\r\n      `ijo sitelen li ken ala jo e nimi '${ijo.nimi}'!`\r\n    );\r\n  }\r\n  \r\n  /**\r\n   * ijo ni li ijo sitelen anu seme?\r\n   * (ijo sitelen li ken jo e nimi ijo taso.)\r\n   */\r\n  liSitelen(): this is { readonly kulupu: 'sitelen', readonly nimi: NimiIjo }\r\n  {\r\n    return this.kulupu === 'sitelen';\r\n  }\r\n  \r\n  /**\r\n   * ijo ni li ijo nimi anu seme?\r\n   */\r\n  liNimi(): this is { readonly kulupu: 'nimi' }\r\n  {\r\n    return this.kulupu === 'nimi';\r\n  }\r\n  \r\n  /**\r\n   * li tawa e Ijo kepeken leko wan tawa nasin.\r\n   * @param nasin li nasin tawa.\r\n   * @returns e Ijo sin.\r\n   */\r\n  tawa(nasin: NasinTawa)\r\n  {\r\n    return this.set('lon', this.lon.tawa(nasin));\r\n  }\r\n}\r\n","import assert from 'assert';\r\nimport Im from 'immutable';\r\nimport { liNasinTawa, Lon, NasinTawa } from './lon';\r\nimport { Tawa } from './tawa';\r\nimport { LipuMa, pilinELipuMa } from './lipuMa';\r\nimport { Pali, paliAnte, paliTawaMi, paliTawaTawa } from './pali';\r\n\r\ninterface IMusi\r\n{\r\n  readonly nimiMa: string;\r\n  readonly suliMa: Lon;\r\n  readonly tenpo: Im.List<Tawa>;\r\n  readonly tenpoNi: number;\r\n}\r\n// ni li ike. taso, ni li nasin pali pi ilo Im.Record:\r\nconst musiAla: IMusi = { nimiMa: '', suliMa: new Lon(NaN, NaN), tenpo: Im.List(), tenpoNi: NaN };\r\n\r\nexport class Musi extends Im.Record<IMusi>(musiAla) implements IMusi\r\n{\r\n  constructor(lipuMa: LipuMa)\r\n  {\r\n    const { nimiMa, suliMa, ijoAli } = pilinELipuMa(lipuMa);\r\n    const lipuIjo = Im.Map(Im.Seq(ijoAli).toKeyedSeq());\r\n    const tenpoOpen = Im.List.of(new Tawa(suliMa, lipuIjo));\r\n    \r\n    super({\r\n      nimiMa: nimiMa,\r\n      suliMa: suliMa,\r\n      tenpo: tenpoOpen,\r\n      tenpoNi: 0,\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * jan musi li lukin e tawa ni.\r\n   */\r\n  get tawaNi()\r\n  {\r\n    const ni = this.tenpo.get(this.tenpoNi);\r\n    assert(ni, 'tenpo ni li ike!');\r\n    return ni;\r\n  }\r\n  \r\n  panaENasin(kamaKin: boolean = false): readonly (NasinTawa | undefined)[]\r\n  {\r\n    const tenpo = kamaKin\r\n      ? this.tenpo\r\n      : this.tenpo.take(this.tenpoNi + 1)\r\n    return tenpo\r\n      .map(tawa => tawa.nasin)\r\n      .toArray();\r\n  }\r\n  \r\n  tenpoMonsi(ali: boolean = false): Musi\r\n  {\r\n    if(this.tenpoNi > 0)\r\n      return this.set('tenpoNi', ali ? 0 : this.tenpoNi - 1);\r\n    else\r\n      return this;\r\n  }\r\n  \r\n  tenpoSinpin(ali: boolean = false): Musi\r\n  {\r\n    if(this.tenpoNi < this.tenpo.size - 1)\r\n      return this.set('tenpoNi', ali ? this.tenpo.size - 1 : this.tenpoNi + 1);\r\n    else\r\n      return this;\r\n  }\r\n  \r\n  tenpoNanpa(nanpa: number): Musi\r\n  {\r\n    if(nanpa >= 0 && nanpa < this.tenpo.size)\r\n      return this.set('tenpoNi', nanpa);\r\n    else\r\n      return this;\r\n  }\r\n  \r\n  tawaPalisa(nasin: NasinTawa): Musi\r\n  {\r\n    const tawaNi = this.tawaNi;\r\n    assert(tawaNi.pilin === 'palisa', 'ken ala tawaPalisa!');\r\n    return this.tawa(nasin, paliTawaMi, this.tenpoNi + 1);\r\n  }\r\n  \r\n  tawaTawa(): Musi\r\n  {\r\n    const tawaNi = this.tawaNi;\r\n    assert(this.tawaNi.pilin === 'tawa', 'ken ala tawaTawa!');\r\n    assert(tawaNi.nasin, 'O PALI: tawaTawa tan open musi.');  // O PALI!\r\n    return this.tawa(tawaNi.nasin, paliTawaTawa, this.tenpoNi);\r\n  }\r\n  \r\n  private tawa(nasin: NasinTawa, paliTawa: Pali, tenpoNiSin: number): Musi\r\n  {\r\n    const t0 = Date.now();\r\n    \r\n    const tawaNi = this.tawaNi;\r\n    const tawaInsa = tawaNi.sin(paliTawa, nasin);\r\n    const tawaSin = tawaInsa.sin(paliAnte, nasin);\r\n    \r\n    if(tawaSin.lipuIjo.equals(tawaNi.lipuIjo))\r\n      return this;  // ala li ante\r\n    \r\n    const tenpoSin = this.tenpo.take(tenpoNiSin).push(tawaSin);\r\n    \r\n    const t1 = Date.now();\r\n    console.log(`tawa: ${t1 - t0}`);\r\n    \r\n    return this.merge({ tenpo: tenpoSin, tenpoNi: tenpoNiSin });\r\n  }\r\n  \r\n  sinETenpoAli(tokiNasin: string): Musi\r\n  {\r\n    const nasin = Im.Seq(tokiNasin.split('')).filter(liNasinTawa).cacheResult();\r\n    if(nasin.size === 0)\r\n      return this;  // tokiNasin li ala anu ike\r\n    \r\n    function tawa(musi: Musi)\r\n    {\r\n      let musiSin = musi;\r\n      while(musiSin.tawaNi.pilin === 'tawa')\r\n        musiSin = musiSin.tawaTawa();\r\n      return musiSin;\r\n    }\r\n    \r\n    const musiOpen = this.tenpoMonsi(true);\r\n    const musiSin = nasin.reduce((musi, nasinTawa) => tawa(musi.tawaPalisa(nasinTawa)), musiOpen);\r\n    return musiSin.tenpoMonsi(true);\r\n  }\r\n}\r\n\r\n","import { Component } from 'react';\r\nimport { monsiELukinKulupu } from '../insa/kepeken';\r\nimport { liNasinTawa, NasinTawa } from '../insa/lon';\r\n\r\ntype TawaTenpo = 'monsi' | 'sinpin' | 'open' | 'pini';\r\nexport type Palisa = NasinTawa | TawaTenpo;\r\n\r\nconst palisaAli: Record<Palisa, readonly string[]> =\r\n{\r\n  '↑':      ['KeyW', 'ArrowUp'],\r\n  '↓':      ['KeyS', 'ArrowDown'],\r\n  '←':      ['KeyA', 'ArrowLeft'],\r\n  '→':      ['KeyD', 'ArrowRight'],\r\n  \r\n  'monsi':  ['KeyZ', 'Backspace'],\r\n  'sinpin': ['KeyX', 'Insert'],\r\n  'open':   ['KeyR', 'Home'],\r\n  'pini':   ['KeyT', 'End'],\r\n} as const;\r\n\r\nconst palisaPiNimiPalisa = monsiELukinKulupu(palisaAli);\r\n\r\nexport interface JoPiIloPalisa\r\n{\r\n  palisaLa(palisa: Palisa): void;\r\n}\r\n\r\nexport class IloPalisa extends Component<JoPiIloPalisa>\r\n{\r\n  render = () => null;\r\n  \r\n  componentDidMount()\r\n  {\r\n    window.addEventListener('keydown', this.lukaPalisa);\r\n  }\r\n  \r\n  componentWillUnmount()\r\n  {\r\n    window.removeEventListener('keydown', this.lukaPalisa);\r\n  }\r\n  \r\n  private lukaPalisa = (pali: KeyboardEvent) =>\r\n  {\r\n    const palisa = palisaPiNimiPalisa.get(pali.code);\r\n    if(palisa && !(pali.repeat && liNasinTawa(palisa)))\r\n    {\r\n      this.props.palisaLa(palisa);\r\n      pali.preventDefault();\r\n    }\r\n  }\r\n}\r\n\r\nexport function panaENimiPalisa(palisa: Palisa): readonly string[]\r\n{\r\n  return palisaAli[palisa]\r\n    .map(nimi => `[${nimi.replace(/^Key/, '')}]`);\r\n}\r\n","import Im from 'immutable' ;\r\nimport { Nimi, nimiAli } from '../insa/nimiAli';\r\n\r\ninterface LinjaNimi\r\n{\r\n  readonly nimiLili: string;\r\n  readonly suliPoka: number;\r\n}\r\n\r\nexport function kipisiENimi(nimi: Nimi): readonly LinjaNimi[]\r\n{\r\n  if(!kipisiPiNimiAli)\r\n    kipisiPiNimiAli = paliEKipisiPiNimiAli();\r\n  \r\n  return kipisiPiNimiAli[nimi];\r\n}\r\n\r\ntype KipisiPiNimiAli = Record<Nimi, readonly LinjaNimi[]>;\r\nlet kipisiPiNimiAli: KipisiPiNimiAli | undefined;\r\n\r\nfunction paliEKipisiPiNimiAli(): KipisiPiNimiAli\r\n{\r\n  const lipuSitelen = document.createElement('canvas');\r\n  const lonSitelen = lipuSitelen.getContext('2d')!;\r\n  lonSitelen.font = 'normal 100px truculenta';\r\n  \r\n  function paliELinja(nimiLili: string, suliPokaAli: number): LinjaNimi\r\n  {\r\n    const suliPoka = Math.round(suliPokaAli / lonSitelen.measureText(nimiLili).width);\r\n    return { nimiLili: nimiLili, suliPoka: suliPoka };\r\n  }\r\n  \r\n  function kipisiENimi(nimi: string): readonly LinjaNimi[]\r\n  {\r\n    if(nimi.length < 4)\r\n      return [paliELinja(nimi, nanpaSuliPiLinjaWan)];\r\n    else\r\n    {\r\n      const kenKipisi = Im.Range(2, nimi.length - 1)\r\n        .map(meso => [\r\n          paliELinja(nimi.substring(0, meso), nanpaSuliPiLinjaTu),\r\n          paliELinja(nimi.substring(meso), nanpaSuliPiLinjaTu),\r\n        ]);\r\n      return kenKipisi\r\n        .minBy(([wan, tu]) => Math.abs(wan.suliPoka - tu.suliPoka)) ?? [];\r\n    }\r\n  }\r\n  \r\n  const kipisi: { [nimi: string]: readonly LinjaNimi[] } = { };\r\n  for(const nimi of nimiAli)\r\n    kipisi[nimi] = kipisiENimi(nimi);\r\n  \r\n  return kipisi as KipisiPiNimiAli;\r\n}\r\n\r\nconst nanpaSuliPiLinjaWan = 8000;\r\nconst nanpaSuliPiLinjaTu = 10240;\r\n","import { KulupuNimi, NimiIjo } from '../insa/nimiAli';\r\nimport { Kule } from './kule';\r\n\r\nexport type AnteTawa = 'poka' | 'sikePoka' | 'sikeSewi';\r\n\r\nexport interface LukinIjo\r\n{\r\n  readonly kule: Kule;\r\n  readonly anteTawa?: AnteTawa;\r\n}\r\n\r\nexport const lukinPiKulupuNimi: Record<KulupuNimi, LukinIjo> =\r\n{\r\n  ijo:    { kule: '#26a' },\r\n  toki:   { kule: '#555' },\r\n  kulupu: { kule: '#682' },\r\n  pali:   { kule: '#b52' },\r\n} as const;\r\n\r\nexport const lukinPiIjoAli: Record<NimiIjo, LukinIjo> =\r\n{\r\n  soweli: { kule: '#444', anteTawa: 'poka' },\r\n  waso:   { kule: '#678', anteTawa: 'poka' },\r\n  kala:   { kule: '#d80', anteTawa: 'sikePoka' },\r\n  akesi:  { kule: '#294', anteTawa: 'sikeSewi' },\r\n  pipi:   { kule: '#850', anteTawa: 'sikeSewi' },\r\n  jan:    { kule: '#c86' },\r\n  mije:   { kule: '#04c' },\r\n  meli:   { kule: '#c08' },\r\n  tomo:   { kule: '#c60' },\r\n  ma:     { kule: '#666' },\r\n  kiwen:  { kule: '#478' },\r\n  telo:   { kule: '#09b' },\r\n  ko:     { kule: '#884', anteTawa: 'sikeSewi' },\r\n  kili:   { kule: '#b10' },\r\n  kasi:   { kule: '#2a4' },\r\n  pan:    { kule: '#890' },\r\n  sike:   { kule: '#60a' },\r\n  lipu:   { kule: '#0aa' },\r\n  nena:   { kule: '#750' },\r\n  lupa:   { kule: '#750' },\r\n  poki:   { kule: '#a90' },\r\n  supa:   { kule: '#b80' },\r\n  palisa: { kule: '#490', anteTawa: 'sikeSewi' },\r\n  ilo:    { kule: '#488' },\r\n  len:    { kule: '#a94' },\r\n  mani:   { kule: '#c90' },\r\n  linja:  { kule: '#d00', anteTawa: 'poka' },\r\n  jaki:   { kule: '#543', anteTawa: 'sikePoka' },\r\n  suno:   { kule: '#c80', anteTawa: 'sikeSewi' },\r\n  mun:    { kule: '#07d', anteTawa: 'sikePoka' },\r\n  pilin:  { kule: '#e02' },\r\n  olin:   { kule: '#e05' },\r\n  tenpo:  { kule: '#555', anteTawa: 'sikeSewi' },\r\n  sijelo: { kule: '#a85' },\r\n  lawa:   { kule: '#d60', anteTawa: 'poka' },\r\n  luka:   { kule: '#a85', anteTawa: 'sikeSewi' },\r\n  noka:   { kule: '#830', anteTawa: 'poka' },\r\n  uta:    { kule: '#d42' },\r\n  kute:   { kule: '#a85', anteTawa: 'poka' },\r\n  oko:    { kule: '#24d', anteTawa: 'sikePoka' },\r\n  pu:     { kule: '#109' },\r\n} as const;\r\n","import { Lon } from '../insa/lon';\r\nimport { AnteTawa } from './lukinIjo'\r\n\r\nexport type Jasima = 'none' | `scaleX(${-1 | 1})` | `rotate(${number}turn)`;\r\n\r\nexport function panaEJasima(jasimaMajuna: Jasima, lonMajuna: Lon | undefined, lonSin: Lon, anteTawa?: AnteTawa): Jasima\r\n{\r\n  if(lonMajuna && (anteTawa === 'sikePoka' || anteTawa === 'sikeSewi'))\r\n  {\r\n    const nanpaNasin =\r\n      lonSin.x > lonMajuna.x ? 0 :\r\n      lonSin.y > lonMajuna.y ? 0.25 :\r\n      lonSin.x < lonMajuna.x ? 0.5 :\r\n      lonSin.y < lonMajuna.y ? 0.75 :\r\n      undefined;\r\n    \r\n    if(nanpaNasin !== undefined)\r\n    {\r\n      const namakoLawa =  anteTawa === 'sikeSewi' ? 0.25 : 0;\r\n      const nanpaMajuna = panaENanpaPiJasimaSike(jasimaMajuna, namakoLawa) ?? 0;\r\n      const sike = Math.floor(nanpaMajuna);\r\n      const ante = nanpaNasin - (nanpaMajuna - sike);\r\n      const namakoSike = sike + (ante <= -0.5 ? 1 : 0) + (ante >= 0.5 ? -1 : 0);\r\n      \r\n      const nanpaSike = nanpaNasin + namakoSike + namakoLawa;\r\n      return `rotate(${nanpaSike}turn)`;\r\n    }\r\n    else\r\n      return jasimaMajuna;\r\n  }\r\n  else if(lonMajuna && anteTawa === 'poka')\r\n  {\r\n    if(lonSin.x > lonMajuna.x)\r\n      return `scaleX(1)`;\r\n    else if(lonSin.x < lonMajuna.x)\r\n      return `scaleX(-1)`;\r\n    else\r\n      return jasimaMajuna;\r\n  }\r\n  else\r\n    return 'none';\r\n}\r\n\r\nfunction panaENanpaPiJasimaSike(jasima: Jasima, namakoLawa: number)\r\n{\r\n  const kili = alasaNanpaPiJasimaSike.exec(jasima);\r\n  if(kili)\r\n    return parseFloat(kili[1]) - namakoLawa;\r\n  else\r\n    return undefined;\r\n}\r\n\r\nconst alasaNanpaPiJasimaSike = /^rotate\\((.*)turn\\)$/;\r\n","import './leko.css';\r\nimport classNames from 'classnames';\r\nimport { useState, useRef, useEffect, memo } from 'react';\r\nimport { Ijo } from '../insa/ijo';\r\nimport { lukinPiKulupuNimi, lukinPiIjoAli } from './lukinIjo'\r\nimport { kipisiENimi } from './kipisiENimi';\r\nimport { Jasima, panaEJasima } from './jasima';\r\nimport { panaEKulupuNimi } from '../insa/nimiAli';\r\n\r\nexport const Leko = memo(function({ ijo, lukinWawa }: { ijo: Ijo, lukinWawa: boolean })\r\n{\r\n  const lukinNimi = ijo.liSitelen()\r\n    ? lukinPiIjoAli[ijo.nimi]\r\n    : lukinPiKulupuNimi[panaEKulupuNimi(ijo.nimi)];\r\n  const anteTawa = ijo.liSitelen() ? lukinNimi.anteTawa : undefined;\r\n  \r\n  const kulupuLukin = classNames(\r\n    'leko',\r\n    { 'sitelen': ijo.liSitelen() },\r\n    { 'wawa': lukinWawa },\r\n    { 'lonAla': !ijo.liLon }\r\n  );\r\n  \r\n  const ijoMajuna = useMajuna(ijo);\r\n  const [jasimaMajuna, sinEJasima] = useState<Jasima>('none');\r\n  const jasima = ijoMajuna?.nimi === ijo.nimi\r\n    ? panaEJasima(jasimaMajuna, ijoMajuna.lon, ijo.lon, anteTawa)\r\n    : 'none';\r\n  if(jasima !== jasimaMajuna)\r\n    sinEJasima(jasima);\r\n  \r\n  const lukin =\r\n  {\r\n    left: `${ijo.lon.x}em`,\r\n    top: `${ijo.lon.y}em`,\r\n    transform: jasima,\r\n    color: lukinNimi.kule,\r\n  };\r\n  \r\n  return (\r\n    <div className={kulupuLukin} style={lukin}>\r\n      {insa(ijo)}\r\n    </div>\r\n  );\r\n});\r\n\r\nfunction insa(ijo: Ijo)\r\n{\r\n  if(ijo.liSitelen())\r\n    return <span>{ijo.nimi}</span>;\r\n  else\r\n  {\r\n    const linja = kipisiENimi(ijo.nimi);\r\n    const nanpaLinja = linja.length === 1 ? 'linjaWan' : 'linjaTu';\r\n    const kulupuLukin = classNames('nimi', nanpaLinja);\r\n    \r\n    return linja.map(({ nimiLili, suliPoka }, nanpa) =>\r\n      <span key={nanpa} className={kulupuLukin}\r\n        style={{ fontVariationSettings: `'wdth' ${suliPoka}, 'opsz' 12` }}\r\n      >\r\n        {nimiLili}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nfunction useMajuna<T>(sin: T)\r\n{\r\n  const ona = useRef<T>();\r\n  useEffect(() => { ona.current = sin; });\r\n  return ona.current;\r\n}\r\n","import './ma.css';\r\nimport Im from 'immutable';\r\nimport { Lon } from '../insa/lon';\r\nimport { LipuIjo } from '../insa/lipuIjo';\r\nimport { Leko } from './leko';\r\n\r\ninterface JoMa\r\n{\r\n  readonly suli: Lon;\r\n  readonly lipuIjo: LipuIjo;\r\n  readonly lukinWawa: Im.Set<number>;\r\n  readonly liPini: boolean;\r\n}\r\n\r\nexport function Ma(jo: JoMa)\r\n{\r\n  const lekoAli = jo.lipuIjo\r\n    .map((ijo, nanpaTaso) =>\r\n      <Leko key={nanpaTaso} ijo={ijo} lukinWawa={jo.lukinWawa.contains(nanpaTaso)} />\r\n    )\r\n    .toIndexedSeq();\r\n  \r\n    const suli = {\r\n      width: `${jo.suli.x}em`,\r\n      height: `${jo.suli.y}em`,\r\n    };\r\n  \r\n  return (\r\n    <div className='ma' style={suli}>\r\n      <div>\r\n        {lekoAli}\r\n      </div>\r\n      {\r\n        jo.liPini &&\r\n          <div className='pini' style={suli}>\r\n            <p className='pona sitelen'>pona</p>\r\n            <p className='pona toki'>pona!</p>\r\n          </div>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n","import classNames from 'classnames';\r\nimport { NasinTawa } from '../insa/lon';\r\nimport { panaENimiPalisa } from './iloPalisa';\r\nimport './tenpo.css';\r\n\r\ninterface JoTenpo\r\n{\r\n  readonly nasin: readonly (NasinTawa | undefined)[];\r\n  readonly tenpoNi: number;\r\n  readonly tenpoNanpaLa: (nanpa: number) => void;\r\n  readonly panaTanPokiLa: (nasin: string) => void;\r\n}\r\n\r\nexport const Tenpo = ({ nasin, tenpoNi, tenpoNanpaLa, panaTanPokiLa }: JoTenpo) =>\r\n  <>\r\n    <div className='pokiTenpo'>\r\n      <div className='tenpo' style={{ left: `${lon(tenpoNi, nasin.length)}em` }}>\r\n        {nasin.map((nasinTawa, nanpa) =>\r\n          <Tawa\r\n            key={nanpa}\r\n            nasinTawa={nasinTawa}\r\n            nanpaTanNi={nanpa - tenpoNi}\r\n            paliLa={() => tenpoNanpaLa(nanpa)}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n    \r\n    <div className='panaTenpo'>\r\n      <button\r\n        className={classNames({ 'kama': tenpoNi === 0 })}\r\n        title='pana e nasin tawa poki'\r\n        onClick={tenpoNi > 0 ? () => panaTawaPoki(nasin, tenpoNi) : () => {}}\r\n      >\r\n        content_copy\r\n      </button>\r\n      <button\r\n        title={'pana e nasin tan poki.\\npali ala lon ilo lukin Firefox :('}\r\n        onClick={() => panaTanPoki(panaTanPokiLa)}\r\n      >\r\n        content_paste\r\n      </button>\r\n    </div>\r\n  </>;\r\n\r\ninterface JoTawa\r\n{\r\n  readonly nasinTawa: NasinTawa | undefined;\r\n  readonly nanpaTanNi: number;\r\n  readonly paliLa: () => void;\r\n}\r\n\r\nfunction Tawa({ nasinTawa, nanpaTanNi, paliLa }: JoTawa)\r\n{\r\n  const kulupuLukin = classNames({ 'kama': nanpaTanNi > 0 });\r\n  const sitelen = nasinTawa ? nimiNasin[nasinTawa] : '';\r\n  \r\n  const nanpaTawa = Math.abs(nanpaTanNi);\r\n  const nimiNanpa = nanpaTawa <= 2 ? nanpaTawa === 1 ? 'wan' : 'tu' : 'mute';\r\n  const sinpinAnuMonsi = nanpaTanNi > 0 ? 'sinpin': 'monsi';\r\n  const insaLinja = '\\n';\r\n  const palisa = nanpaTawa === 1 ? `${insaLinja}palisa ${panaENimiPalisa(sinpinAnuMonsi).join(' anu ')}` : '';\r\n  const toki = nasinTawa\r\n    ? nanpaTanNi === 0\r\n      ? 'tenpo ni'\r\n      : `tawa ${nimiNanpa} ${sinpinAnuMonsi}${palisa}`\r\n    : `open musi${insaLinja}palisa ${panaENimiPalisa('open').join(' anu ')}`;\r\n  \r\n  return (\r\n    <div className='tawa'>\r\n      <button\r\n        className={kulupuLukin}\r\n        title={toki}\r\n        onClick={nanpaTanNi !== 0 ? paliLa : () => { }}\r\n      >\r\n        {sitelen}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction lon(ni: number, nanpa: number)\r\n{\r\n  const poka = nanpa <= suli\r\n    ? (suli - nanpa) / 2\r\n    : ni >= suli\r\n      ? suli - ni - 1\r\n      : 0;\r\n  return namako + poka;\r\n}\r\n\r\n// O PALI pona e ni!\r\nconst suli = 23;\r\nconst namako = 1.5;\r\n\r\nfunction panaTawaPoki(nasin: readonly (NasinTawa | undefined)[], tenpoNi: number)\r\n{\r\n  const tokiNasin = nasin.slice(1, tenpoNi + 1).join('');\r\n  navigator.clipboard.writeText(tokiNasin);\r\n}\r\n\r\nfunction panaTanPoki(panaTanPokiLa: (nasin: string) => void)\r\n{\r\n  if(navigator.clipboard.readText)\r\n    navigator.clipboard.readText().then(nasin => panaTanPokiLa(nasin));\r\n}\r\n\r\nconst nimiNasin: Record<NasinTawa, string> =\r\n{\r\n  '↑': 'north',\r\n  '↓': 'south',\r\n  '←': 'west',\r\n  '→': 'east',\r\n//   '↑': 'arrow_upward',\r\n//   '↓': 'arrow_downward',\r\n//   '←': 'arrow_back',\r\n//   '→': 'arrow_forward',\r\n};\r\n","import { Component } from 'react';\r\n\r\nexport interface JoPiIloTenpo\r\n{\r\n  tenpoLa(): void;\r\n}\r\n\r\nexport class IloTenpo extends Component<JoPiIloTenpo>\r\n{\r\n  render = () => null;\r\n  \r\n  componentDidMount()\r\n  {\r\n    this.pali();\r\n  }\r\n  \r\n  componentDidUpdate(prevProps: JoPiIloTenpo)\r\n  {\r\n    this.weka();\r\n    this.pali();\r\n  }\r\n  \r\n  componentWillUnmount()\r\n  {\r\n    this.weka();\r\n  }\r\n  \r\n  private suli = 220;\r\n  \r\n  private timer?: NodeJS.Timeout;\r\n  \r\n  private lukaTenpo = () =>\r\n  {\r\n    this.weka();\r\n    this.props.tenpoLa();\r\n  }\r\n  \r\n  private pali()\r\n  {\r\n    this.timer = setInterval(this.lukaTenpo, this.suli);\r\n  }\r\n  \r\n  private weka()\r\n  {\r\n    if(this.timer)\r\n      clearInterval(this.timer);\r\n  }\r\n}\r\n","import './lukinMusi.css';\r\nimport { Component } from 'react';\r\nimport { Musi } from '../insa/musi';\r\nimport { IloPalisa, Palisa } from './iloPalisa';\r\nimport { Ma } from './ma';\r\nimport { Tenpo } from './tenpo';\r\nimport { liNasinTawa } from '../insa/lon';\r\nimport { IloTenpo } from './iloTenpo';\r\nimport { LipuMa } from '../insa/lipuMa';\r\n\r\nexport interface JoPiLukinMusi\r\n{\r\n  readonly lipuMa: LipuMa;\r\n}\r\n\r\nexport class LukinMusi extends Component<JoPiLukinMusi, { musi: Musi }>\r\n{\r\n  constructor(jo: JoPiLukinMusi)\r\n  {\r\n    super(jo);\r\n    this.state = { musi: new Musi(jo.lipuMa) };\r\n  }\r\n  \r\n  render()\r\n  {\r\n    const musi = this.state.musi;\r\n    const tawaNi = musi.tawaNi;\r\n    \r\n    return (\r\n      <main>\r\n        <div className='nimiMa'>\r\n          {musi.nimiMa}\r\n        </div>\r\n        <Ma\r\n          suli={musi.suliMa}\r\n          lipuIjo={tawaNi.lipuIjo}\r\n          lukinWawa={tawaNi.lukinWawa}\r\n          liPini={tawaNi.pilin === 'pini'}\r\n        />\r\n        <Tenpo\r\n          nasin={musi.panaENasin(true)}\r\n          tenpoNi={musi.tenpoNi}\r\n          tenpoNanpaLa={this.lukaTenpoNanpa}\r\n          panaTanPokiLa={this.lukaPanaTanPoki}\r\n        />\r\n        <IloPalisa palisaLa={this.lukaPalisa} />\r\n        {\r\n          tawaNi.pilin === 'tawa' &&\r\n            <IloTenpo tenpoLa={this.lukaIloTenpo} />\r\n        }\r\n      </main>\r\n    );\r\n  }\r\n  \r\n  private lukaIloTenpo = () =>\r\n    this.setState({ musi: this.state.musi.tawaTawa() });\r\n  \r\n  private lukaTenpoNanpa = (nanpa: number) =>\r\n    this.setState({ musi: this.state.musi.tenpoNanpa(nanpa) });\r\n  \r\n  private lukaPanaTanPoki = (nasin: string) =>\r\n    this.setState({ musi: this.state.musi.sinETenpoAli(nasin) });\r\n  \r\n  private lukaPalisa = (palisa: Palisa) =>\r\n  {\r\n    if(!liNasinTawa(palisa) ||\r\n      this.state.musi.tawaNi.pilin === 'palisa')\r\n    {\r\n      const pali = this.paliPalisa[palisa];\r\n      this.setState({ musi: pali(this.state.musi) });\r\n    }\r\n  };\r\n  \r\n  private paliPalisa: Record<Palisa, (musi: Musi) => Musi> =\r\n  {\r\n    '↑':      musi => musi.tawaPalisa('↑'),\r\n    '↓':      musi => musi.tawaPalisa('↓'),\r\n    '←':      musi => musi.tawaPalisa('←'),\r\n    '→':      musi => musi.tawaPalisa('→'),\r\n    'monsi':  musi => musi.tenpoMonsi(),\r\n    'sinpin': musi => musi.tenpoSinpin(),\r\n    'open':   musi => musi.tenpoMonsi(true),\r\n    'pini':   musi => musi.tenpoSinpin(true),\r\n  } as const;\r\n}\r\n","import './maSeme.css';\r\nimport lipuMaAli from '../lipu/lipuMa.json'\r\nimport { LipuMa } from '../insa/lipuMa';\r\n\r\nexport const MaSeme = ({ paliLa }: { paliLa: (lipuMa: LipuMa) => void }) =>\r\n  <div className='maSeme'>\r\n    <p>sina wile musi lon ma seme?</p>\r\n    <div className='pokiMa'>\r\n      {lipuMaAli.map((lipuMa, nanpa) =>\r\n        <button\r\n          key={nanpa}\r\n          onClick={() => paliLa(lipuMa)}\r\n        >\r\n          {lipuMa.nimi}\r\n        </button>\r\n      )}\r\n    </div>\r\n  </div>;\r\n","import './sijelo.css';\r\nimport lipuMaAli from '../lipu/lipuMa.json'  // O WEKA\r\nimport { LukinMusi } from './lukinMusi';\r\nimport { MaSeme } from './maSeme';\r\nimport { LipuMa } from '../insa/lipuMa';\r\nimport { Component } from 'react';\r\n\r\ninterface InsaSijelo\r\n{\r\n  readonly lipuMa?: LipuMa;\r\n}\r\n\r\nexport class Sijelo extends Component<{ }, InsaSijelo>\r\n{\r\n  constructor(jo: { })\r\n  {\r\n    super(jo);\r\n    this.state = { };\r\n    // pali la:\r\n    // this.state = { lipuMa: lipuMaAli[5] };\r\n  }\r\n  \r\n  render()\r\n  {\r\n    return (\r\n      <>\r\n        <header onClick={this.lukaMonsi}>\r\n          <h1>soweli li mi</h1>\r\n          <h2>soweli li mi</h2>\r\n          <h3>nimi li lon la ijo li lon</h3>\r\n        </header>\r\n        {\r\n          this.state.lipuMa\r\n            ? <LukinMusi lipuMa={this.state.lipuMa} />\r\n            : <MaSeme paliLa={this.lukaPali} />\r\n        }\r\n      </>\r\n    );\r\n  }\r\n\r\n  private lukaPali = (lipuMa: LipuMa) =>\r\n    this.setState({ lipuMa: lipuMa });\r\n  \r\n  private lukaMonsi = () =>\r\n    this.setState({ lipuMa: undefined });\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) =>\r\n{\r\n  if(onPerfEntry && onPerfEntry instanceof Function)\r\n  {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) =>\r\n    {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import './index.css';\r\nimport { StrictMode } from 'react';\r\nimport { render } from 'react-dom';\r\nimport { Sijelo } from './lukin/sijelo';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nrender(\r\n  <StrictMode>\r\n    <Sijelo />\r\n  </StrictMode>,\r\n  document.getElementById('sijelo')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}