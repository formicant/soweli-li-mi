(this["webpackJsonpsoweli-li-mi"]=this["webpackJsonpsoweli-li-mi"]||[]).push([[0],{24:function(e,n,t){},29:function(e,n,t){},30:function(e,n,t){},37:function(e,n,t){},38:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);t(24);var i=t(5),a=t(20),r=(t(29),t(7)),o=t(8),u=t(11),l=t(10),c=(t(30),[{nimi:"ma pona",suli:{x:15,y:10},ijoAli:[{x:2,y:2,liSitelen:!0,nimi:"soweli"},{x:6,y:3,liSitelen:!0,nimi:"kala"},{x:8,y:1,liSitelen:!0,nimi:"kiwen"},{x:1,y:7,liSitelen:!1,nimi:"soweli"},{x:2,y:6,liSitelen:!1,nimi:"en"},{x:3,y:6,liSitelen:!1,nimi:"kala"},{x:4,y:6,liSitelen:!1,nimi:"li"},{x:5,y:6,liSitelen:!1,nimi:"mi"},{x:8,y:5,liSitelen:!1,nimi:"kiwen"},{x:8,y:6,liSitelen:!1,nimi:"li"},{x:8,y:7,liSitelen:!1,nimi:"awen"},{x:11,y:3,liSitelen:!1,nimi:"nimi"},{x:12,y:3,liSitelen:!1,nimi:"li"},{x:13,y:3,liSitelen:!1,nimi:"tawa"}]}]),s=t(4),f=t(3),p=t(0),j=t(21),m=Object(j.makeTypedFactory)({x:0,y:0});function k(e){return e.groupBy((function(e){return m(e)})).toMap()}function b(e){return p.default.Seq(e).flatMap((function(e,n){return p.default.Seq(e).map((function(e){return[e,n]}))})).toMap()}var d={toki:["li","e","en","ala","lon"],kulupu:["ali","nimi","kon"],ijo:["soweli","waso","kala","akesi","pipi","tomo","kiwen","telo","ko","kasi","kili","sike","leko"],pali:["mi","pini","moli","awen","weka","tawa","pakala"]},O=b(d),v=O.keys();function y(e){return O.get(e)}function S(e,n){return p.default.Map(e.mapEntries((function(t){var i=Object(s.a)(t,2),a=i[0],r=i[1];return[a,r.map((function(t,i){return function(e,n,t,i,a){var r=i.get(e).filterNot((function(e,n){return n===t})).toSet(),o=r.toSeq().filter((function(e){return e.liSitelen})).map((function(e){return e.nimi})).toSet();function u(e){var t=e.seme.contains("ali")||!n.liSitelen&&e.seme.contains("nimi")||n.liSitelen&&e.seme.contains(n.nimi),i=e.lonSeme.contains("ali")||e.lonSeme.contains("nimi")&&r.some((function(e){return!e.liSitelen}))||e.lonSeme.contains("kon")&&r.isEmpty()||!e.lonSeme.intersect(o).isEmpty();return t&&i}return p.default.Seq(a).filter(u).flatMap((function(e){return e.liSeme})).filter((function(e){return"pali"===y(e)})).map((function(e){return e})).toSet()}(a,t,i,e,n)}))]})))}function x(e,n){return void 0!==e?e.filter((function(e){return e.contains(n)})).keySeq().toSet():p.default.Set.of()}var w=t(2);function h(e,n,t){var i=t?function(e){var n=e.x;return{x:e.y,y:n}}:function(e){return{x:e.x,y:e.y}},a=i(e);return p.default.Range(0,a.y).map((function(e){return p.default.Range(0,a.x).map((function(t){return function(e,n){var t=function(e){return{index:e,rowBegin:1,columnBegin:e+1,rowEnd:1,columnEnd:e+2}}(e);if(void 0!==n){var i=n.filterNot((function(e){return e.liSitelen})).entrySeq().first();if(void 0!==i){var a=Object(s.a)(i,2),r=a[0],o=a[1].nimi;return{nanpaIjo:r,kind:y(o),text:o,pos:t,next:void 0}}}return{kind:"ala",text:"",pos:t,next:void 0}}(t,n.get(m(i({x:t,y:e}))))})).update(g)}))}function g(e){return q(e.toStack())}function q(e){if(e.size>1)return Object(f.a)(Object(f.a)({},e.peek()),{},{next:q(e.pop())});if(1===e.size)return e.peek();throw Error("palisa toki li jo e ala!")}var I,M,E=Object(w.rep)(Object(w.alt)(Object(w.tok)("ala"),Object(w.tok)("ijo"),Object(w.tok)("kulupu"),Object(w.tok)("toki"),Object(w.tok)("pali"))),N=Object(w.tok)("ijo"),P=Object(w.tok)("kulupu"),K=Object(w.tok)("pali"),L=Object(w.str)("li"),T=Object(w.str)("en"),A=Object(w.str)("lon"),C=Object(w.apply)((I=Object(w.alt)(N,P),M=T,Object(w.apply)(Object(w.seq)(I,Object(w.rep)(Object(w.seq)(M,I))),(function(e){var n=Object(s.a)(e,2),t=n[0],i=n[1];return[[t].concat(i.map((function(e){var n=Object(s.a)(e,2);return n[0],n[1]}))),i.map((function(e){var n=Object(s.a)(e,2),t=n[0];return n[1],t}))]}))),(function(e){var n=Object(s.a)(e,2),t=n[0],i=n[1];return{seme:p.default.Seq(t).map((function(e){return e.text})).toSet(),nanpaIjo:p.default.Seq(t).map((function(e){return e.nanpaIjo})).concat(p.default.Seq(i).map((function(e){return e.nanpaIjo}))).toSet()}})),F=Object(w.alt)(Object(w.apply)(C,(function(e){var n=e.nanpaIjo;return{seme:e.seme,lonSeme:p.default.Set.of("ali"),nanpaIjo:n}})),Object(w.apply)(Object(w.seq)(C,A,C),(function(e){var n=Object(s.a)(e,3),t=n[0],i=n[1],a=n[2];return{seme:t.seme,lonSeme:a.seme,nanpaIjo:p.default.Set.of(i.nanpaIjo).union(t.nanpaIjo,a.nanpaIjo)}}))),B=Object(w.apply)(Object(w.seq)(F,L,Object(w.alt)(K,N)),(function(e){var n=Object(s.a)(e,3),t=n[0],i=n[1],a=n[2];return{seme:t.seme,lonSeme:t.lonSeme,liSeme:p.default.Set.of(a.text),nanpaIjo:p.default.Set.of(i.nanpaIjo,a.nanpaIjo).union(t.nanpaIjo)}})),R=Object(w.kmid)(E,B,E);function z(e,n){return function(e,n){return h(e,n,!1).concat(h(e,n,!0))}(e,n).map((function(e){return Object(w.expectEOF)(R.parse(e))})).filter((function(e){return e.successful})).flatMap((function(e){return e.successful?p.default.Seq(e.candidates).map((function(e){return e.result})).cacheResult().update(D):void 0})).toArray()}function D(e){return e.filterNot((function(n){return e.some((function(e){return e!==n&&n.nanpaIjo.isSubset(e.nanpaIjo)}))}))}var W=t(23);function X(e,n,t){function i(a,r){var o=n.get(r),u=function(e,n){switch(n){case"sewi":return e.merge({y:e.y-1});case"anpa":return e.merge({y:e.y+1});case"soto":return e.merge({x:e.x-1});case"teje":return e.merge({x:e.x+1});default:throw Error("nasin li ike!")}}(r,t),l=n.get(u);if(function(e,n){return e.x>=0&&e.x<n.x&&e.y>=0&&e.y<n.y}(u,e)&&x(o,"awen").isEmpty()&&x(l,"awen").isEmpty()){var c,s=x(l,"tawa").union(x(l,"mi")).toSeq().map((function(e){return i(e,u)}));return s.some((function(e){return e.isEmpty()}))?p.default.Set.of():(c=p.default.Set.of(a)).union.apply(c,Object(W.a)(s))}return p.default.Set.of()}return p.default.Seq.Keyed(n.entrySeq().flatMap((function(e){var n=Object(s.a)(e,2),t=n[0];return n[1].filter((function(e){return e.contains("mi")})).toKeyedSeq().mapEntries((function(e){var n=Object(s.a)(e,2),i=n[0];n[1];return[i,t]}))}))).map((function(e,n){return i(n,e)})).valueSeq().flatMap((function(e){return e})).toSet()}function J(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.tenpoNi>0?Object(f.a)(Object(f.a)({},e),{},{tenpoNi:n?0:e.tenpoNi-1}):e}function U(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.tenpoNi<e.tenpo.size-1?Object(f.a)(Object(f.a)({},e),{},{tenpoNi:n?e.tenpo.size-1:e.tenpoNi+1}):e}function H(e,n){var t=V(e).lipuIjo,i=k(t),a=S(i,z(e.lipuMa.suli,i)),r=X(e.lipuMa.suli,a,n).toKeyedSeq().mapEntries((function(e){var n=Object(s.a)(e,2),i=(n[0],n[1]);return[i,t.get(i)]})).map((function(e){return function(e,n){switch(n){case"sewi":return Object(f.a)(Object(f.a)({},e),{},{y:e.y-1});case"anpa":return Object(f.a)(Object(f.a)({},e),{},{y:e.y+1});case"soto":return Object(f.a)(Object(f.a)({},e),{},{x:e.x-1});case"teje":return Object(f.a)(Object(f.a)({},e),{},{x:e.x+1});default:throw Error("nasin li ike!")}}(e,n)}),e.lipuMa.suli),o=t.merge(r);if(o.equals(t))return e;var u={nasin:n,lipuIjo:o},l=e.tenpo.toSeq().take(e.tenpoNi+1).concat([u]).toList();return Object(f.a)(Object(f.a)({},e),{},{tenpo:l,tenpoNi:e.tenpoNi+1})}function V(e){var n=e.tenpo.get(e.tenpoNi);if(n)return n;throw Error("tenpo ni li ike!")}var Z=b({sewi:["KeyW","ArrowUp"],anpa:["KeyS","ArrowDown"],soto:["KeyA","ArrowLeft"],teje:["KeyD","ArrowRight"],monsi:["KeyZ","Backspace"],sinpin:["KeyX","Space"],open:["KeyR","Home"],pini:["KeyT","End"]}),$=function(e){Object(u.a)(t,e);var n=Object(l.a)(t);function t(){var e;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).render=function(){return null},e.lukaPalisa=function(n){var t=Z.get(n.code);t&&e.props.palisaLa(t)},e}return Object(o.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.lukaPalisa)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.lukaPalisa)}}]),t}(i.Component),G=(t(37),t(38),t(15)),Q=t.n(G);var Y,_={soweli:{kule:"#222",anteTawa:"poka"},waso:{kule:"#678",anteTawa:"poka"},kala:{kule:"#d80",anteTawa:"sikePoka"},akesi:{kule:"#294",anteTawa:"sikeSewi"},pipi:{kule:"#850",anteTawa:"sikeSewi"},tomo:{kule:"#640"},kiwen:{kule:"#468"},telo:{kule:"#09b"},ko:{kule:"#884"},kasi:{kule:"#2a4"},kili:{kule:"#b10"},sike:{kule:"#444"},leko:{kule:"#444"},ali:{kule:"#666"},nimi:{kule:"#666"},kon:{kule:"#2af"},mi:{kule:"#222"},pini:{kule:"#640"},moli:{kule:"#b10"},awen:{kule:"#468"},weka:{kule:"#bbb"},tawa:{kule:"#222"},pakala:{kule:"#266"},li:{kule:"#666"},e:{kule:"#666"},en:{kule:"#666"},ala:{kule:"#f20"},lon:{kule:"#666"}},ee={ijo:!0,toki:!0,kulupu:!0,pali:!1,sitelen:!1},ne=t(22);function te(e){return Y||(Y=function(){var e=document.createElement("canvas").getContext("2d");function n(n,t){return{nimiLili:n,suliPoka:Math.round(t/e.measureText(n).width)}}function t(e){return e.length<4?[n(e,ie)]:null!==(t=p.default.Range(2,e.length-1).map((function(t){return[n(e.substring(0,t),ae),n(e.substring(t),ae)]})).minBy((function(e){var n=Object(s.a)(e,2),t=n[0],i=n[1];return Math.abs(t.suliPoka-i.suliPoka)})))&&void 0!==t?t:[];var t}e.font="normal 100px truculenta-variable";var i,a={},r=Object(ne.a)(v);try{for(r.s();!(i=r.n()).done;){var o=i.value;a[o]=t(o)}}catch(u){r.e(u)}finally{r.f()}return a}()),Y[e]}var ie=8e3,ae=10240;function re(e,n,t,i){if(!n||"sikePoka"!==i&&"sikeSewi"!==i)return n&&"poka"===i?t.x>n.x?"scaleX(1)":t.x<n.x?"scaleX(-1)":e:"none";var a=t.x>n.x?0:t.y>n.y?.25:t.x<n.x?.5:t.y<n.y?.75:void 0;if(void 0!==a){var r,o="sikeSewi"===i?.25:0,u=null!==(r=function(e,n){var t=oe.exec(e);return t?parseFloat(t[1])-n:void 0}(e,o))&&void 0!==r?r:0,l=Math.floor(u),c=a-(u-l);return"rotate(".concat(a+(l+(c<=-.5?1:0)+(c>=.5?-1:0))+o,"turn)")}return e}var oe=/^rotate\((.*)turn\)$/,ue=t(1);function le(e){var n=function(e){return e.liSitelen?"sitelen":y(e.nimi)}(e),t=Q()("insaLeko",n),a=_[e.nimi],r=e.liSitelen?a.anteTawa:void 0,o=function(e){var n=Object(i.useRef)();return Object(i.useEffect)((function(){n.current=e})),n.current}(e),u=Object(i.useState)("none"),l=Object(s.a)(u,2),c=l[0],f=l[1],p=re(c,o,e,r);p!==c&&f(p);var j={left:"".concat(e.x,"em"),top:"".concat(e.y,"em"),transform:p},m=ee[n]?{backgroundColor:a.kule}:{color:a.kule};return Object(ue.jsx)("div",{className:"leko",style:j,children:Object(ue.jsx)("div",{className:t,style:m,children:ce(e)})})}function ce(e){if(e.liSitelen)return Object(ue.jsx)("span",{children:e.nimi});var n=te(e.nimi),t=1===n.length?"linjaWan":"linjaTu",i=Q()("nimi",t);return n.map((function(e,n){var t=e.nimiLili,a=e.suliPoka;return Object(ue.jsx)("span",{className:i,style:{fontVariationSettings:"'wdth' ".concat(a,", 'opsz' 12")},children:t},n)}))}var se=function(e){Object(u.a)(t,e);var n=Object(l.a)(t);function t(){return Object(r.a)(this,t),n.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){var e=this.props.lipuIjo.map((function(e,n){return Object(ue.jsx)(le,Object(f.a)({},e),n)})).toIndexedSeq();return Object(ue.jsx)("div",{className:"ma",style:{width:"".concat(this.props.suli.x,"em"),height:"".concat(this.props.suli.y,"em")},children:e})}}]),t}(i.Component);function fe(e){var n="".concat(e.seme.join(" en ")),t=e.lonSeme.equals(p.default.Set.of("ali"))?"":" lon ".concat(e.lonSeme.join(" en ")),i=" li ".concat(e.liSeme.join(" li "));return"".concat(n).concat(t).concat(i)}var pe=function(e){Object(u.a)(t,e);var n=Object(l.a)(t);function t(e){var i;return Object(r.a)(this,t),(i=n.call(this,e)).lukaPalisa=function(e){var n=i.paliPalisa[e];i.setState(n(i.state))},i.paliPalisa={sewi:function(e){return H(e,"sewi")},anpa:function(e){return H(e,"anpa")},soto:function(e){return H(e,"soto")},teje:function(e){return H(e,"teje")},monsi:function(e){return J(e)},sinpin:function(e){return U(e)},open:function(e){return J(e,!0)},pini:function(e){return U(e,!0)}},i.state=function(e){return{lipuMa:e,tenpo:p.default.List.of((n=e.ijoAli,{lipuIjo:p.default.Map(p.default.Seq(n).toKeyedSeq())})),tenpoNi:0};var n}(c[0]),i}return Object(o.a)(t,[{key:"render",value:function(){var e=V(this.state).lipuIjo,n=k(e),t=z(this.state.lipuMa.suli,n).map(fe).map((function(e,n){return Object(ue.jsx)("p",{children:e},n)}));return Object(ue.jsxs)("main",{children:[Object(ue.jsx)("div",{className:"nimiMa",children:this.state.lipuMa.nimi}),Object(ue.jsx)(se,{suli:this.state.lipuMa.suli,lipuIjo:e}),Object(ue.jsx)("div",{children:t}),Object(ue.jsx)($,{palisaLa:this.lukaPalisa})]})}}]),t}(i.Component),je=function(){return Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsxs)("header",{children:[Object(ue.jsx)("h1",{children:"soweli li mi"}),Object(ue.jsx)("h2",{children:"soweli li mi"}),Object(ue.jsx)("h3",{children:"nimi li lon la ijo li lon"})]}),Object(ue.jsx)(pe,{})]})},me=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,i=n.getFID,a=n.getFCP,r=n.getLCP,o=n.getTTFB;t(e),i(e),a(e),r(e),o(e)}))};Object(a.render)(Object(ue.jsx)(i.StrictMode,{children:Object(ue.jsx)(je,{})}),document.getElementById("sijelo")),me()}},[[40,1,2]]]);
//# sourceMappingURL=main.8f195648.chunk.js.map