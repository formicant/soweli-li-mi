{"version":3,"sources":["insa/lon.ts","insa/lonIjo.ts","insa/lonPali.ts","insa/kepeken.ts","insa/nimiAli.ts","insa/toki.ts","insa/pilinToki.ts","insa/tawa.ts","insa/musi.ts","kipisiENimi.ts","iloPalisa.tsx","lukinIjo.ts","jasima.ts","leko.tsx","ma.tsx","insa/lipuMa.ts","insa/ijo.ts","lukinMusi.tsx","sijelo.tsx","reportWebVitals.ts","index.tsx"],"names":["lonAla","x","NaN","y","Lon","this","nasin","Error","suliMa","Im","Record","paliELonIjo","lipuIjo","groupBy","ijo","lon","toMap","paliELonPali","lonIjo","nasinMusi","Map","mapEntries","ijoMute","map","nanpa","ijoAntePiLonSama","get","filterNot","_","nanpaNi","toSet","nimiPiIjoSitelenAntePiLonSama","toSeq","filter","ni","liSitelen","nimi","nasinLiLon","semeLiLon","seme","contains","liNimi","lonSemeLiLon","lonSeme","some","isEmpty","intersect","Seq","flatMap","liSeme","panaEPali","panaENanpaTanPali","lukin","pali","undefined","paliMute","keySeq","Set","of","monsiEKulupu","kulupu","tawaMute","tan","tawa","nimiInsaKulupu","toki","kulupuPiNimiAli","nimiAli","toArray","panaEKulupuNimi","panaELinja","suli","anteEPokaESewi","ante","suliAnte","Range","ijoENanpa","lonToki","index","rowBegin","columnBegin","rowEnd","columnEnd","panaELonToki","nimiWan","entrySeq","first","nanpaIjo","kind","text","pos","next","paliEToki","update","panaELinjaToki","tokiMute","linjaEPalisaToki","toStack","palisaToki","size","peek","pop","pilinMute","pilinInsa","pilinJaki","rep","alt","tok","pilinIjo","pilinKulupu","pilinPali","pilinLi","str","pilinEn","pilinLon","pilinSeme","apply","seq","lawa","sijelo","concat","insa","mute","pilinLeko","union","pilinPiNasinMusi","leko","li","pilin","kmid","panaENasinMusiAli","panaETokiAli","linja","expectEOF","parse","successful","candidates","ken","result","cacheResult","wekaENasinMusiInsa","nasinMute","nasinNi","nasinAnte","isSubset","tawaAla","lonPali","lukinWawa","Tawa","tawaOpen","ijoAli","toKeyedSeq","valueSeq","panaEKulupuTawa","lukinEKulupuTawa","lukinNi","lonSin","lukinSin","liInsaMa","lukinTawa","Keyed","kipisiPiNimiAli","musiAla","nimiMa","tenpo","List","tenpoNi","Musi","ali","merge","tawaNi","kulupuTawaSin","lipuIjoSin","lonIjoSin","lonPaliSin","ijoAnte","panaEIjoAnte","lipuIjoAnte","lonIjoAnte","nasinMusiAnte","lonPaliAnte","equals","tawaSin","tenpoSin","take","push","anteMute","palisaPiNimiPalisa","IloPalisa","render","lukaPalisa","palisa","code","props","palisaLa","window","addEventListener","removeEventListener","Component","lukinPiKulupuNimi","kule","lukinPiIjoAli","soweli","anteTawa","waso","kala","akesi","pipi","jan","mije","meli","tomo","ma","kiwen","telo","ko","kili","kasi","pan","sike","lipu","nena","lupa","poki","supa","ilo","len","mani","jaki","suno","mun","olin","luka","noka","uta","kute","oko","pu","kipisiENimi","lonSitelen","document","createElement","getContext","paliELinja","nimiLili","suliPokaAli","suliPoka","Math","round","measureText","width","length","nanpaSuliPiLinjaWan","meso","substring","nanpaSuliPiLinjaTu","minBy","wan","tu","abs","font","kipisi","paliEKipisiPiNimiAli","panaEJasima","jasimaMajuna","lonMajuna","nanpaNasin","namakoLawa","nanpaMajuna","jasima","alasaNanpaPiJasimaSike","exec","parseFloat","panaENanpaPiJasimaSike","floor","Leko","lukinNimi","kulupuLukin","classNames","ijoMajuna","sin","ona","useRef","useEffect","current","useMajuna","useState","sinEJasima","left","top","transform","color","className","style","nanpaLinja","fontVariationSettings","KulupuToki","Ma","lekoAli","nanpaTaso","toIndexedSeq","height","ijoAla","Ijo","includes","mamaToki","buildLexer","Nimi","Sitelen","Namako","Kon","Insa","nimiNimi","nimiSitelen","panaENimi","toLowerCase","nimiOpen","startsWith","join","pilinPiIjoNimi","pilinPiIjoSitelen","pilinKon","pilinPiLinjaNamako","pilinLinja","expectSingleResult","LukinMusi","jo","paliPalisa","setState","musi","state","tenpoMonsi","tenpoSinpin","lipuMa","namakoAli","namako","flat","pilinPiIjoNamako","pilinPiLinjaMa","suliLinja","toList","skip","pilinELipuMa","lipuMaAli","Sijelo","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","getElementById"],"mappings":"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","file":"static/js/main.148153a8.chunk.js","sourcesContent":["import Im from 'immutable';\r\n\r\nexport type NasinTawa = 'sewi' | 'anpa' | 'soto' | 'teje';\r\n\r\ninterface ILon\r\n{\r\n  readonly x: number,\r\n  readonly y: number;\r\n}\r\nconst lonAla: ILon = { x: NaN, y: NaN };\r\n\r\nexport class Lon extends Im.Record<ILon>(lonAla) implements ILon\r\n{\r\n  constructor(x: number, y: number)\r\n  {\r\n    super({ x: x, y: y });\r\n  }\r\n  \r\n  anteEPokaESewi() { return new Lon(this.y, this.x); }\r\n  \r\n  tawa(nasin: NasinTawa)\r\n  {\r\n    switch(nasin)\r\n    {\r\n      case 'sewi': return new Lon(this.x, this.y - 1);\r\n      case 'anpa': return new Lon(this.x, this.y + 1);\r\n      case 'soto': return new Lon(this.x - 1, this.y);\r\n      case 'teje': return new Lon(this.x + 1, this.y);\r\n      default: throw new Error('nasin li ike!');\r\n    }\r\n  }\r\n\r\n  liInsaMa(suliMa: Lon)\r\n  {\r\n    return (\r\n      this.x >= 0 && this.x < suliMa.x &&\r\n      this.y >= 0 && this.y < suliMa.y\r\n    );\r\n  }\r\n}\r\n","import Im from 'immutable';\r\nimport { Lon } from './lon';\r\nimport { Ijo,  LipuIjo } from './ijo';\r\n\r\nexport type LonIjo = Im.Map<Lon, Im.Collection<number, Ijo>>;\r\n\r\nexport function paliELonIjo(lipuIjo: LipuIjo): LonIjo\r\n{\r\n  return lipuIjo\r\n    .groupBy(ijo => ijo.lon)\r\n    .toMap();\r\n}\r\n","import Im from 'immutable';\r\nimport { Lon } from './lon';\r\nimport { Ijo } from './ijo';\r\nimport { NimiIjo, NimiPali } from './nimiAli';\r\nimport { LiSeme, NasinMusi } from './nasinMusi';\r\nimport { LonIjo } from './lonIjo';\r\n\r\nexport type LonPali = Im.Map<Lon, Im.Collection<number, Im.Set<LiSeme>>>;\r\n\r\nexport function paliELonPali(lonIjo: LonIjo, nasinMusi: readonly NasinMusi[]): LonPali\r\n{\r\n  // O PALI: nasin musi pi lukin ‘kon li ...’!\r\n  \r\n  return Im.Map(\r\n    lonIjo.mapEntries(([lon, ijoMute]) =>\r\n      [lon, ijoMute.map((ijo, nanpa) => panaEPali(lon, ijo, nanpa, lonIjo, nasinMusi))])\r\n  );\r\n}\r\n\r\nexport function panaENanpaTanPali(lukin: Im.Collection<number, Im.Set<LiSeme>> | undefined, pali: NimiPali)\r\n{\r\n  if(lukin !== undefined)\r\n    return lukin.filter(paliMute => paliMute.contains(pali)).keySeq().toSet();\r\n  else\r\n    return Im.Set.of<number>();\r\n}\r\n\r\nfunction panaEPali(lon: Lon, ijo: Ijo, nanpa: number, lonIjo: LonIjo, nasinMusi: readonly NasinMusi[])\r\n{\r\n  const ijoAntePiLonSama = lonIjo\r\n    .get(lon)!\r\n    .filterNot((_, nanpaNi) => nanpaNi === nanpa)\r\n    .toSet();\r\n  const nimiPiIjoSitelenAntePiLonSama = ijoAntePiLonSama\r\n    .toSeq()\r\n    .filter(ni => ni.liSitelen())\r\n    .map(ni => ni.nimi as NimiIjo)\r\n    .toSet();\r\n  \r\n  function nasinLiLon(nasin: NasinMusi)\r\n  {\r\n    const semeLiLon =\r\n      nasin.seme.contains('ali') ||\r\n      (ijo.liNimi() && nasin.seme.contains('nimi')) ||\r\n      (ijo.liSitelen() && nasin.seme.contains(ijo.nimi));\r\n    \r\n    const lonSemeLiLon =\r\n      nasin.lonSeme.contains('ali') ||\r\n      (nasin.lonSeme.contains('nimi') && ijoAntePiLonSama.some(ni => ni.liNimi())) ||\r\n      (nasin.lonSeme.contains('kon') && ijoAntePiLonSama.isEmpty()) ||\r\n      !nasin.lonSeme.intersect(nimiPiIjoSitelenAntePiLonSama).isEmpty();\r\n    \r\n    return semeLiLon && lonSemeLiLon;\r\n  }\r\n  \r\n  const paliMute = Im.Seq(nasinMusi)\r\n    .filter(nasinLiLon)\r\n    .flatMap(nasin => nasin.liSeme)\r\n    .toSet();\r\n  return paliMute;\r\n}\r\n","import Im from \"immutable\";\r\n\r\nexport function monsiEKulupu<TTan extends string, TTawa>(kulupu: { [tan in TTan]: readonly TTawa[] })\r\n{\r\n  return Im.Seq(kulupu)\r\n    .flatMap((tawaMute, tan) => Im.Seq(tawaMute as TTawa[]).map(tawa => [tawa, tan as TTan]))\r\n    .toMap();\r\n  // o pona e ni!\r\n}\r\n","import { monsiEKulupu } from \"./kepeken\";\r\n\r\nexport type KulupuNimi = 'toki' | 'kulupu' | 'ijo' | 'pali';\r\n\r\nexport const nimiInsaKulupu =\r\n{\r\n  toki:\r\n  [\r\n    'li',\r\n    'e',\r\n    'en',\r\n    'ala',\r\n    'lon',\r\n  ],\r\n  kulupu:\r\n  [\r\n    'ali',\r\n    'nimi',\r\n    'sitelen',\r\n    'kon',\r\n  ],\r\n  pali:\r\n  [\r\n    'mi',\r\n    'pini',\r\n    'moli',\r\n    'awen',\r\n    'weka',\r\n    'tawa',\r\n    'sewi',\r\n    'anpa',\r\n  ],\r\n  ijo:\r\n  [\r\n    'soweli',\r\n    'waso',\r\n    'kala',\r\n    'akesi',\r\n    'pipi',\r\n    'jan',\r\n    'mije',\r\n    'meli',\r\n    'tomo',\r\n    'ma',\r\n    'kiwen',\r\n    'telo',\r\n    'ko',\r\n    'kili',\r\n    'kasi',\r\n    'pan',\r\n    'sike',\r\n    'lipu',\r\n    'nena',\r\n    'lupa',\r\n    'poki',\r\n    'supa',\r\n    'palisa',\r\n    'ilo',\r\n    'len',\r\n    'mani',\r\n    'linja',\r\n    'jaki',\r\n    'suno',\r\n    'mun',\r\n    'pilin',\r\n    'olin',\r\n    'tenpo',\r\n    'sijelo',\r\n    'lawa',\r\n    'luka',\r\n    'noka',\r\n    'uta',\r\n    'kute',\r\n    'oko',\r\n    'pu',\r\n  ]\r\n} as const;\r\n\r\nconst kulupuPiNimiAli = monsiEKulupu(nimiInsaKulupu);\r\n\r\nexport const nimiAli = kulupuPiNimiAli.keySeq().toArray();\r\n\r\nexport type NimiToki   = typeof nimiInsaKulupu.toki  [number];\r\nexport type NimiKulupu = typeof nimiInsaKulupu.kulupu[number];\r\nexport type NimiIjo    = typeof nimiInsaKulupu.ijo   [number];\r\nexport type NimiPali   = typeof nimiInsaKulupu.pali  [number];\r\n\r\nexport type Nimi = NimiToki | NimiKulupu | NimiIjo | NimiPali;\r\n\r\nexport function liInsaKulupu(nimi: Nimi, kulupu: 'toki'  ): nimi is NimiToki\r\nexport function liInsaKulupu(nimi: Nimi, kulupu: 'kulupu'): nimi is NimiKulupu\r\nexport function liInsaKulupu(nimi: Nimi, kulupu: 'ijo'   ): nimi is NimiIjo\r\nexport function liInsaKulupu(nimi: Nimi, kulupu: 'pali'  ): nimi is NimiPali\r\nexport function liInsaKulupu(nimi: Nimi, kulupu: KulupuNimi)\r\n{\r\n  return (nimiInsaKulupu[kulupu] as readonly Nimi[]).includes(nimi);\r\n}\r\n\r\nexport function panaEKulupuNimi(nimi: Nimi)\r\n{\r\n  return kulupuPiNimiAli.get(nimi) as KulupuNimi;\r\n}\r\n","import Im from 'immutable';\r\nimport { Token, TokenPosition } from 'typescript-parsec';\r\nimport { KulupuNimi, panaEKulupuNimi } from './nimiAli';\r\nimport { Lon } from './lon';\r\nimport { LonIjo } from './lonIjo';\r\nimport { Ijo } from './ijo';\r\n\r\ntype KulupuToki = KulupuNimi | 'ala';\r\n\r\nexport interface Toki extends Token<KulupuToki>\r\n{\r\n  nanpaIjo?: number;\r\n}\r\n\r\nexport function panaETokiAli(suli: Lon, lonIjo: LonIjo)\r\n{\r\n  return panaELinja(suli, lonIjo, false)\r\n    .concat(panaELinja(suli, lonIjo, true));\r\n}\r\n\r\nfunction panaELinja(suli: Lon, lonIjo: LonIjo, anteEPokaESewi: boolean)\r\n{\r\n  const ante = anteEPokaESewi\r\n    ? (lon: Lon) => lon.anteEPokaESewi()\r\n    : (lon: Lon) => lon;\r\n  const suliAnte = ante(suli);\r\n  \r\n  return Im.Range(0, suliAnte.y).map(y =>\r\n    Im.Range(0, suliAnte.x)\r\n      .map(x => paliEToki(x, lonIjo.get(ante(new Lon(x, y)))))\r\n      .update(panaELinjaToki));\r\n}\r\n\r\nfunction panaELinjaToki(tokiMute: Im.Seq.Indexed<Toki>)\r\n{\r\n  const palisaToki = tokiMute.toStack();\r\n  return linjaEPalisaToki(palisaToki);\r\n}\r\n\r\nfunction linjaEPalisaToki(palisaToki: Im.Stack<Toki>): Toki\r\n{\r\n  if(palisaToki.size > 1)\r\n    return {\r\n      ...palisaToki.peek()!,\r\n      next: linjaEPalisaToki(palisaToki.pop())\r\n    };\r\n  else if(palisaToki.size === 1)\r\n    return palisaToki.peek()!;\r\n  else\r\n    throw Error('palisa toki li jo e ala!');\r\n}\r\n\r\nfunction paliEToki(x: number, ijoENanpa: Im.Collection<number, Ijo> | undefined): Toki\r\n{\r\n  const lonToki = panaELonToki(x);\r\n  if(ijoENanpa !== undefined)\r\n  {\r\n    const nimiWan = ijoENanpa.filterNot(ijo => ijo.liSitelen()).entrySeq().first();\r\n    // O PALI: lon wan li ken jo e nimi mute. o pali pana e ken ali!\r\n    if(nimiWan !== undefined)\r\n    {\r\n      const [nanpa, ijo] = nimiWan;\r\n      const nimi = ijo.nimi;\r\n      const kulupu = panaEKulupuNimi(nimi);\r\n      return {\r\n        nanpaIjo: nanpa,\r\n        kind: kulupu,\r\n        text: nimi,\r\n        pos: lonToki,\r\n        next: undefined,\r\n      };\r\n    }\r\n  }\r\n  \r\n  return {\r\n    kind: 'ala',\r\n    text: '',\r\n    pos: lonToki,\r\n    next: undefined,\r\n  };\r\n}\r\n\r\nfunction panaELonToki(x: number): TokenPosition\r\n{\r\n  return {\r\n    index: x,\r\n    rowBegin: 1,\r\n    columnBegin: x + 1,\r\n    rowEnd: 1,\r\n    columnEnd: x + 2,\r\n  };\r\n}\r\n","import Im from 'immutable';\r\nimport { apply, expectEOF, str, tok, seq, rep, alt, kmid, Parser } from 'typescript-parsec';\r\nimport { LonIjo } from './lonIjo';\r\nimport { Lon } from './lon';\r\nimport { panaETokiAli, Toki } from './toki';\r\nimport { Seme, LiSeme, NasinMusi } from './nasinMusi';\r\n\r\nconst pilinJaki = rep(alt(tok('ala'), tok('ijo'), tok('kulupu'), tok('toki'), tok('pali')));\r\n\r\nconst pilinIjo    = tok('ijo'    as const);\r\nconst pilinKulupu = tok('kulupu' as const);\r\nconst pilinPali   = tok('pali'   as const);\r\n\r\nconst pilinLi  = str<'toki'>('li');\r\nconst pilinEn  = str<'toki'>('en');\r\nconst pilinLon = str<'toki'>('lon');\r\n//const pilinAla = str<'toki'>('ala');\r\n\r\nconst pilinSeme = apply(\r\n  muteEnInsa(alt(pilinIjo, pilinKulupu), pilinEn),\r\n  ([mute, insa]) =>\r\n  ({\r\n    seme: Im.Seq(mute).map(ni => ni.text as Seme).toSet(),\r\n    nanpaIjo: Im.Seq(mute).map((ni: Toki) => ni.nanpaIjo!)\r\n      .concat(Im.Seq(insa).map((ni: Toki) => ni.nanpaIjo!))\r\n      .toSet()\r\n  } as const)\r\n);\r\n\r\nconst pilinLeko = alt(\r\n  apply(\r\n    pilinSeme,\r\n    ({ nanpaIjo, seme }) =>\r\n    ({\r\n      seme: seme,\r\n      lonSeme: Im.Set.of('ali' as Seme),\r\n      nanpaIjo: nanpaIjo\r\n    })\r\n  ),\r\n  apply(\r\n    seq(pilinSeme, pilinLon, pilinSeme),\r\n    ([seme, lon, lonSeme]) =>\r\n    ({\r\n      seme: seme.seme,\r\n      lonSeme: lonSeme.seme,\r\n      nanpaIjo: Im.Set.of((lon as Toki).nanpaIjo!).union(seme.nanpaIjo, lonSeme.nanpaIjo)\r\n    })\r\n  )\r\n);\r\n\r\nconst pilinPiNasinMusi = apply(\r\n  seq(pilinLeko, pilinLi, alt(pilinPali, pilinIjo)),\r\n  ([leko, li, liSeme]) =>\r\n  ({\r\n    seme: leko.seme,\r\n    lonSeme: leko.lonSeme,\r\n    liSeme: Im.Set.of(liSeme.text as LiSeme),\r\n    nanpaIjo: Im.Set.of((li as Toki).nanpaIjo!, (liSeme as Toki).nanpaIjo!).union(leko.nanpaIjo)\r\n  } as NasinMusi)\r\n);\r\n\r\nconst pilin = kmid(pilinJaki, pilinPiNasinMusi, pilinJaki);\r\n\r\nexport function panaENasinMusiAli(suli: Lon, lonIjo: LonIjo): readonly NasinMusi[]\r\n{\r\n  const tokiAli = panaETokiAli(suli, lonIjo);\r\n  const nasinAli = tokiAli\r\n    .map(linja => expectEOF(pilin.parse(linja)))\r\n    .filter(linja => linja.successful)\r\n    .flatMap(linja => linja.successful\r\n      ? Im.Seq(linja.candidates).map(ken => ken.result).cacheResult().update(wekaENasinMusiInsa)\r\n      : undefined as never)\r\n    .toArray();\r\n  \r\n  return nasinAli;\r\n}\r\n\r\nfunction wekaENasinMusiInsa(nasinMute: Im.Seq.Indexed<NasinMusi>)\r\n{\r\n  return nasinMute\r\n    .filterNot(nasinNi =>\r\n      nasinMute.some(nasinAnte =>\r\n        nasinAnte !== nasinNi && nasinNi.nanpaIjo.isSubset(nasinAnte.nanpaIjo)));\r\n}\r\n\r\nfunction muteEnInsa<TKulupu, TMute, TInsa>(\r\n  pilinMute: Parser<TKulupu, TMute>,\r\n  pilinInsa: Parser<TKulupu, TInsa>\r\n): Parser<TKulupu, [TMute[], TInsa[]]>\r\n{\r\n  return apply(\r\n    seq(pilinMute, rep(seq(pilinInsa, pilinMute))),\r\n    ([lawa, sijelo]) =>\r\n    [\r\n      [lawa].concat(sijelo.map(([insa, mute]) => mute)),\r\n      sijelo.map(([insa, mute]) => insa)\r\n    ]\r\n  );\r\n}\r\n","import Im from 'immutable';\r\nimport { Ijo, LipuIjo } from './ijo';\r\nimport { Lon, NasinTawa } from './lon';\r\nimport { paliELonIjo } from './lonIjo';\r\nimport { LonPali, paliELonPali, panaENanpaTanPali } from './lonPali';\r\nimport { panaENasinMusiAli } from './pilinToki';\r\n\r\ninterface ITawa\r\n{\r\n  readonly nasin?: NasinTawa;\r\n  readonly lipuIjo: LipuIjo;\r\n  readonly lonPali: LonPali;\r\n  readonly lukinWawa: Im.Set<number>;\r\n}\r\nconst tawaAla: ITawa = { lipuIjo: Im.Map<number, Ijo>(), lonPali: Im.Map<Lon, any>(), lukinWawa: Im.Set() };\r\n\r\nexport class Tawa extends Im.Record<ITawa>(tawaAla) implements Tawa\r\n{\r\n  constructor(tawa: ITawa)\r\n  {\r\n    super(tawa);\r\n  }\r\n}\r\n\r\nexport function tawaOpen(suliMa: Lon, ijoAli: readonly Ijo[]): Tawa\r\n{\r\n  const lipuIjo = Im.Map(Im.Seq(ijoAli).toKeyedSeq());\r\n  \r\n  const lonIjo = paliELonIjo(lipuIjo);\r\n  const nasinMusi = panaENasinMusiAli(suliMa, lonIjo);\r\n  const lonPali = paliELonPali(lonIjo, nasinMusi);\r\n  \r\n  const lukinWawa = Im.Seq(nasinMusi).flatMap(nasin => nasin.nanpaIjo)\r\n    .concat(lonPali.valueSeq().flatMap(mute => mute.filter((pali, nanpa) => lipuIjo.get(nanpa)!.liSitelen() && !pali.isEmpty()).keySeq()))\r\n    .toSet();\r\n  \r\n  return new Tawa({\r\n    lipuIjo: lipuIjo,\r\n    lonPali: lonPali,\r\n    lukinWawa: lukinWawa,\r\n  });\r\n}\r\n\r\n\r\nexport function panaEKulupuTawa(suliMa: Lon, lonPali: LonPali, nasin: NasinTawa)\r\n{\r\n  const miMute = Im.Seq.Keyed(\r\n    lonPali.entrySeq().flatMap(([lon, mute]) =>\r\n      mute\r\n        .filter(pali => pali.contains('mi'))\r\n        .toKeyedSeq()\r\n        .mapEntries(([nanpa, _]) => [nanpa, lon]))\r\n  );\r\n\r\n  function lukinEKulupuTawa(nanpa: number, lon: Lon): Im.Set<number>\r\n  {\r\n    const lukinNi = lonPali.get(lon);\r\n    const lonSin = lon.tawa(nasin);\r\n    const lukinSin = lonPali.get(lonSin);\r\n    const ken =\r\n      lonSin.liInsaMa(suliMa) &&\r\n      panaENanpaTanPali(lukinNi, 'awen').isEmpty() &&\r\n      panaENanpaTanPali(lukinSin, 'awen').isEmpty();\r\n    \r\n    if(ken)\r\n    {\r\n      const tawa = panaENanpaTanPali(lukinSin, 'tawa')\r\n        .union(panaENanpaTanPali(lukinSin, 'mi'));\r\n      const lukinTawa = tawa.toSeq().map(ni => lukinEKulupuTawa(ni, lonSin));\r\n      if(lukinTawa.some(ni => ni.isEmpty()))\r\n        return Im.Set.of<number>();\r\n      else\r\n        return Im.Set.of(nanpa).union(...lukinTawa);\r\n    }\r\n    else\r\n      return Im.Set.of<number>();\r\n  }\r\n  \r\n  const kulupuTawaAli = miMute\r\n    .map((lon, nanpa) => lukinEKulupuTawa(nanpa, lon))\r\n    .valueSeq().flatMap(ni => ni)\r\n    .toSet();\r\n  \r\n  return kulupuTawaAli;\r\n}\r\n","import Im from \"immutable\";\r\nimport { Ijo, LipuIjo } from \"./ijo\";\r\nimport { Lon, NasinTawa } from \"./lon\";\r\nimport { paliELonIjo } from \"./lonIjo\";\r\nimport { LonPali, paliELonPali } from \"./lonPali\";\r\nimport { NimiIjo, panaEKulupuNimi } from \"./nimiAli\";\r\nimport { panaENasinMusiAli } from \"./pilinToki\";\r\nimport { Tawa, tawaOpen, panaEKulupuTawa } from \"./tawa\";\r\n\r\ninterface IMusi\r\n{\r\n  readonly nimiMa: string;\r\n  readonly suliMa: Lon;\r\n  readonly tenpo: Im.List<Tawa>;\r\n  readonly tenpoNi: number;\r\n}\r\nconst musiAla: IMusi = { nimiMa: '', suliMa: new Lon(NaN, NaN), tenpo: Im.List(), tenpoNi: NaN };\r\n\r\nexport class Musi extends Im.Record<IMusi>(musiAla) implements IMusi\r\n{\r\n  constructor(nimiMa: string, suliMa: Lon, ijoAli: readonly Ijo[])\r\n  {\r\n    super({\r\n      nimiMa: nimiMa,\r\n      suliMa: suliMa,\r\n      tenpo: Im.List.of(tawaOpen(suliMa, ijoAli)),\r\n      tenpoNi: 0,\r\n    });\r\n  }\r\n\r\n  get tawaNi()\r\n  {\r\n    const ni = this.tenpo.get(this.tenpoNi);\r\n    if(ni) return ni;\r\n    else throw Error('tenpo ni li ike!');\r\n  }\r\n  \r\n  tenpoMonsi(ali: boolean = false): Musi\r\n  {\r\n    if(this.tenpoNi > 0)\r\n      return this.merge({ tenpoNi: ali ? 0 : this.tenpoNi - 1 });\r\n    else\r\n      return this;\r\n  }\r\n\r\n  tenpoSinpin(ali: boolean = false): Musi\r\n  {\r\n    if(this.tenpoNi < this.tenpo.size - 1)\r\n      return this.merge({ tenpoNi: ali ? this.tenpo.size - 1 : this.tenpoNi + 1 });\r\n    else\r\n      return this;\r\n  }\r\n\r\n  tawa(nasin: NasinTawa): Musi\r\n  {\r\n    const lipuIjo = this.tawaNi.lipuIjo;\r\n    const lonPali = this.tawaNi.lonPali;\r\n    \r\n    const kulupuTawa = panaEKulupuTawa(this.suliMa, lonPali, nasin)\r\n      .toKeyedSeq()\r\n      .mapEntries(([_, nanpa]) => [nanpa, lipuIjo.get(nanpa)!]);\r\n    \r\n    const kulupuTawaSin = kulupuTawa.map(ijo => ijo.tawa(nasin));\r\n    const lipuIjoSin = lipuIjo.merge(kulupuTawaSin);\r\n    \r\n    const lonIjoSin = paliELonIjo(lipuIjoSin);\r\n    const nasinMusiSin = panaENasinMusiAli(this.suliMa, lonIjoSin);\r\n    const lonPaliSin = paliELonPali(lonIjoSin, nasinMusiSin);\r\n    const ijoAnte = this.panaEIjoAnte(lonPaliSin, lipuIjoSin);\r\n    \r\n    const lipuIjoAnte = lipuIjoSin.merge(ijoAnte);\r\n    \r\n    const lonIjoAnte = paliELonIjo(lipuIjoAnte);\r\n    const nasinMusiAnte = panaENasinMusiAli(this.suliMa, lonIjoAnte);\r\n    const lonPaliAnte = paliELonPali(lonIjoAnte, nasinMusiAnte);\r\n    \r\n    // O PALI: ken ante e ijo wan tawa ijo mute!\r\n    const lukinWawa = Im.Seq(nasinMusiAnte).flatMap(nasin => nasin.nanpaIjo)\r\n      .concat(lonPaliAnte.valueSeq().flatMap(mute => mute.filter((pali, nanpa) => lipuIjoAnte.get(nanpa)!.liSitelen() && !pali.isEmpty()).keySeq()))\r\n      .toSet();\r\n    \r\n    if(lipuIjoAnte.equals(lipuIjo))\r\n      return this\r\n    else\r\n    {\r\n      const tawaSin: Tawa = new Tawa({ nasin: nasin, lipuIjo: lipuIjoAnte, lonPali: lonPaliAnte, lukinWawa: lukinWawa });\r\n      const tenpoSin = this.tenpo.take(this.tenpoNi + 1).push(tawaSin);\r\n      \r\n      return this.merge({ tenpo: tenpoSin, tenpoNi: this.tenpoNi + 1 });\r\n    }\r\n  }\r\n\r\n  private panaEIjoAnte(lonPali: LonPali, lipuIjo: LipuIjo)\r\n  {\r\n    return Im.Seq.Keyed(\r\n      lonPali.entrySeq().flatMap(([_, mute]) =>\r\n        mute\r\n          .map(paliMute => paliMute.filter(pali => panaEKulupuNimi(pali) === 'ijo') as Im.Set<NimiIjo>)\r\n          .filterNot(paliMute => paliMute.isEmpty())\r\n          .toKeyedSeq()\r\n      )\r\n    ).map((anteMute, nanpa) => lipuIjo.get(nanpa)!.merge({ kulupu: 'sitelen', nimi: anteMute.first()! }));\r\n  }\r\n}\r\n\r\n","import Im from 'immutable' ;\r\nimport { Nimi, nimiAli } from './insa/nimiAli';\r\n\r\ninterface LinjaNimi\r\n{\r\n  readonly nimiLili: string;\r\n  readonly suliPoka: number;\r\n}\r\n\r\nexport function kipisiENimi(nimi: Nimi): ReadonlyArray<LinjaNimi>\r\n{\r\n  if(!kipisiPiNimiAli)\r\n    kipisiPiNimiAli = paliEKipisiPiNimiAli();\r\n  \r\n  return kipisiPiNimiAli[nimi];\r\n}\r\n\r\ntype KipisiPiNimiAli = { [nimi in Nimi]: ReadonlyArray<LinjaNimi> };\r\nlet kipisiPiNimiAli: KipisiPiNimiAli | undefined;\r\n\r\nfunction paliEKipisiPiNimiAli(): KipisiPiNimiAli\r\n{\r\n  const lipuSitelen = document.createElement('canvas');\r\n  const lonSitelen = lipuSitelen.getContext('2d')!;\r\n  lonSitelen.font = 'normal 100px truculenta-variable';\r\n  \r\n  function paliELinja(nimiLili: string, suliPokaAli: number): LinjaNimi\r\n  {\r\n    const suliPoka = Math.round(suliPokaAli / lonSitelen.measureText(nimiLili).width);\r\n    return { nimiLili: nimiLili, suliPoka: suliPoka };\r\n  }\r\n  \r\n  function kipisiENimi(nimi: string): ReadonlyArray<LinjaNimi>\r\n  {\r\n    if(nimi.length < 4)\r\n      return [paliELinja(nimi, nanpaSuliPiLinjaWan)];\r\n    else\r\n    {\r\n      const kenKipisi = Im.Range(2, nimi.length - 1)\r\n        .map(meso => [\r\n          paliELinja(nimi.substring(0, meso), nanpaSuliPiLinjaTu),\r\n          paliELinja(nimi.substring(meso), nanpaSuliPiLinjaTu),\r\n        ]);\r\n      return kenKipisi\r\n        .minBy(([wan, tu]) => Math.abs(wan.suliPoka - tu.suliPoka)) ?? [];\r\n    }\r\n  }\r\n  \r\n  const kipisi: { [nimi: string]: ReadonlyArray<LinjaNimi> } = { };\r\n  for(const nimi of nimiAli)\r\n    kipisi[nimi] = kipisiENimi(nimi);\r\n  \r\n  return kipisi as KipisiPiNimiAli;\r\n}\r\n\r\nconst nanpaSuliPiLinjaWan = 8000;\r\nconst nanpaSuliPiLinjaTu = 10240;\r\n","import { Component } from 'react';\r\nimport { monsiEKulupu } from \"./insa/kepeken\";\r\nimport { NasinTawa } from \"./insa/lon\";\r\n\r\ntype TawaTenpo = 'monsi' | 'sinpin' | 'open' | 'pini';\r\nexport type Palisa = NasinTawa | TawaTenpo;\r\n\r\nconst palisaAli: { [palisa in Palisa]: ReadonlyArray<string> } =\r\n{\r\n  'sewi':   ['KeyW', 'ArrowUp'],\r\n  'anpa':   ['KeyS', 'ArrowDown'],\r\n  'soto':   ['KeyA', 'ArrowLeft'],\r\n  'teje':   ['KeyD', 'ArrowRight'],\r\n  \r\n  'monsi':  ['KeyZ', 'Backspace'],\r\n  'sinpin': ['KeyX', 'Space'],\r\n  'open':   ['KeyR', 'Home'],\r\n  'pini':   ['KeyT', 'End'],\r\n} as const;\r\n\r\nconst palisaPiNimiPalisa = monsiEKulupu(palisaAli);\r\n\r\nexport interface JoPiIloPalisa\r\n{\r\n  palisaLa(palisa: Palisa): void;\r\n}\r\n\r\nexport class IloPalisa extends Component<JoPiIloPalisa>\r\n{\r\n  render = () => null;\r\n  \r\n  componentDidMount()\r\n  {\r\n    window.addEventListener('keydown', this.lukaPalisa);\r\n  }\r\n  \r\n  componentWillUnmount()\r\n  {\r\n    window.removeEventListener('keydown', this.lukaPalisa);\r\n  }\r\n  \r\n  private lukaPalisa = (pali: KeyboardEvent) =>\r\n  {\r\n    const palisa = palisaPiNimiPalisa.get(pali.code);\r\n    if(palisa)\r\n      this.props.palisaLa(palisa);\r\n  }\r\n}\r\n","import { KulupuNimi, NimiIjo } from './insa/nimiAli';\r\nimport { Kule } from './kule';\r\n\r\nexport type AnteTawa = 'poka' | 'sikePoka' | 'sikeSewi';\r\n\r\nexport interface LukinIjo\r\n{\r\n  readonly kule: Kule;\r\n  readonly anteTawa?: AnteTawa;\r\n}\r\n\r\nexport const lukinPiKulupuNimi: { [kulupu in KulupuNimi]: LukinIjo } =\r\n{\r\n  ijo:    { kule: '#26a' },\r\n  toki:   { kule: '#555' },\r\n  kulupu: { kule: '#682' },\r\n  pali:   { kule: '#b52' },\r\n} as const;\r\n\r\nexport const lukinPiIjoAli: { [nimi in NimiIjo]: LukinIjo } =\r\n{\r\n  soweli: { kule: '#444', anteTawa: 'poka' },\r\n  waso:   { kule: '#678', anteTawa: 'poka' },\r\n  kala:   { kule: '#d80', anteTawa: 'sikePoka' },\r\n  akesi:  { kule: '#294', anteTawa: 'sikeSewi' },\r\n  pipi:   { kule: '#850', anteTawa: 'sikeSewi' },\r\n  jan:    { kule: '#c86' },\r\n  mije:   { kule: '#04c' },\r\n  meli:   { kule: '#c08' },\r\n  tomo:   { kule: '#c60' },\r\n  ma:     { kule: '#666' },\r\n  kiwen:  { kule: '#478' },\r\n  telo:   { kule: '#09b' },\r\n  ko:     { kule: '#884', anteTawa: 'sikeSewi' },\r\n  kili:   { kule: '#b10' },\r\n  kasi:   { kule: '#2a4' },\r\n  pan:    { kule: '#890' },\r\n  sike:   { kule: '#60a' },\r\n  lipu:   { kule: '#0aa' },\r\n  nena:   { kule: '#750' },\r\n  lupa:   { kule: '#750' },\r\n  poki:   { kule: '#a90' },\r\n  supa:   { kule: '#b80' },\r\n  palisa: { kule: '#490', anteTawa: 'sikeSewi' },\r\n  ilo:    { kule: '#488' },\r\n  len:    { kule: '#a94' },\r\n  mani:   { kule: '#c90' },\r\n  linja:  { kule: '#d00', anteTawa: 'poka' },\r\n  jaki:   { kule: '#543', anteTawa: 'sikePoka' },\r\n  suno:   { kule: '#c80', anteTawa: 'sikeSewi' },\r\n  mun:    { kule: '#07d', anteTawa: 'sikePoka' },\r\n  pilin:  { kule: '#e02' },\r\n  olin:   { kule: '#e05' },\r\n  tenpo:  { kule: '#555', anteTawa: 'sikeSewi' },\r\n  sijelo: { kule: '#a85' },\r\n  lawa:   { kule: '#d60', anteTawa: 'poka' },\r\n  luka:   { kule: '#a85', anteTawa: 'sikeSewi' },\r\n  noka:   { kule: '#830', anteTawa: 'poka' },\r\n  uta:    { kule: '#d42' },\r\n  kute:   { kule: '#a85', anteTawa: 'poka' },\r\n  oko:    { kule: '#24d', anteTawa: 'sikePoka' },\r\n  pu:     { kule: '#109' },\r\n} as const;\r\n","import { Lon } from './insa/lon';\r\nimport { AnteTawa } from './lukinIjo'\r\n\r\nexport type Jasima = 'none' | `scaleX(${-1 | 1})` | `rotate(${number}turn)`;\r\n\r\nexport function panaEJasima(jasimaMajuna: Jasima, lonMajuna: Lon | undefined, lonSin: Lon, anteTawa?: AnteTawa): Jasima\r\n{\r\n  if(lonMajuna && (anteTawa === 'sikePoka' || anteTawa === 'sikeSewi'))\r\n  {\r\n    const nanpaNasin =\r\n      lonSin.x > lonMajuna.x ? 0 :\r\n      lonSin.y > lonMajuna.y ? 0.25 :\r\n      lonSin.x < lonMajuna.x ? 0.5 :\r\n      lonSin.y < lonMajuna.y ? 0.75 :\r\n      undefined;\r\n    \r\n    if(nanpaNasin !== undefined)\r\n    {\r\n      const namakoLawa =  anteTawa === 'sikeSewi' ? 0.25 : 0;\r\n      const nanpaMajuna = panaENanpaPiJasimaSike(jasimaMajuna, namakoLawa) ?? 0;\r\n      const sike = Math.floor(nanpaMajuna);\r\n      const ante = nanpaNasin - (nanpaMajuna - sike);\r\n      const namakoSike = sike + (ante <= -0.5 ? 1 : 0) + (ante >= 0.5 ? -1 : 0);\r\n      \r\n      const nanpaSike = nanpaNasin + namakoSike + namakoLawa;\r\n      return `rotate(${nanpaSike}turn)`;\r\n    }\r\n    else\r\n      return jasimaMajuna;\r\n  }\r\n  else if(lonMajuna && anteTawa === 'poka')\r\n  {\r\n    if(lonSin.x > lonMajuna.x)\r\n      return `scaleX(1)`;\r\n    else if(lonSin.x < lonMajuna.x)\r\n      return `scaleX(-1)`;\r\n    else\r\n      return jasimaMajuna;\r\n  }\r\n  else\r\n    return 'none';\r\n}\r\n\r\nfunction panaENanpaPiJasimaSike(jasima: Jasima, namakoLawa: number)\r\n{\r\n  const kili = alasaNanpaPiJasimaSike.exec(jasima);\r\n  if(kili)\r\n    return parseFloat(kili[1]) - namakoLawa;\r\n  else\r\n    return undefined;\r\n}\r\n\r\nconst alasaNanpaPiJasimaSike = /^rotate\\((.*)turn\\)$/;\r\n","import './leko.css';\r\nimport classNames from 'classnames';\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { Ijo } from './insa/ijo';\r\nimport { lukinPiKulupuNimi, lukinPiIjoAli } from './lukinIjo'\r\nimport { kipisiENimi } from './kipisiENimi';\r\nimport { Jasima, panaEJasima } from './jasima';\r\nimport { panaEKulupuNimi } from './insa/nimiAli';\r\n\r\nexport function Leko({ ijo, lukinWawa }: { ijo: Ijo, lukinWawa: boolean })\r\n{\r\n  const lukinNimi = ijo.liSitelen()\r\n    ? lukinPiIjoAli[ijo.nimi]\r\n    : lukinPiKulupuNimi[panaEKulupuNimi(ijo.nimi)];\r\n  const anteTawa = ijo.liSitelen() ? lukinNimi.anteTawa : undefined;\r\n  \r\n  const kulupuLukin = classNames(\r\n    'leko',\r\n    { 'sitelen': ijo.liSitelen() },\r\n    { 'wawa': lukinWawa }\r\n  );\r\n  \r\n  const ijoMajuna = useMajuna(ijo);\r\n  const [jasimaMajuna, sinEJasima] = useState<Jasima>('none');\r\n  const jasima = ijoMajuna?.nimi === ijo.nimi\r\n    ? panaEJasima(jasimaMajuna, ijoMajuna.lon, ijo.lon, anteTawa)\r\n    : 'none';\r\n  if(jasima !== jasimaMajuna)\r\n    sinEJasima(jasima);\r\n  \r\n  const lukin =\r\n  {\r\n    left: `${ijo.lon.x}em`,\r\n    top: `${ijo.lon.y}em`,\r\n    transform: jasima,\r\n    color: lukinNimi.kule,\r\n  };\r\n  \r\n  return (\r\n    <div className={kulupuLukin} style={lukin}>\r\n      {insa(ijo)}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction insa(ijo: Ijo)\r\n{\r\n  if(ijo.liSitelen())\r\n    return <span>{ijo.nimi}</span>;\r\n  else\r\n  {\r\n    const linja = kipisiENimi(ijo.nimi);\r\n    const nanpaLinja = linja.length === 1 ? 'linjaWan' : 'linjaTu';\r\n    const kulupuLukin = classNames('nimi', nanpaLinja);\r\n    \r\n    return linja.map(({ nimiLili, suliPoka }, nanpa) =>\r\n      <span key={nanpa} className={kulupuLukin}\r\n        style={{ fontVariationSettings: `'wdth' ${suliPoka}, 'opsz' 12` }}\r\n      >\r\n        {nimiLili}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nfunction useMajuna<T>(sin: T)\r\n{\r\n  const ona = useRef<T>();\r\n  useEffect(() => { ona.current = sin; });\r\n  return ona.current;\r\n}\r\n","import './ma.css';\r\nimport Im from \"immutable\";\r\nimport { Component } from 'react';\r\nimport { Lon } from './insa/lon';\r\nimport { LipuIjo } from './insa/ijo';\r\nimport { Leko } from './leko';\r\n\r\ninterface JoMa\r\n{\r\n  readonly suli: Lon;\r\n  readonly lipuIjo: LipuIjo;\r\n  readonly lukinWawa: Im.Set<number>;\r\n}\r\n\r\nexport class Ma extends Component<JoMa>\r\n{\r\n  render()\r\n  {\r\n    const lekoAli = this.props.lipuIjo\r\n      .map((ijo, nanpaTaso) =>\r\n        <Leko key={nanpaTaso} ijo={ijo} lukinWawa={this.props.lukinWawa.contains(nanpaTaso)} />\r\n      )\r\n      .toIndexedSeq();\r\n    \r\n    return (\r\n      <div className='ma' style={{\r\n        width: `${this.props.suli.x}em`,\r\n        height: `${this.props.suli.y}em`,\r\n      }}>\r\n        {lekoAli}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Im from 'immutable';\r\nimport { Lon } from './lon';\r\nimport { buildLexer, apply, expectSingleResult, expectEOF, tok, rep, alt, Parser } from 'typescript-parsec';\r\nimport { Nimi, nimiAli, nimiInsaKulupu } from './nimiAli';\r\nimport { Ijo, KulupuIjo } from './ijo';\r\n\r\ninterface LipuMa\r\n{\r\n  readonly nimi: string;\r\n  readonly ma: string[];\r\n  readonly namako?: { [sitelen: string]: string | undefined };\r\n}\r\n\r\nenum KulupuToki { Nimi, Sitelen, Namako, Kon, Insa }\r\n\r\nconst mamaToki = buildLexer<KulupuToki>([\r\n  [true,  /^[A-Z][A-Za-z]*/g,      KulupuToki.Nimi   ],\r\n  [true,  /^[a-z]+/g,              KulupuToki.Sitelen],\r\n  [true,  /^[^A-Za-z.\\s][^.\\s]*/g, KulupuToki.Namako ],\r\n  [true,  /^\\./g,                  KulupuToki.Kon    ],\r\n  [false, /^\\s+/g,                 KulupuToki.Insa   ],\r\n]);\r\n\r\nconst nimiNimi = Im.Set<string>(nimiAli);\r\nconst nimiSitelen = Im.Set<string>(nimiInsaKulupu['ijo']);\r\n\r\nfunction panaENimi(nimi: string, liSitelen: boolean)\r\n{\r\n  const nimiLili = nimi.toLowerCase();\r\n  const tan = liSitelen ? nimiSitelen : nimiNimi;\r\n  if(tan.contains(nimiLili))\r\n    return nimiLili as Nimi;\r\n  else\r\n  {\r\n    const nimiOpen = tan.filter(ni => ni.startsWith(nimiLili));\r\n    if(nimiOpen.size === 1)\r\n      return nimiOpen.first()! as Nimi;\r\n    else if(nimiOpen.isEmpty())\r\n      throw new Error(`nimi '${nimi}' li ken open e ala!`);\r\n    else\r\n      throw new Error(`nimi '${nimi}' li ken open e '${nimiOpen.join(\"' anu '\")}''!`);\r\n  }\r\n}\r\n\r\ntype Wan = { readonly kulupu: KulupuIjo, readonly nimi: Nimi };\r\n\r\nconst pilinPiIjoNimi = apply(\r\n  tok(KulupuToki.Nimi),\r\n  (toki): readonly Wan[] =>\r\n  [{\r\n    kulupu: 'nimi',\r\n    nimi: panaENimi(toki.text, false),\r\n  }]\r\n);\r\n\r\nconst pilinPiIjoSitelen = apply(\r\n  tok(KulupuToki.Sitelen),\r\n  (toki): readonly Wan[] =>\r\n  [{\r\n    kulupu: 'sitelen',\r\n    nimi: panaENimi(toki.text, true),\r\n  }]\r\n);\r\n\r\nconst pilinKon = apply(\r\n  tok(KulupuToki.Kon),\r\n  (toki): readonly Wan[] => []\r\n);\r\n  \r\nconst pilinPiLinjaNamako = rep(alt(pilinPiIjoNimi, pilinPiIjoSitelen));\r\n\r\nfunction pilin<T>(pilinLinja: Parser<KulupuToki, T>, linja: string)\r\n{\r\n  return expectSingleResult(expectEOF(pilinLinja.parse(mamaToki.parse(linja))))\r\n}\r\n\r\nexport function pilinELipuMa(lipuMa: LipuMa)\r\n{\r\n  const namakoAli = lipuMa.namako !== undefined\r\n    ? Im.Map(lipuMa.namako).map(linja => pilin(pilinPiLinjaNamako, linja as string).flat())\r\n    : Im.Map<string, Wan[]>();\r\n\r\n  const pilinPiIjoNamako = apply(\r\n    tok(KulupuToki.Namako),\r\n    (toki): readonly Wan[] =>\r\n    {\r\n      const namako = namakoAli.get(toki.text);\r\n      if(namako !== undefined)\r\n        return namako;\r\n      else\r\n        throw new Error(`namako ${toki.text} li lon ala!`);\r\n    }\r\n  );\r\n  const pilinPiLinjaMa = rep(alt(pilinPiIjoNimi, pilinPiIjoSitelen, pilinPiIjoNamako, pilinKon));\r\n  \r\n  const ma = Im.Seq(lipuMa.ma)\r\n    .map(linja => pilin(pilinPiLinjaMa, linja))\r\n    .cacheResult();\r\n  \r\n  const suliLinja = ma.map(linja => linja.length).toList();\r\n  if(suliLinja.size === 0)\r\n    throw new Error('ma li jo e linja ala!');\r\n  \r\n  const suli = new Lon(suliLinja.first()!, suliLinja.size);\r\n  if(suli.x === 0)\r\n    throw new Error('linja ma li jo e leko ala!');\r\n  if(suliLinja.skip(1).some(ni => ni !== suli.x))\r\n    throw new Error('suli pi linja ma li sama ala!');\r\n  \r\n  const ijoAli = ma\r\n    .flatMap((linja, y) =>\r\n      Im.Seq(linja).flatMap((leko, x) =>\r\n        Im.Seq(leko).map(wan => ({  ...wan, lon: new Lon(x, y) }))))\r\n    .map((ijo, nanpa) => new Ijo({ ...ijo, nanpa: nanpa }))\r\n    .toArray();\r\n  \r\n  return {\r\n    nimiMa: lipuMa.nimi,\r\n    suliMa: suli,\r\n    ijoAli: ijoAli,\r\n  };\r\n}\r\n","import Im from 'immutable';\r\nimport { Lon, NasinTawa } from './lon';\r\nimport { liInsaKulupu, Nimi, NimiIjo } from './nimiAli'\r\n\r\nexport type KulupuIjo = 'nimi' | 'sitelen';\r\n\r\ninterface IIjo\r\n{\r\n  readonly nanpa: number;\r\n  readonly lon: Lon;\r\n  readonly kulupu: KulupuIjo;\r\n  readonly nimi: Nimi;\r\n}\r\nconst ijoAla: IIjo = { nanpa: NaN, lon: new Lon(NaN, NaN), kulupu: 'nimi', nimi: 'ala' };\r\n\r\nexport class Ijo extends Im.Record<IIjo>(ijoAla) implements IIjo\r\n{\r\n  constructor(ijo: IIjo)\r\n  {\r\n    super(ijo);\r\n    if(ijo.kulupu === 'sitelen' && !liInsaKulupu(ijo.nimi, 'ijo'))\r\n      throw new Error(`ijo sitelen li ken ala jo e nimi '${ijo.nimi}'!`);\r\n  }\r\n  \r\n  liSitelen(): this is { readonly kulupu: 'sitelen', readonly nimi: NimiIjo }\r\n  {\r\n    return this.kulupu === 'sitelen';\r\n  }\r\n  liNimi(): this is { readonly kulupu: 'nimi' }\r\n  {\r\n    return this.kulupu === 'nimi';\r\n  }\r\n  \r\n  tawa(nasin: NasinTawa)\r\n  {\r\n    return this.merge({ lon: this.lon.tawa(nasin) });\r\n  }\r\n}\r\n\r\nexport type LipuIjo = Im.Map<number, Ijo>;\r\n","import './lukinMusi.css';\r\nimport lipuMaAli from './lipu/lipuMa.json'\r\nimport { Component } from 'react';\r\nimport { Musi } from './insa/musi';\r\nimport { IloPalisa, Palisa } from './iloPalisa';\r\nimport { Ma } from './ma';\r\nimport { pilinELipuMa } from './insa/lipuMa';\r\n\r\nexport class LukinMusi extends Component<{ }, { musi: Musi }>\r\n{\r\n  constructor(jo: { })\r\n  {\r\n    super(jo);\r\n    const lipuMa = pilinELipuMa(lipuMaAli[1]);\r\n    this.state = { musi: new Musi(lipuMa.nimiMa, lipuMa.suliMa, lipuMa.ijoAli) };\r\n  }\r\n  \r\n  render()\r\n  {\r\n    const musi = this.state.musi;\r\n    const tawaNi = musi.tawaNi;\r\n    \r\n    return (\r\n      <main>\r\n        <div className='nimiMa'>\r\n          {musi.nimiMa}\r\n        </div>\r\n        <Ma\r\n          suli={musi.suliMa}\r\n          lipuIjo={tawaNi.lipuIjo}\r\n          lukinWawa={tawaNi.lukinWawa}\r\n        />\r\n        <IloPalisa palisaLa={this.lukaPalisa} />\r\n      </main>\r\n    );\r\n  }\r\n  \r\n  private lukaPalisa = (palisa: Palisa) =>\r\n  {\r\n    const pali = this.paliPalisa[palisa];\r\n    this.setState({ musi: pali(this.state.musi) });\r\n  };\r\n  \r\n  private paliPalisa: { [palisa in Palisa]: (musi: Musi) => Musi } =\r\n  {\r\n    'sewi':   musi => musi.tawa('sewi'),\r\n    'anpa':   musi => musi.tawa('anpa'),\r\n    'soto':   musi => musi.tawa('soto'),\r\n    'teje':   musi => musi.tawa('teje'),\r\n    'monsi':  musi => musi.tenpoMonsi(),\r\n    'sinpin': musi => musi.tenpoSinpin(),\r\n    'open':   musi => musi.tenpoMonsi(true),\r\n    'pini':   musi => musi.tenpoSinpin(true),\r\n  } as const;\r\n}\r\n","import './sijelo.css';\nimport { LukinMusi } from './lukinMusi';\n\nexport const Sijelo = () =>\n  <>\n    <header>\n      <h1>soweli li mi</h1>\n      <h2>soweli li mi</h2>\n      <h3>nimi li lon la ijo li lon</h3>\n    </header>\n    <LukinMusi />\n  </>;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) =>\n{\n  if(onPerfEntry && onPerfEntry instanceof Function)\n  {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) =>\n    {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import './index.css';\nimport { StrictMode } from 'react';\nimport { render } from 'react-dom';\nimport { Sijelo } from './sijelo';\nimport reportWebVitals from './reportWebVitals';\n\nrender(\n  <StrictMode>\n    <Sijelo />\n  </StrictMode>,\n  document.getElementById('sijelo')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}