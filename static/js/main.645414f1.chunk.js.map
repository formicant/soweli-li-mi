{"version":3,"sources":["insa/lipuMa.ts","insa/lon.ts","insa/lonIjo.ts","insa/lonPali.ts","insa/kepeken.ts","insa/nimiAli.ts","insa/toki.ts","insa/pilinToki.ts","insa/tawa.ts","insa/musi.ts","iloPalisa.tsx","lukinNimi.ts","kipisiENimi.ts","jasima.ts","leko.tsx","insa/ijo.ts","ma.tsx","insa/nasinMusi.ts","lukinMusi.tsx","sijelo.tsx","reportWebVitals.ts","index.tsx"],"names":["lipuMaAli","nimi","suli","x","y","ijoAli","liSitelen","paliEPokiLon","makeTypedFactory","paliELonIjo","lipuIjo","groupBy","ijo","toMap","paliELonPali","lonIjo","nasinMusi","Im","Map","mapEntries","lon","ijoMute","map","nanpa","ijoAntePiLonSama","get","filterNot","_","nanpaNi","toSet","nimiPiIjoSitelenAntePiLonSama","toSeq","filter","ni","nasinLiLon","nasin","semeLiLon","seme","contains","lonSemeLiLon","lonSeme","some","isEmpty","intersect","Seq","flatMap","liSeme","panaEPali","panaENanpaTanPali","lukin","pali","undefined","paliMute","keySeq","Set","of","monsiEKulupu","kulupu","tawaMute","tan","tawa","nimiInsaKulupu","toki","kulupuPiNimiAli","nimiAli","keys","panaEKulupuNimi","panaELinja","anteEPokaESewi","ante","suliAnte","Range","ijoENanpa","lonToki","index","rowBegin","columnBegin","rowEnd","columnEnd","panaELonToki","nimiWan","entrySeq","first","nanpaIjo","kind","text","pos","next","paliEToki","update","panaELinjaToki","tokiMute","linjaEPalisaToki","toStack","palisaToki","size","peek","pop","Error","pilinMute","pilinInsa","pilinJaki","rep","alt","tok","pilinIjo","pilinKulupu","pilinPali","pilinLi","str","pilinEn","pilinLon","pilinSeme","apply","seq","lawa","sijelo","concat","insa","mute","pilinLeko","union","pilinNasinMusi","leko","li","pilin","kmid","panaENasinMusiAli","panaETokiAli","linja","expectEOF","parse","successful","candidates","ken","result","cacheResult","wekaENasinMusiInsa","toArray","nasinMute","nasinNi","nasinAnte","isSubset","tawaOpen","lipuMa","toKeyedSeq","lonPali","lukinWawa","valueSeq","panaEKulupuTawa","suliMa","lukinEKulupuTawa","lukinNi","lonSin","merge","tawaEPokiLon","lukinSin","liInsaMa","lukinTawa","Keyed","tenpoMonsi","musi","ali","tenpoNi","tenpoSinpin","tenpo","tawaNi","kulupuTawaSin","tawaELon","lipuIjoSin","lonIjoSin","ijoAnte","anteMute","panaEIjoAnte","lipuIjoAnte","lonIjoAnte","nasinMusiAnte","lonPaliAnte","equals","tawaSin","tenpoSin","take","toList","palisaPiNimiPalisa","IloPalisa","render","lukaPalisa","palisa","code","props","palisaLa","window","addEventListener","this","removeEventListener","Component","kipisiPiNimiAli","lukinPiNnimiAli","soweli","kule","anteTawa","waso","kala","akesi","pipi","tomo","kiwen","telo","ko","kasi","kili","sike","kon","mi","pini","moli","awen","weka","pakala","e","en","ala","anteEKule","sitelen","kipisiENimi","lonSitelen","document","createElement","getContext","paliELinja","nimiLili","suliPokaAli","suliPoka","Math","round","measureText","width","length","nanpaSuliPiLinjaWan","meso","substring","nanpaSuliPiLinjaTu","minBy","wan","tu","abs","font","kipisi","paliEKipisiPiNimiAli","panaEJasima","jasimaMajuna","lonMajuna","nanpaNasin","namakoLawa","nanpaMajuna","jasima","alasaNanpaPiJasimaSike","exec","parseFloat","panaENanpaPiJasimaSike","floor","Leko","panaEKulupuIjo","kulupuLukin","classNames","kulupuLukinInsa","lukinNimi","ijoMajuna","sin","ona","useRef","useEffect","current","useMajuna","useState","sinEJasima","left","top","transform","lukinKule","backgroundColor","color","className","style","nanpaLinja","fontVariationSettings","Ma","lekoAli","nanpaTaso","toIndexedSeq","height","tokiENasinMusi","join","LukinMusi","jo","paliPalisa","setState","state","List","lipuPiNasinMusi","Sijelo","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","getElementById"],"mappings":"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","file":"static/js/main.645414f1.chunk.js","sourcesContent":["import { Lon } from \"./lon\";\r\nimport { Ijo } from \"./ijo\";\r\n\r\nexport interface LipuMa\r\n{\r\n  readonly nimi: string;\r\n  readonly suli: Lon;\r\n  readonly ijoAli: Ijo[];\r\n}\r\n\r\nexport const lipuMaAli: LipuMa[] =\r\n[\r\n  {\r\n    nimi: 'ma pona',\r\n    suli: { x: 15, y: 10 },\r\n    ijoAli:\r\n    [\r\n      { x: 2, y: 2, liSitelen: true, nimi: 'soweli' },\r\n      { x: 6, y: 3, liSitelen: true, nimi: 'kala' },\r\n      { x: 8, y: 1, liSitelen: true, nimi: 'kiwen' },\r\n      { x: 1, y: 7, liSitelen: false, nimi: 'soweli' },\r\n      { x: 2, y: 6, liSitelen: false, nimi: 'en' },\r\n      { x: 3, y: 6, liSitelen: false, nimi: 'kala' },\r\n      { x: 4, y: 6, liSitelen: false, nimi: 'li' },\r\n      { x: 5, y: 6, liSitelen: false, nimi: 'mi' },\r\n      { x: 8, y: 5, liSitelen: false, nimi: 'kiwen' },\r\n      { x: 8, y: 6, liSitelen: false, nimi: 'li' },\r\n      { x: 8, y: 7, liSitelen: false, nimi: 'awen' },\r\n      { x: 11, y: 3, liSitelen: false, nimi: 'nimi' },\r\n      { x: 12, y: 3, liSitelen: false, nimi: 'li' },\r\n      { x: 13, y: 3, liSitelen: false, nimi: 'tawa' },\r\n    ]\r\n  },\r\n];\r\n","import { TypedRecord, makeTypedFactory } from 'typed-immutable-record';\r\n\r\nexport interface Lon\r\n{\r\n  readonly x: number,\r\n  readonly y: number;\r\n}\r\n\r\nexport interface PokiLon extends TypedRecord<PokiLon>, Lon { }\r\nexport const paliEPokiLon = makeTypedFactory<Lon, PokiLon>({ x: 0, y: 0 });\r\n","import Im from 'immutable';\r\nimport { PokiLon, paliEPokiLon } from './lon';\r\nimport { Ijo,  LipuIjo } from './ijo';\r\n\r\nexport type LonIjo = Im.Map<PokiLon, Im.Collection<number, Ijo>>;\r\n\r\nexport function paliELonIjo(lipuIjo: LipuIjo): LonIjo\r\n{\r\n  return lipuIjo\r\n    .groupBy(ijo => paliEPokiLon(ijo))\r\n    .toMap();\r\n}\r\n","import Im from 'immutable';\r\nimport { PokiLon } from './lon';\r\nimport { Ijo } from './ijo';\r\nimport { NimiIjo, NimiPali, panaEKulupuNimi } from './nimiAli';\r\nimport { LiSeme, NasinMusi } from './nasinMusi';\r\nimport { LonIjo } from './lonIjo';\r\n\r\nexport type LonPali = Im.Map<PokiLon, Im.Collection<number, Im.Set<LiSeme>>>;\r\n\r\nexport function paliELonPali(lonIjo: LonIjo, nasinMusi: readonly NasinMusi[]): LonPali\r\n{\r\n  // O PALI: nasin musi pi lukin ‘kon li ...’!\r\n  \r\n  return Im.Map(\r\n    lonIjo.mapEntries(([lon, ijoMute]) =>\r\n      [lon, ijoMute.map((ijo, nanpa) => panaEPali(lon, ijo, nanpa, lonIjo, nasinMusi))])\r\n  );\r\n}\r\n\r\nexport function panaENanpaTanPali(lukin: Im.Collection<number, Im.Set<LiSeme>> | undefined, pali: NimiPali)\r\n{\r\n  if(lukin !== undefined)\r\n    return lukin.filter(paliMute => paliMute.contains(pali)).keySeq().toSet();\r\n  else\r\n    return Im.Set.of<number>();\r\n}\r\n\r\nfunction panaEPali(lon: PokiLon, ijo: Ijo, nanpa: number, lonIjo: LonIjo, nasinMusi: readonly NasinMusi[])\r\n{\r\n  const ijoAntePiLonSama = lonIjo\r\n    .get(lon)!\r\n    .filterNot((_, nanpaNi) => nanpaNi === nanpa)\r\n    .toSet();\r\n  const nimiPiIjoSitelenAntePiLonSama = ijoAntePiLonSama\r\n    .toSeq()\r\n    .filter(ni => ni.liSitelen)\r\n    .map(ni => ni.nimi as NimiIjo)\r\n    .toSet();\r\n  \r\n  function nasinLiLon(nasin: NasinMusi)\r\n  {\r\n    const semeLiLon =\r\n      nasin.seme.contains('ali') ||\r\n      (!ijo.liSitelen && nasin.seme.contains('nimi')) ||\r\n      (ijo.liSitelen && nasin.seme.contains(ijo.nimi));\r\n    \r\n    const lonSemeLiLon =\r\n      nasin.lonSeme.contains('ali') ||\r\n      (nasin.lonSeme.contains('nimi') && ijoAntePiLonSama.some(ni => !ni.liSitelen)) ||\r\n      (nasin.lonSeme.contains('kon') && ijoAntePiLonSama.isEmpty()) ||\r\n      !nasin.lonSeme.intersect(nimiPiIjoSitelenAntePiLonSama).isEmpty();\r\n    \r\n    return semeLiLon && lonSemeLiLon;\r\n  }\r\n  \r\n  const paliMute = Im.Seq(nasinMusi)\r\n    .filter(nasinLiLon)\r\n    .flatMap(nasin => nasin.liSeme)\r\n    .toSet();\r\n  return paliMute;\r\n}\r\n","import Im from \"immutable\";\r\n\r\nexport function monsiEKulupu<TTan extends string, TTawa>(kulupu: { [tan in TTan]: readonly TTawa[] })\r\n{\r\n  return Im.Seq(kulupu)\r\n    .flatMap((tawaMute, tan) => Im.Seq(tawaMute as TTawa[]).map(tawa => [tawa, tan as TTan]))\r\n    .toMap();\r\n  // o pona e ni!\r\n}\r\n","import { monsiEKulupu } from \"./kepeken\";\r\n\r\nexport type KulupuNimi = 'toki' | 'kulupu' | 'ijo' | 'pali';\r\n\r\nconst nimiInsaKulupu =\r\n{\r\n  toki:\r\n  [\r\n    'li',\r\n    'e',\r\n    'en',\r\n    'ala',\r\n    'lon',\r\n  ],\r\n  kulupu:\r\n  [\r\n    'ali',\r\n    'nimi',\r\n    'kon',\r\n  ],\r\n  ijo:\r\n  [\r\n    'soweli',\r\n    'waso',\r\n    'kala',\r\n    'akesi',\r\n    'pipi',\r\n    'tomo',\r\n    'kiwen',\r\n    'telo',\r\n    'ko',\r\n    'kasi',\r\n    'kili',\r\n    'sike',\r\n    'leko',\r\n  ],\r\n  pali:\r\n  [\r\n    'mi',\r\n    'pini',\r\n    'moli',\r\n    'awen',\r\n    'weka',\r\n    'tawa',\r\n    'pakala',\r\n  ],\r\n} as const;\r\n\r\nconst kulupuPiNimiAli = monsiEKulupu(nimiInsaKulupu);\r\n\r\nexport const nimiAli = kulupuPiNimiAli.keys();\r\n\r\nexport type NimiToki   = typeof nimiInsaKulupu.toki  [number];\r\nexport type NimiKulupu = typeof nimiInsaKulupu.kulupu[number];\r\nexport type NimiIjo    = typeof nimiInsaKulupu.ijo   [number];\r\nexport type NimiPali   = typeof nimiInsaKulupu.pali  [number];\r\n\r\nexport type Nimi = NimiToki | NimiKulupu | NimiIjo | NimiPali;\r\n\r\nexport function liInsaKulupu(nimi: Nimi, kulupu: 'toki'  ): nimi is NimiToki\r\nexport function liInsaKulupu(nimi: Nimi, kulupu: 'kulupu'): nimi is NimiKulupu\r\nexport function liInsaKulupu(nimi: Nimi, kulupu: 'ijo'   ): nimi is NimiIjo\r\nexport function liInsaKulupu(nimi: Nimi, kulupu: 'pali'  ): nimi is NimiPali\r\nexport function liInsaKulupu(nimi: Nimi, kulupu: KulupuNimi)\r\n{\r\n  return (nimiInsaKulupu[kulupu] as ReadonlyArray<Nimi>).includes(nimi);\r\n}\r\n\r\nexport function panaEKulupuNimi(nimi: Nimi)\r\n{\r\n  return kulupuPiNimiAli.get(nimi) as KulupuNimi;\r\n}\r\n","import Im from 'immutable';\r\nimport { Token, TokenPosition } from 'typescript-parsec';\r\nimport { KulupuNimi, panaEKulupuNimi } from './nimiAli';\r\nimport { Lon, paliEPokiLon } from './lon';\r\nimport { LonIjo } from './lonIjo';\r\nimport { Ijo } from './ijo';\r\n\r\ntype KulupuToki = KulupuNimi | 'ala';\r\n\r\nexport interface Toki extends Token<KulupuToki>\r\n{\r\n  nanpaIjo?: number;\r\n}\r\n\r\nexport function panaETokiAli(suli: Lon, lonIjo: LonIjo)\r\n{\r\n  return panaELinja(suli, lonIjo, false)\r\n    .concat(panaELinja(suli, lonIjo, true));\r\n}\r\n\r\nfunction panaELinja(suli: Lon, lonIjo: LonIjo, anteEPokaESewi: boolean)\r\n{\r\n  const ante = anteEPokaESewi\r\n    ? ({ x, y }: Lon) => ({ x: y, y: x })\r\n    : ({ x, y }: Lon) => ({ x: x, y: y });\r\n  const suliAnte = ante(suli);\r\n  \r\n  return Im.Range(0, suliAnte.y).map(y =>\r\n    Im.Range(0, suliAnte.x)\r\n      .map(x => paliEToki(x, lonIjo.get(paliEPokiLon(ante({ x: x, y: y })))))\r\n      .update(panaELinjaToki));\r\n}\r\n\r\nfunction panaELinjaToki(tokiMute: Im.Seq.Indexed<Toki>)\r\n{\r\n  const palisaToki = tokiMute.toStack();\r\n  return linjaEPalisaToki(palisaToki);\r\n}\r\n\r\nfunction linjaEPalisaToki(palisaToki: Im.Stack<Toki>): Toki\r\n{\r\n  if(palisaToki.size > 1)\r\n    return {\r\n      ...palisaToki.peek()!,\r\n      next: linjaEPalisaToki(palisaToki.pop())\r\n    };\r\n  else if(palisaToki.size === 1)\r\n    return palisaToki.peek()!;\r\n  else\r\n    throw Error('palisa toki li jo e ala!');\r\n}\r\n\r\nfunction paliEToki(x: number, ijoENanpa: Im.Collection<number, Ijo> | undefined): Toki\r\n{\r\n  const lonToki = panaELonToki(x);\r\n  if(ijoENanpa !== undefined)\r\n  {\r\n    const nimiWan = ijoENanpa.filterNot(ijo => ijo.liSitelen).entrySeq().first();\r\n    // O PALI: lon wan li ken jo e nimi mute. o pali pana e ken ali!\r\n    if(nimiWan !== undefined)\r\n    {\r\n      const [nanpa, ijo] = nimiWan;\r\n      const nimi = ijo.nimi;\r\n      const kulupu = panaEKulupuNimi(nimi);\r\n      return {\r\n        nanpaIjo: nanpa,\r\n        kind: kulupu,\r\n        text: nimi,\r\n        pos: lonToki,\r\n        next: undefined,\r\n      };\r\n    }\r\n  }\r\n  \r\n  return {\r\n    kind: 'ala',\r\n    text: '',\r\n    pos: lonToki,\r\n    next: undefined,\r\n  };\r\n}\r\n\r\nfunction panaELonToki(x: number): TokenPosition\r\n{\r\n  return {\r\n    index: x,\r\n    rowBegin: 1,\r\n    columnBegin: x + 1,\r\n    rowEnd: 1,\r\n    columnEnd: x + 2,\r\n  };\r\n}\r\n","import Im from 'immutable';\r\nimport { apply, expectEOF, str, tok, seq, rep, alt, kmid, Parser } from 'typescript-parsec';\r\nimport { LonIjo } from './lonIjo';\r\nimport { Lon } from './lon';\r\nimport { panaETokiAli, Toki } from './toki';\r\nimport { Seme, LiSeme, NasinMusi } from './nasinMusi';\r\n\r\nconst pilinJaki = rep(alt(tok('ala'), tok('ijo'), tok('kulupu'), tok('toki'), tok('pali')));\r\n\r\nconst pilinIjo    = tok('ijo'    as const);\r\nconst pilinKulupu = tok('kulupu' as const);\r\nconst pilinPali   = tok('pali'   as const);\r\n\r\nconst pilinLi  = str<'toki'>('li');\r\nconst pilinEn  = str<'toki'>('en');\r\nconst pilinLon = str<'toki'>('lon');\r\n//const pilinAla = str<'toki'>('ala');\r\n\r\nconst pilinSeme = apply(\r\n  muteEnInsa(alt(pilinIjo, pilinKulupu), pilinEn),\r\n  ([mute, insa]) =>\r\n  ({\r\n    seme: Im.Seq(mute).map(ni => ni.text as Seme).toSet(),\r\n    nanpaIjo: Im.Seq(mute).map((ni: Toki) => ni.nanpaIjo!)\r\n      .concat(Im.Seq(insa).map((ni: Toki) => ni.nanpaIjo!))\r\n      .toSet()\r\n  } as const)\r\n);\r\n\r\nconst pilinLeko = alt(\r\n  apply(\r\n    pilinSeme,\r\n    ({ nanpaIjo, seme }) =>\r\n    ({\r\n      seme: seme,\r\n      lonSeme: Im.Set.of('ali' as Seme),\r\n      nanpaIjo: nanpaIjo\r\n    })\r\n  ),\r\n  apply(\r\n    seq(pilinSeme, pilinLon, pilinSeme),\r\n    ([seme, lon, lonSeme]) =>\r\n    ({\r\n      seme: seme.seme,\r\n      lonSeme: lonSeme.seme,\r\n      nanpaIjo: Im.Set.of((lon as Toki).nanpaIjo!).union(seme.nanpaIjo, lonSeme.nanpaIjo)\r\n    })\r\n  )\r\n);\r\n\r\nconst pilinNasinMusi = apply(\r\n  seq(pilinLeko, pilinLi, alt(pilinPali, pilinIjo)),\r\n  ([leko, li, liSeme]) =>\r\n  ({\r\n    seme: leko.seme,\r\n    lonSeme: leko.lonSeme,\r\n    liSeme: Im.Set.of(liSeme.text as LiSeme),\r\n    nanpaIjo: Im.Set.of((li as Toki).nanpaIjo!, (liSeme as Toki).nanpaIjo!).union(leko.nanpaIjo)\r\n  } as NasinMusi)\r\n);\r\n\r\nconst pilin = kmid(pilinJaki, pilinNasinMusi, pilinJaki);\r\n\r\nexport function panaENasinMusiAli(suli: Lon, lonIjo: LonIjo): readonly NasinMusi[]\r\n{\r\n  const tokiAli = panaETokiAli(suli, lonIjo);\r\n  const nasinAli = tokiAli\r\n    .map(linja => expectEOF(pilin.parse(linja)))\r\n    .filter(linja => linja.successful)\r\n    .flatMap(linja => linja.successful\r\n      ? Im.Seq(linja.candidates).map(ken => ken.result).cacheResult().update(wekaENasinMusiInsa)\r\n      : undefined as never)\r\n    .toArray();\r\n  \r\n  return nasinAli;\r\n}\r\n\r\nfunction wekaENasinMusiInsa(nasinMute: Im.Seq.Indexed<NasinMusi>)\r\n{\r\n  return nasinMute\r\n    .filterNot(nasinNi =>\r\n      nasinMute.some(nasinAnte =>\r\n        nasinAnte !== nasinNi && nasinNi.nanpaIjo.isSubset(nasinAnte.nanpaIjo)));\r\n}\r\n\r\nfunction muteEnInsa<TKulupu, TMute, TInsa>(\r\n  pilinMute: Parser<TKulupu, TMute>,\r\n  pilinInsa: Parser<TKulupu, TInsa>\r\n): Parser<TKulupu, [TMute[], TInsa[]]>\r\n{\r\n  return apply(\r\n    seq(pilinMute, rep(seq(pilinInsa, pilinMute))),\r\n    ([lawa, sijelo]) =>\r\n    [\r\n      [lawa].concat(sijelo.map(([insa, mute]) => mute)),\r\n      sijelo.map(([insa, mute]) => insa)\r\n    ]\r\n  );\r\n}\r\n","import Im from 'immutable';\r\nimport { Ijo, LipuIjo } from './ijo';\r\nimport { LipuMa } from './lipuMa';\r\nimport { Lon, PokiLon } from './lon';\r\nimport { paliELonIjo } from './lonIjo';\r\nimport { LonPali, paliELonPali, panaENanpaTanPali } from './lonPali';\r\nimport { panaENasinMusiAli } from './pilinToki';\r\n\r\nexport type NasinTawa = 'sewi' | 'anpa' | 'soto' | 'teje';\r\n\r\nexport interface Tawa\r\n{\r\n  readonly nasin?: NasinTawa;\r\n  readonly lipuIjo: LipuIjo;\r\n  readonly lukinWawa: Im.Set<number>;\r\n}\r\n\r\nexport function tawaOpen(lipuMa: LipuMa): Tawa\r\n{\r\n  const lipuIjo = Im.Map(Im.Seq(lipuMa.ijoAli).toKeyedSeq());\r\n  \r\n  const lonIjo = paliELonIjo(lipuIjo);\r\n  const nasinMusi = panaENasinMusiAli(lipuMa.suli, lonIjo);\r\n  const lonPali = paliELonPali(lonIjo, nasinMusi);\r\n  \r\n  const lukinWawa = Im.Seq(nasinMusi).flatMap(nasin => nasin.nanpaIjo)\r\n    .concat(lonPali.valueSeq().flatMap(mute => mute.filter((pali, nanpa) => lipuIjo.get(nanpa)!.liSitelen && !pali.isEmpty()).keySeq()))\r\n    .toSet();\r\n  \r\n  return {\r\n    lipuIjo: lipuIjo,\r\n    lukinWawa: lukinWawa,\r\n  };\r\n}\r\n\r\n\r\nexport function panaEKulupuTawa(suliMa: Lon, lonPali: LonPali, nasin: NasinTawa)\r\n{\r\n  const miMute = Im.Seq.Keyed(\r\n    lonPali.entrySeq().flatMap(([lon, mute]) =>\r\n      mute\r\n        .filter(pali => pali.contains('mi'))\r\n        .toKeyedSeq()\r\n        .mapEntries(([nanpa, _]) => [nanpa, lon]))\r\n  );\r\n\r\n  function lukinEKulupuTawa(nanpa: number, lon: PokiLon): Im.Set<number>\r\n  {\r\n    const lukinNi = lonPali.get(lon);\r\n    const lonSin = tawaEPokiLon(lon, nasin);\r\n    const lukinSin = lonPali.get(lonSin);\r\n    const ken =\r\n      liInsaMa(lonSin, suliMa) &&\r\n      panaENanpaTanPali(lukinNi, 'awen').isEmpty() &&\r\n      panaENanpaTanPali(lukinSin, 'awen').isEmpty();\r\n    \r\n    if(ken)\r\n    {\r\n      const tawa = panaENanpaTanPali(lukinSin, 'tawa')\r\n        .union(panaENanpaTanPali(lukinSin, 'mi'));\r\n      const lukinTawa = tawa.toSeq().map(ni => lukinEKulupuTawa(ni, lonSin));\r\n      if(lukinTawa.some(ni => ni.isEmpty()))\r\n        return Im.Set.of<number>();\r\n      else\r\n        return Im.Set.of(nanpa).union(...lukinTawa);\r\n    }\r\n    else\r\n      return Im.Set.of<number>();\r\n  }\r\n  \r\n  const kulupuTawaAli = miMute\r\n    .map((lon, nanpa) => lukinEKulupuTawa(nanpa, lon))\r\n    .valueSeq().flatMap(ni => ni)\r\n    .toSet();\r\n  \r\n  return kulupuTawaAli;\r\n}\r\n\r\nfunction tawaEPokiLon(lon: PokiLon, nasin: NasinTawa)\r\n{\r\n  switch(nasin)\r\n  {\r\n    case 'sewi': return lon.merge({ y: lon.y - 1 });\r\n    case 'anpa': return lon.merge({ y: lon.y + 1 });\r\n    case 'soto': return lon.merge({ x: lon.x - 1 });\r\n    case 'teje': return lon.merge({ x: lon.x + 1 });\r\n    default: throw Error('nasin li ike!');\r\n  }\r\n}\r\n\r\nexport function tawaELon<T extends Lon>(lon: T, nasin: NasinTawa): T\r\n{\r\n  switch(nasin)\r\n  {\r\n    case 'sewi': return { ...lon, y: lon.y - 1 };\r\n    case 'anpa': return { ...lon, y: lon.y + 1 };\r\n    case 'soto': return { ...lon, x: lon.x - 1 };\r\n    case 'teje': return { ...lon, x: lon.x + 1 };\r\n    default: throw Error('nasin li ike!');\r\n  }\r\n}\r\n\r\nfunction liInsaMa<T extends Lon>(lon: T, suli: Lon)\r\n{\r\n  return (\r\n    lon.x >= 0 && lon.x < suli.x &&\r\n    lon.y >= 0 && lon.y < suli.y\r\n  );\r\n}\r\n","import Im from \"immutable\";\r\nimport { LipuIjo } from \"./ijo\";\r\nimport { LipuMa } from \"./lipuMa\";\r\nimport { paliELonIjo } from \"./lonIjo\";\r\nimport { LonPali, paliELonPali } from \"./lonPali\";\r\nimport { NimiIjo, panaEKulupuNimi } from \"./nimiAli\";\r\nimport { panaENasinMusiAli } from \"./pilinToki\";\r\nimport { NasinTawa, Tawa, tawaOpen, panaEKulupuTawa, tawaELon } from \"./tawa\";\r\n\r\nexport interface Musi\r\n{\r\n  readonly lipuMa: LipuMa;\r\n  readonly tenpo: Im.List<Tawa>;\r\n  readonly tenpoNi: number;\r\n}\r\n\r\nexport function openEMusi(lipuMa: LipuMa): Musi\r\n{\r\n  return {\r\n    lipuMa: lipuMa,\r\n    tenpo: Im.List.of(tawaOpen(lipuMa)),\r\n    tenpoNi: 0,\r\n  };\r\n}\r\n\r\nexport function tenpoMonsi(musi: Musi, ali: boolean = false): Musi\r\n{\r\n  if(musi.tenpoNi > 0)\r\n    return { ...musi, tenpoNi: ali ? 0 : musi.tenpoNi - 1 };\r\n  else\r\n    return musi;\r\n}\r\n\r\nexport function tenpoSinpin(musi: Musi, ali: boolean = false): Musi\r\n{\r\n  if(musi.tenpoNi < musi.tenpo.size - 1)\r\n    return { ...musi, tenpoNi: ali ? musi.tenpo.size - 1 : musi.tenpoNi + 1 };\r\n  else\r\n    return musi;\r\n}\r\n\r\nexport function tawa(musi: Musi, nasin: NasinTawa): Musi\r\n{\r\n  const lipuIjo = tawaNi(musi).lipuIjo;\r\n  const lonIjo = paliELonIjo(lipuIjo);\r\n  const nasinMusi = panaENasinMusiAli(musi.lipuMa.suli, lonIjo);\r\n  const lonPali = paliELonPali(lonIjo, nasinMusi);\r\n  \r\n  const kulupuTawa = panaEKulupuTawa(musi.lipuMa.suli, lonPali, nasin)\r\n    .toKeyedSeq()\r\n    .mapEntries(([_, nanpa]) => [nanpa, lipuIjo.get(nanpa)!]);\r\n  \r\n  const kulupuTawaSin = kulupuTawa.map(ijo => tawaELon(ijo, nasin));\r\n  const lipuIjoSin = lipuIjo.merge(kulupuTawaSin);\r\n  \r\n  const lonIjoSin = paliELonIjo(lipuIjoSin);\r\n  const nasinMusiSin = panaENasinMusiAli(musi.lipuMa.suli, lonIjoSin);\r\n  const lonPaliSin = paliELonPali(lonIjoSin, nasinMusiSin);\r\n  const ijoAnte = panaEIjoAnte(lonPaliSin, lipuIjoSin);\r\n  \r\n  const lipuIjoAnte = lipuIjoSin.merge(ijoAnte);\r\n  \r\n  const lonIjoAnte = paliELonIjo(lipuIjoAnte);\r\n  const nasinMusiAnte = panaENasinMusiAli(musi.lipuMa.suli, lonIjoAnte);\r\n  const lonPaliAnte = paliELonPali(lonIjoAnte, nasinMusiAnte);\r\n  \r\n  const lukinWawa = Im.Seq(nasinMusiAnte).flatMap(nasin => nasin.nanpaIjo)\r\n    .concat(lonPaliAnte.valueSeq().flatMap(mute => mute.filter((pali, nanpa) => lipuIjoAnte.get(nanpa)!.liSitelen && !pali.isEmpty()).keySeq()))\r\n    .toSet();\r\n  \r\n  if(lipuIjoAnte.equals(lipuIjo)) // li pali ala. ijo li sama ala.\r\n    return musi\r\n  else\r\n  {\r\n    const tawaSin: Tawa = { nasin: nasin, lipuIjo: lipuIjoAnte, lukinWawa: lukinWawa };\r\n    const tenpoSin = musi.tenpo.toSeq().take(musi.tenpoNi + 1).concat([tawaSin]).toList();\r\n    \r\n    return { ...musi, tenpo: tenpoSin, tenpoNi: musi.tenpoNi + 1 };\r\n  }\r\n}\r\n\r\nfunction panaEIjoAnte(lonPali: LonPali, lipuIjo: LipuIjo)\r\n{\r\n  return Im.Seq.Keyed(\r\n    lonPali.entrySeq().flatMap(([_, mute]) =>\r\n      mute\r\n        .map(paliMute => paliMute.filter(pali => panaEKulupuNimi(pali) === 'ijo') as Im.Set<NimiIjo>)\r\n        .filterNot(paliMute => paliMute.isEmpty())\r\n        .toKeyedSeq()\r\n    )\r\n  ).map((anteMute, nanpa) => ({ ...lipuIjo.get(nanpa)!, liSitelen: true as const, nimi: anteMute.first()! }));\r\n}\r\n\r\nexport function tawaNi(musi: Musi)\r\n{\r\n  const tawaNi = musi.tenpo.get(musi.tenpoNi);\r\n  if(tawaNi)\r\n    return tawaNi;\r\n  else\r\n    throw Error('tenpo ni li ike!');\r\n}\r\n\r\n// /**\r\n//  * pana e linja tenpo pi ijo wan tan tenpo ni tawa open musi.\r\n//  * ni li pona taso tawa jasima e leko.\r\n//  * @param nanpaIjo nanpa taso tawa pana e ijo tan LipuIjo.\r\n//  */\r\n// export function tenpoPiniIjo(musi: Musi, nanpaIjo: number)\r\n// {\r\n//   return Im.Range(musi.tenpoNi, -1, -1)\r\n//     .map(t => musi.tenpo.get(t)!.lipuIjo.get(nanpaIjo))\r\n//     .takeWhile(t => t !== undefined) as Im.Seq.Indexed<Ijo>;\r\n// }\r\n","import { Component } from 'react';\r\nimport { monsiEKulupu } from \"./insa/kepeken\";\r\nimport { NasinTawa } from \"./insa/tawa\";\r\n\r\ntype TawaTenpo = 'monsi' | 'sinpin' | 'open' | 'pini';\r\nexport type Palisa = NasinTawa | TawaTenpo;\r\n\r\nconst palisaAli: { [palisa in Palisa]: ReadonlyArray<string> } =\r\n{\r\n  'sewi':   ['KeyW', 'ArrowUp'],\r\n  'anpa':   ['KeyS', 'ArrowDown'],\r\n  'soto':   ['KeyA', 'ArrowLeft'],\r\n  'teje':   ['KeyD', 'ArrowRight'],\r\n  \r\n  'monsi':  ['KeyZ', 'Backspace'],\r\n  'sinpin': ['KeyX', 'Space'],\r\n  'open':   ['KeyR', 'Home'],\r\n  'pini':   ['KeyT', 'End'],\r\n} as const;\r\n\r\nconst palisaPiNimiPalisa = monsiEKulupu(palisaAli);\r\n\r\nexport interface JoPiIloPalisa\r\n{\r\n  palisaLa(palisa: Palisa): void;\r\n}\r\n\r\nexport class IloPalisa extends Component<JoPiIloPalisa>\r\n{\r\n  render = () => null;\r\n  \r\n  componentDidMount()\r\n  {\r\n    window.addEventListener('keydown', this.lukaPalisa);\r\n  }\r\n  \r\n  componentWillUnmount()\r\n  {\r\n    window.removeEventListener('keydown', this.lukaPalisa);\r\n  }\r\n  \r\n  private lukaPalisa = (pali: KeyboardEvent) =>\r\n  {\r\n    const palisa = palisaPiNimiPalisa.get(pali.code);\r\n    if(palisa)\r\n      this.props.palisaLa(palisa);\r\n  }\r\n}\r\n","import { Nimi } from './insa/nimiAli';\r\nimport { KulupuIjo } from './insa/ijo';\r\nimport { Kule } from './kule';\r\n\r\nexport type AnteTawa = 'poka' | 'sikePoka' | 'sikeSewi';\r\n\r\nexport interface LukinNimi\r\n{\r\n  readonly kule: Kule;\r\n  readonly anteTawa?: AnteTawa;\r\n  readonly lawaSewi?: boolean;\r\n}\r\n\r\nexport const lukinPiNnimiAli: { [nimi in Nimi]: LukinNimi } =\r\n{\r\n  soweli: { kule: '#222', anteTawa: 'poka' },\r\n  waso:   { kule: '#678', anteTawa: 'poka' },\r\n  kala:   { kule: '#d80', anteTawa: 'sikePoka' },\r\n  akesi:  { kule: '#294', anteTawa: 'sikeSewi' },\r\n  pipi:   { kule: '#850', anteTawa: 'sikeSewi' },\r\n  tomo:   { kule: '#640' },\r\n  kiwen:  { kule: '#468' },\r\n  telo:   { kule: '#09b' },\r\n  ko:     { kule: '#884' },\r\n  kasi:   { kule: '#2a4' },\r\n  kili:   { kule: '#b10' },\r\n  sike:   { kule: '#444' },\r\n  leko:   { kule: '#444' },\r\n  \r\n  ali:    { kule: '#666' },\r\n  nimi:   { kule: '#666' },\r\n  kon:    { kule: '#2af' },\r\n  \r\n  mi:     { kule: '#222' },\r\n  pini:   { kule: '#640' },\r\n  moli:   { kule: '#b10' },\r\n  awen:   { kule: '#468' },\r\n  weka:   { kule: '#bbb' },\r\n  tawa:   { kule: '#222' },\r\n  pakala: { kule: '#266' },\r\n  \r\n  li:     { kule: '#666' },\r\n  e:      { kule: '#666' },\r\n  en:     { kule: '#666' },\r\n  ala:    { kule: '#f20' },\r\n  lon:    { kule: '#666' },\r\n} as const;\r\n\r\nexport const anteEKule: { [kulupu in KulupuIjo]: boolean } =\r\n{\r\n  ijo:     true,\r\n  toki:    true,\r\n  kulupu:  true,\r\n  pali:    false,\r\n  sitelen: false,\r\n} as const;\r\n","import Im from 'immutable' ;\r\nimport { Nimi, nimiAli } from './insa/nimiAli';\r\n\r\ninterface LinjaNimi\r\n{\r\n  readonly nimiLili: string;\r\n  readonly suliPoka: number;\r\n}\r\n\r\nexport function kipisiENimi(nimi: Nimi): ReadonlyArray<LinjaNimi>\r\n{\r\n  if(!kipisiPiNimiAli)\r\n    kipisiPiNimiAli = paliEKipisiPiNimiAli();\r\n  \r\n  return kipisiPiNimiAli[nimi];\r\n}\r\n\r\ntype KipisiPiNimiAli = { [nimi in Nimi]: ReadonlyArray<LinjaNimi> };\r\nlet kipisiPiNimiAli: KipisiPiNimiAli | undefined;\r\n\r\nfunction paliEKipisiPiNimiAli(): KipisiPiNimiAli\r\n{\r\n  const lipuSitelen = document.createElement('canvas');\r\n  const lonSitelen = lipuSitelen.getContext('2d')!;\r\n  lonSitelen.font = 'normal 100px truculenta-variable';\r\n  \r\n  function paliELinja(nimiLili: string, suliPokaAli: number): LinjaNimi\r\n  {\r\n    const suliPoka = Math.round(suliPokaAli / lonSitelen.measureText(nimiLili).width);\r\n    return { nimiLili: nimiLili, suliPoka: suliPoka };\r\n  }\r\n  \r\n  function kipisiENimi(nimi: string): ReadonlyArray<LinjaNimi>\r\n  {\r\n    if(nimi.length < 4)\r\n      return [paliELinja(nimi, nanpaSuliPiLinjaWan)];\r\n    else\r\n    {\r\n      const kenKipisi = Im.Range(2, nimi.length - 1)\r\n        .map(meso => [\r\n          paliELinja(nimi.substring(0, meso), nanpaSuliPiLinjaTu),\r\n          paliELinja(nimi.substring(meso), nanpaSuliPiLinjaTu),\r\n        ]);\r\n      return kenKipisi\r\n        .minBy(([wan, tu]) => Math.abs(wan.suliPoka - tu.suliPoka)) ?? [];\r\n    }\r\n  }\r\n  \r\n  const kipisi: { [nimi: string]: ReadonlyArray<LinjaNimi> } = { };\r\n  for(const nimi of nimiAli)\r\n    kipisi[nimi] = kipisiENimi(nimi);\r\n  \r\n  return kipisi as KipisiPiNimiAli;\r\n}\r\n\r\nconst nanpaSuliPiLinjaWan = 8000;\r\nconst nanpaSuliPiLinjaTu = 10240;\r\n","import { Lon } from './insa/lon';\r\nimport { AnteTawa } from './lukinNimi'\r\n\r\nexport type Jasima = 'none' | `scaleX(${-1 | 1})` | `rotate(${number}turn)`;\r\n\r\nexport function panaEJasima(jasimaMajuna: Jasima, lonMajuna: Lon | undefined, lonSin: Lon, anteTawa?: AnteTawa): Jasima\r\n{\r\n  if(lonMajuna && (anteTawa === 'sikePoka' || anteTawa === 'sikeSewi'))\r\n  {\r\n    const nanpaNasin =\r\n      lonSin.x > lonMajuna.x ? 0 :\r\n      lonSin.y > lonMajuna.y ? 0.25 :\r\n      lonSin.x < lonMajuna.x ? 0.5 :\r\n      lonSin.y < lonMajuna.y ? 0.75 :\r\n      undefined;\r\n    \r\n    if(nanpaNasin !== undefined)\r\n    {\r\n      const namakoLawa =  anteTawa === 'sikeSewi' ? 0.25 : 0;\r\n      const nanpaMajuna = panaENanpaPiJasimaSike(jasimaMajuna, namakoLawa) ?? 0;\r\n      const sike = Math.floor(nanpaMajuna);\r\n      const ante = nanpaNasin - (nanpaMajuna - sike);\r\n      const namakoSike = sike + (ante <= -0.5 ? 1 : 0) + (ante >= 0.5 ? -1 : 0);\r\n      \r\n      const nanpaSike = nanpaNasin + namakoSike + namakoLawa;\r\n      return `rotate(${nanpaSike}turn)`;\r\n    }\r\n    else\r\n      return jasimaMajuna;\r\n  }\r\n  else if(lonMajuna && anteTawa === 'poka')\r\n  {\r\n    if(lonSin.x > lonMajuna.x)\r\n      return `scaleX(1)`;\r\n    else if(lonSin.x < lonMajuna.x)\r\n      return `scaleX(-1)`;\r\n    else\r\n      return jasimaMajuna;\r\n  }\r\n  else\r\n    return 'none';\r\n}\r\n\r\nfunction panaENanpaPiJasimaSike(jasima: Jasima, namakoLawa: number)\r\n{\r\n  const kili = alasaNanpaPiJasimaSike.exec(jasima);\r\n  if(kili)\r\n    return parseFloat(kili[1]) - namakoLawa;\r\n  else\r\n    return undefined;\r\n}\r\n\r\nconst alasaNanpaPiJasimaSike = /^rotate\\((.*)turn\\)$/;\r\n","import './leko.css';\r\nimport classNames from 'classnames';\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { Ijo, panaEKulupuIjo } from './insa/ijo';\r\nimport { lukinPiNnimiAli, anteEKule } from './lukinNimi'\r\nimport { kipisiENimi } from './kipisiENimi';\r\nimport { Jasima, panaEJasima } from './jasima';\r\n\r\nexport function Leko({ ijo, lukinWawa }: { ijo: Ijo, lukinWawa: boolean })\r\n{\r\n  const kulupu = panaEKulupuIjo(ijo);\r\n  const kulupuLukin = classNames('leko', { 'wawa': lukinWawa });\r\n  const kulupuLukinInsa = classNames('insaLeko', kulupu);\r\n  const lukinNimi = lukinPiNnimiAli[ijo.nimi];\r\n  const anteTawa = ijo.liSitelen ? lukinNimi.anteTawa : undefined;\r\n  \r\n  const ijoMajuna = useMajuna(ijo);\r\n  const [jasimaMajuna, sinEJasima] = useState<Jasima>('none');\r\n  const jasima = ijoMajuna?.nimi === ijo.nimi\r\n    ? panaEJasima(jasimaMajuna, ijoMajuna, ijo, anteTawa)\r\n    : 'none';\r\n  if(jasima !== jasimaMajuna)\r\n    sinEJasima(jasima);\r\n  \r\n  const lukin =\r\n  {\r\n    left: `${ijo.x}em`,\r\n    top: `${ijo.y}em`,\r\n    transform: jasima,\r\n  };\r\n  const lukinKule = anteEKule[kulupu]\r\n    ? { backgroundColor: lukinNimi.kule }\r\n    : { color: lukinNimi.kule };\r\n  \r\n  return (\r\n    <div className={kulupuLukin} style={lukin}>\r\n      <div className={kulupuLukinInsa} style={lukinKule}>\r\n        {insa(ijo)}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction insa(ijo: Ijo)\r\n{\r\n  if(ijo.liSitelen)\r\n    return <span>{ijo.nimi}</span>;\r\n  else\r\n  {\r\n    const linja = kipisiENimi(ijo.nimi);\r\n    const nanpaLinja = linja.length === 1 ? 'linjaWan' : 'linjaTu';\r\n    const kulupuLukin = classNames('nimi', nanpaLinja);\r\n    \r\n    return linja.map(({ nimiLili, suliPoka }, nanpa) =>\r\n      <span key={nanpa} className={kulupuLukin}\r\n        style={{ fontVariationSettings: `'wdth' ${suliPoka}, 'opsz' 12` }}\r\n      >\r\n        {nimiLili}\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nfunction useMajuna<T>(sin: T)\r\n{\r\n  const ona = useRef<T>();\r\n  useEffect(() => { ona.current = sin; });\r\n  return ona.current;\r\n}\r\n","import Im from 'immutable';\r\nimport { Lon } from './lon';\r\nimport { Nimi, NimiIjo, KulupuNimi, panaEKulupuNimi } from './nimiAli'\r\n\r\nexport interface IjoNimi extends Lon\r\n{\r\n  readonly liSitelen: false;\r\n  readonly nimi: Nimi;\r\n}\r\n\r\nexport interface IjoSitelen extends Lon\r\n{\r\n  readonly liSitelen: true;\r\n  readonly nimi: NimiIjo;\r\n}\r\n\r\nexport type Ijo = IjoNimi | IjoSitelen;\r\n\r\nexport type LipuIjo = Im.Map<number, Ijo>;\r\n\r\nexport type KulupuIjo = KulupuNimi | 'sitelen';\r\n\r\nexport function panaEKulupuIjo(ijo: Ijo)\r\n{\r\n  if(ijo.liSitelen)\r\n    return 'sitelen';\r\n  else\r\n    return panaEKulupuNimi(ijo.nimi);\r\n}\r\n","import './ma.css';\r\nimport Im from \"immutable\";\r\nimport { Component } from 'react';\r\nimport { Lon } from './insa/lon';\r\nimport { LipuIjo } from './insa/ijo';\r\nimport { Leko } from './leko';\r\n\r\ninterface JoMa\r\n{\r\n  readonly suli: Lon;\r\n  readonly lipuIjo: LipuIjo;\r\n  readonly lukinWawa: Im.Set<number>;\r\n}\r\n\r\nexport class Ma extends Component<JoMa>\r\n{\r\n  render()\r\n  {\r\n    const lekoAli = this.props.lipuIjo\r\n      .map((ijo, nanpaTaso) =>\r\n        <Leko key={nanpaTaso} ijo={ijo} lukinWawa={this.props.lukinWawa.contains(nanpaTaso)} />\r\n      )\r\n      .toIndexedSeq();\r\n    \r\n    return (\r\n      <div className='ma' style={{\r\n        width: `${this.props.suli.x}em`,\r\n        height: `${this.props.suli.y}em`,\r\n      }}>\r\n        {lekoAli}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Im from 'immutable';\r\nimport { NimiIjo, NimiKulupu, NimiPali } from './nimiAli';\r\n\r\nexport type Seme = NimiIjo | NimiKulupu;\r\nexport type LiSeme = NimiPali | NimiIjo;\r\n\r\nexport interface NasinMusi{\r\n  readonly seme: Im.Set<Seme>;\r\n  readonly lonSeme: Im.Set<Seme>;\r\n  readonly liSeme: Im.Set<LiSeme>;\r\n  readonly nanpaIjo: Im.Set<number>;\r\n}\r\n\r\nexport function tokiENasinMusi(nasin: NasinMusi)\r\n{\r\n  const seme = `${nasin.seme.join(' en ')}`;\r\n  const lonSeme = nasin.lonSeme.equals(Im.Set.of('ali'))\r\n    ? ''\r\n    : ` lon ${nasin.lonSeme.join(' en ')}`;\r\n  const liSeme = ` li ${nasin.liSeme.join(' li ')}`;\r\n  return `${seme}${lonSeme}${liSeme}`;\r\n}\r\n","import './lukinMusi.css';\r\nimport { Component } from 'react';\r\nimport { lipuMaAli } from './insa/lipuMa';\r\nimport { Musi, tawaNi, openEMusi, tenpoMonsi, tenpoSinpin, tawa } from './insa/musi';\r\nimport { IloPalisa, Palisa } from './iloPalisa';\r\nimport { Ma } from './ma';\r\nimport { panaENasinMusiAli } from './insa/pilinToki';\r\nimport { tokiENasinMusi } from './insa/nasinMusi';\r\nimport { paliELonIjo } from './insa/lonIjo';\r\n\r\nexport class LukinMusi extends Component<{ }, Musi>\r\n{\r\n  constructor(jo: { })\r\n  {\r\n    super(jo);\r\n    this.state = openEMusi(lipuMaAli[0]);\r\n  }\r\n  \r\n  render()\r\n  {\r\n    const ni = tawaNi(this.state);\r\n    \r\n    // O WEKA E NI:\r\n    const lonIjo = paliELonIjo(ni.lipuIjo);\r\n    const lipuPiNasinMusi =\r\n      panaENasinMusiAli(this.state.lipuMa.suli, lonIjo)\r\n        .map(tokiENasinMusi)\r\n        .map((toki, nanpa) => <p key={nanpa}>{toki}</p>);\r\n    // ^^^\r\n    \r\n    return (\r\n      <main>\r\n        <div className='nimiMa'>\r\n          {this.state.lipuMa.nimi}\r\n        </div>\r\n        <Ma\r\n          suli={this.state.lipuMa.suli}\r\n          lipuIjo={ni.lipuIjo}\r\n          lukinWawa={ni.lukinWawa}\r\n        />\r\n        <div>\r\n          {lipuPiNasinMusi}\r\n        </div>\r\n        <IloPalisa palisaLa={this.lukaPalisa} />\r\n      </main>\r\n    );\r\n  }\r\n  \r\n  private lukaPalisa = (palisa: Palisa) =>\r\n  {\r\n    const pali = this.paliPalisa[palisa];\r\n    this.setState(pali(this.state));\r\n  };\r\n  \r\n  private paliPalisa: { [palisa in Palisa]: (musi: Musi) => Musi } =\r\n  {\r\n    'sewi':   musi => tawa(musi, 'sewi'),\r\n    'anpa':   musi => tawa(musi, 'anpa'),\r\n    'soto':   musi => tawa(musi, 'soto'),\r\n    'teje':   musi => tawa(musi, 'teje'),\r\n    'monsi':  musi => tenpoMonsi(musi),\r\n    'sinpin': musi => tenpoSinpin(musi),\r\n    'open':   musi => tenpoMonsi(musi, true),\r\n    'pini':   musi => tenpoSinpin(musi, true),\r\n  } as const;\r\n}\r\n","import './sijelo.css';\nimport { LukinMusi } from './lukinMusi';\n\nexport const Sijelo = () =>\n  <>\n    <header>\n      <h1>soweli li mi</h1>\n      <h2>soweli li mi</h2>\n      <h3>nimi li lon la ijo li lon</h3>\n    </header>\n    <LukinMusi />\n  </>;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) =>\n{\n  if(onPerfEntry && onPerfEntry instanceof Function)\n  {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) =>\n    {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import './index.css';\nimport { StrictMode } from 'react';\nimport { render } from 'react-dom';\nimport { Sijelo } from './sijelo';\nimport reportWebVitals from './reportWebVitals';\n\nrender(\n  <StrictMode>\n    <Sijelo />\n  </StrictMode>,\n  document.getElementById('sijelo')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}