(this["webpackJsonpsoweli-li-mi"]=this["webpackJsonpsoweli-li-mi"]||[]).push([[0],{24:function(e,n,t){},29:function(e,n,t){},30:function(e,n,t){},37:function(e,n,t){},38:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);t(24);var i=t(5),a=t(20),r=(t(29),t(7)),o=t(8),u=t(11),l=t(10),c=(t(30),[{nimi:"ma pona",suli:{x:15,y:10},ijoAli:[{x:2,y:2,liSitelen:!0,nimi:"soweli"},{x:6,y:3,liSitelen:!0,nimi:"kala"},{x:8,y:1,liSitelen:!0,nimi:"kiwen"},{x:1,y:7,liSitelen:!1,nimi:"soweli"},{x:2,y:6,liSitelen:!1,nimi:"en"},{x:3,y:6,liSitelen:!1,nimi:"kala"},{x:4,y:6,liSitelen:!1,nimi:"li"},{x:5,y:6,liSitelen:!1,nimi:"mi"},{x:8,y:5,liSitelen:!1,nimi:"kiwen"},{x:8,y:6,liSitelen:!1,nimi:"li"},{x:8,y:7,liSitelen:!1,nimi:"awen"},{x:11,y:3,liSitelen:!1,nimi:"nimi"},{x:12,y:3,liSitelen:!1,nimi:"li"},{x:13,y:3,liSitelen:!1,nimi:"tawa"}]}]),s=t(3),f=t(4),p=t(0),j=t(21),m=Object(j.makeTypedFactory)({x:0,y:0});function k(e){return e.groupBy((function(e){return m(e)})).toMap()}function b(e,n){return p.default.Map(e.mapEntries((function(t){var i=Object(s.a)(t,2),a=i[0],r=i[1];return[a,r.map((function(t,i){return function(e,n,t,i,a){var r=i.get(e).filterNot((function(e,n){return n===t})).toSet(),o=r.toSeq().filter((function(e){return e.liSitelen})).map((function(e){return e.nimi})).toSet();function u(e){var t=e.seme.contains("ali")||!n.liSitelen&&e.seme.contains("nimi")||n.liSitelen&&e.seme.contains(n.nimi),i=e.lonSeme.contains("ali")||e.lonSeme.contains("nimi")&&r.some((function(e){return!e.liSitelen}))||e.lonSeme.contains("kon")&&r.isEmpty()||!e.lonSeme.intersect(o).isEmpty();return t&&i}return p.default.Seq(a).filter(u).flatMap((function(e){return e.liSeme})).toSet()}(a,t,i,e,n)}))]})))}function d(e,n){return void 0!==e?e.filter((function(e){return e.contains(n)})).keySeq().toSet():p.default.Set.of()}function O(e){return p.default.Seq(e).flatMap((function(e,n){return p.default.Seq(e).map((function(e){return[e,n]}))})).toMap()}var S={toki:["li","e","en","ala","lon"],kulupu:["ali","nimi","kon"],ijo:["soweli","waso","kala","akesi","pipi","tomo","kiwen","telo","ko","kasi","kili","sike","leko"],pali:["mi","pini","moli","awen","weka","tawa","pakala"]},v=O(S),y=v.keys();function x(e){return v.get(e)}var w=t(2);function h(e,n,t){var i=t?function(e){var n=e.x;return{x:e.y,y:n}}:function(e){return{x:e.x,y:e.y}},a=i(e);return p.default.Range(0,a.y).map((function(e){return p.default.Range(0,a.x).map((function(t){return function(e,n){var t=function(e){return{index:e,rowBegin:1,columnBegin:e+1,rowEnd:1,columnEnd:e+2}}(e);if(void 0!==n){var i=n.filterNot((function(e){return e.liSitelen})).entrySeq().first();if(void 0!==i){var a=Object(s.a)(i,2),r=a[0],o=a[1].nimi;return{nanpaIjo:r,kind:x(o),text:o,pos:t,next:void 0}}}return{kind:"ala",text:"",pos:t,next:void 0}}(t,n.get(m(i({x:t,y:e}))))})).update(g)}))}function g(e){return q(e.toStack())}function q(e){if(e.size>1)return Object(f.a)(Object(f.a)({},e.peek()),{},{next:q(e.pop())});if(1===e.size)return e.peek();throw Error("palisa toki li jo e ala!")}var I,M,E=Object(w.rep)(Object(w.alt)(Object(w.tok)("ala"),Object(w.tok)("ijo"),Object(w.tok)("kulupu"),Object(w.tok)("toki"),Object(w.tok)("pali"))),N=Object(w.tok)("ijo"),P=Object(w.tok)("kulupu"),K=Object(w.tok)("pali"),L=Object(w.str)("li"),T=Object(w.str)("en"),W=Object(w.str)("lon"),A=Object(w.apply)((I=Object(w.alt)(N,P),M=T,Object(w.apply)(Object(w.seq)(I,Object(w.rep)(Object(w.seq)(M,I))),(function(e){var n=Object(s.a)(e,2),t=n[0],i=n[1];return[[t].concat(i.map((function(e){var n=Object(s.a)(e,2);return n[0],n[1]}))),i.map((function(e){var n=Object(s.a)(e,2),t=n[0];return n[1],t}))]}))),(function(e){var n=Object(s.a)(e,2),t=n[0],i=n[1];return{seme:p.default.Seq(t).map((function(e){return e.text})).toSet(),nanpaIjo:p.default.Seq(t).map((function(e){return e.nanpaIjo})).concat(p.default.Seq(i).map((function(e){return e.nanpaIjo}))).toSet()}})),C=Object(w.alt)(Object(w.apply)(A,(function(e){var n=e.nanpaIjo;return{seme:e.seme,lonSeme:p.default.Set.of("ali"),nanpaIjo:n}})),Object(w.apply)(Object(w.seq)(A,W,A),(function(e){var n=Object(s.a)(e,3),t=n[0],i=n[1],a=n[2];return{seme:t.seme,lonSeme:a.seme,nanpaIjo:p.default.Set.of(i.nanpaIjo).union(t.nanpaIjo,a.nanpaIjo)}}))),F=Object(w.apply)(Object(w.seq)(C,L,Object(w.alt)(K,N)),(function(e){var n=Object(s.a)(e,3),t=n[0],i=n[1],a=n[2];return{seme:t.seme,lonSeme:t.lonSeme,liSeme:p.default.Set.of(a.text),nanpaIjo:p.default.Set.of(i.nanpaIjo,a.nanpaIjo).union(t.nanpaIjo)}})),B=Object(w.kmid)(E,F,E);function R(e,n){return function(e,n){return h(e,n,!1).concat(h(e,n,!0))}(e,n).map((function(e){return Object(w.expectEOF)(B.parse(e))})).filter((function(e){return e.successful})).flatMap((function(e){return e.successful?p.default.Seq(e.candidates).map((function(e){return e.result})).cacheResult().update(z):void 0})).toArray()}function z(e){return e.filterNot((function(n){return e.some((function(e){return e!==n&&n.nanpaIjo.isSubset(e.nanpaIjo)}))}))}var D=t(23);function X(e){var n=p.default.Map(p.default.Seq(e.ijoAli).toKeyedSeq()),t=k(n),i=R(e.suli,t),a=b(t,i),r=p.default.Seq(i).flatMap((function(e){return e.nanpaIjo})).concat(a.valueSeq().flatMap((function(e){return e.filter((function(e,t){return n.get(t).liSitelen&&!e.isEmpty()})).keySeq()}))).toSet();return{lipuIjo:n,lukinWawa:r}}function J(e,n,t){function i(a,r){var o=n.get(r),u=function(e,n){switch(n){case"sewi":return e.merge({y:e.y-1});case"anpa":return e.merge({y:e.y+1});case"soto":return e.merge({x:e.x-1});case"teje":return e.merge({x:e.x+1});default:throw Error("nasin li ike!")}}(r,t),l=n.get(u);if(function(e,n){return e.x>=0&&e.x<n.x&&e.y>=0&&e.y<n.y}(u,e)&&d(o,"awen").isEmpty()&&d(l,"awen").isEmpty()){var c,s=d(l,"tawa").union(d(l,"mi")).toSeq().map((function(e){return i(e,u)}));return s.some((function(e){return e.isEmpty()}))?p.default.Set.of():(c=p.default.Set.of(a)).union.apply(c,Object(D.a)(s))}return p.default.Set.of()}return p.default.Seq.Keyed(n.entrySeq().flatMap((function(e){var n=Object(s.a)(e,2),t=n[0];return n[1].filter((function(e){return e.contains("mi")})).toKeyedSeq().mapEntries((function(e){var n=Object(s.a)(e,2),i=n[0];n[1];return[i,t]}))}))).map((function(e,n){return i(n,e)})).valueSeq().flatMap((function(e){return e})).toSet()}function U(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.tenpoNi>0?Object(f.a)(Object(f.a)({},e),{},{tenpoNi:n?0:e.tenpoNi-1}):e}function H(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.tenpoNi<e.tenpo.size-1?Object(f.a)(Object(f.a)({},e),{},{tenpoNi:n?e.tenpo.size-1:e.tenpoNi+1}):e}function V(e,n){var t=Z(e).lipuIjo,i=k(t),a=b(i,R(e.lipuMa.suli,i)),r=J(e.lipuMa.suli,a,n).toKeyedSeq().mapEntries((function(e){var n=Object(s.a)(e,2),i=(n[0],n[1]);return[i,t.get(i)]})).map((function(e){return function(e,n){switch(n){case"sewi":return Object(f.a)(Object(f.a)({},e),{},{y:e.y-1});case"anpa":return Object(f.a)(Object(f.a)({},e),{},{y:e.y+1});case"soto":return Object(f.a)(Object(f.a)({},e),{},{x:e.x-1});case"teje":return Object(f.a)(Object(f.a)({},e),{},{x:e.x+1});default:throw Error("nasin li ike!")}}(e,n)})),o=t.merge(r),u=k(o),l=function(e,n){return p.default.Seq.Keyed(e.entrySeq().flatMap((function(e){var n=Object(s.a)(e,2);n[0];return n[1].map((function(e){return e.filter((function(e){return"ijo"===x(e)}))})).filterNot((function(e){return e.isEmpty()})).toKeyedSeq()}))).map((function(e,t){return Object(f.a)(Object(f.a)({},n.get(t)),{},{liSitelen:!0,nimi:e.first()})}))}(b(u,R(e.lipuMa.suli,u)),o),c=o.merge(l),j=k(c),m=R(e.lipuMa.suli,j),d=b(j,m),O=p.default.Seq(m).flatMap((function(e){return e.nanpaIjo})).concat(d.valueSeq().flatMap((function(e){return e.filter((function(e,n){return c.get(n).liSitelen&&!e.isEmpty()})).keySeq()}))).toSet();if(c.equals(t))return e;var S={nasin:n,lipuIjo:c,lukinWawa:O},v=e.tenpo.toSeq().take(e.tenpoNi+1).concat([S]).toList();return Object(f.a)(Object(f.a)({},e),{},{tenpo:v,tenpoNi:e.tenpoNi+1})}function Z(e){var n=e.tenpo.get(e.tenpoNi);if(n)return n;throw Error("tenpo ni li ike!")}var $=O({sewi:["KeyW","ArrowUp"],anpa:["KeyS","ArrowDown"],soto:["KeyA","ArrowLeft"],teje:["KeyD","ArrowRight"],monsi:["KeyZ","Backspace"],sinpin:["KeyX","Space"],open:["KeyR","Home"],pini:["KeyT","End"]}),G=function(e){Object(u.a)(t,e);var n=Object(l.a)(t);function t(){var e;Object(r.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))).render=function(){return null},e.lukaPalisa=function(n){var t=$.get(n.code);t&&e.props.palisaLa(t)},e}return Object(o.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.lukaPalisa)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.lukaPalisa)}}]),t}(i.Component),Q=(t(37),t(38),t(13)),Y=t.n(Q);var _,ee={soweli:{kule:"#222",anteTawa:"poka"},waso:{kule:"#678",anteTawa:"poka"},kala:{kule:"#d80",anteTawa:"sikePoka"},akesi:{kule:"#294",anteTawa:"sikeSewi"},pipi:{kule:"#850",anteTawa:"sikeSewi"},tomo:{kule:"#640"},kiwen:{kule:"#468"},telo:{kule:"#09b"},ko:{kule:"#884"},kasi:{kule:"#2a4"},kili:{kule:"#b10"},sike:{kule:"#444"},leko:{kule:"#444"},ali:{kule:"#666"},nimi:{kule:"#666"},kon:{kule:"#2af"},mi:{kule:"#222"},pini:{kule:"#640"},moli:{kule:"#b10"},awen:{kule:"#468"},weka:{kule:"#bbb"},tawa:{kule:"#222"},pakala:{kule:"#266"},li:{kule:"#666"},e:{kule:"#666"},en:{kule:"#666"},ala:{kule:"#f20"},lon:{kule:"#666"}},ne={ijo:!0,toki:!0,kulupu:!0,pali:!1,sitelen:!1},te=t(22);function ie(e){return _||(_=function(){var e=document.createElement("canvas").getContext("2d");function n(n,t){return{nimiLili:n,suliPoka:Math.round(t/e.measureText(n).width)}}function t(e){return e.length<4?[n(e,ae)]:null!==(t=p.default.Range(2,e.length-1).map((function(t){return[n(e.substring(0,t),re),n(e.substring(t),re)]})).minBy((function(e){var n=Object(s.a)(e,2),t=n[0],i=n[1];return Math.abs(t.suliPoka-i.suliPoka)})))&&void 0!==t?t:[];var t}e.font="normal 100px truculenta-variable";var i,a={},r=Object(te.a)(y);try{for(r.s();!(i=r.n()).done;){var o=i.value;a[o]=t(o)}}catch(u){r.e(u)}finally{r.f()}return a}()),_[e]}var ae=8e3,re=10240;function oe(e,n,t,i){if(!n||"sikePoka"!==i&&"sikeSewi"!==i)return n&&"poka"===i?t.x>n.x?"scaleX(1)":t.x<n.x?"scaleX(-1)":e:"none";var a=t.x>n.x?0:t.y>n.y?.25:t.x<n.x?.5:t.y<n.y?.75:void 0;if(void 0!==a){var r,o="sikeSewi"===i?.25:0,u=null!==(r=function(e,n){var t=ue.exec(e);return t?parseFloat(t[1])-n:void 0}(e,o))&&void 0!==r?r:0,l=Math.floor(u),c=a-(u-l);return"rotate(".concat(a+(l+(c<=-.5?1:0)+(c>=.5?-1:0))+o,"turn)")}return e}var ue=/^rotate\((.*)turn\)$/,le=t(1);function ce(e){var n=e.ijo,t=e.lukinWawa,a=function(e){return e.liSitelen?"sitelen":x(e.nimi)}(n),r=Y()("leko",{wawa:t}),o=Y()("insaLeko",a),u=ee[n.nimi],l=n.liSitelen?u.anteTawa:void 0,c=function(e){var n=Object(i.useRef)();return Object(i.useEffect)((function(){n.current=e})),n.current}(n),f=Object(i.useState)("none"),p=Object(s.a)(f,2),j=p[0],m=p[1],k=(null===c||void 0===c?void 0:c.nimi)===n.nimi?oe(j,c,n,l):"none";k!==j&&m(k);var b={left:"".concat(n.x,"em"),top:"".concat(n.y,"em"),transform:k},d=ne[a]?{backgroundColor:u.kule}:{color:u.kule};return Object(le.jsx)("div",{className:r,style:b,children:Object(le.jsx)("div",{className:o,style:d,children:se(n)})})}function se(e){if(e.liSitelen)return Object(le.jsx)("span",{children:e.nimi});var n=ie(e.nimi),t=1===n.length?"linjaWan":"linjaTu",i=Y()("nimi",t);return n.map((function(e,n){var t=e.nimiLili,a=e.suliPoka;return Object(le.jsx)("span",{className:i,style:{fontVariationSettings:"'wdth' ".concat(a,", 'opsz' 12")},children:t},n)}))}var fe=function(e){Object(u.a)(t,e);var n=Object(l.a)(t);function t(){return Object(r.a)(this,t),n.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){var e=this,n=this.props.lipuIjo.map((function(n,t){return Object(le.jsx)(ce,{ijo:n,lukinWawa:e.props.lukinWawa.contains(t)},t)})).toIndexedSeq();return Object(le.jsx)("div",{className:"ma",style:{width:"".concat(this.props.suli.x,"em"),height:"".concat(this.props.suli.y,"em")},children:n})}}]),t}(i.Component);function pe(e){var n="".concat(e.seme.join(" en ")),t=e.lonSeme.equals(p.default.Set.of("ali"))?"":" lon ".concat(e.lonSeme.join(" en ")),i=" li ".concat(e.liSeme.join(" li "));return"".concat(n).concat(t).concat(i)}var je=function(e){Object(u.a)(t,e);var n=Object(l.a)(t);function t(e){var i,a;return Object(r.a)(this,t),(i=n.call(this,e)).lukaPalisa=function(e){var n=i.paliPalisa[e];i.setState(n(i.state))},i.paliPalisa={sewi:function(e){return V(e,"sewi")},anpa:function(e){return V(e,"anpa")},soto:function(e){return V(e,"soto")},teje:function(e){return V(e,"teje")},monsi:function(e){return U(e)},sinpin:function(e){return H(e)},open:function(e){return U(e,!0)},pini:function(e){return H(e,!0)}},i.state={lipuMa:a=c[0],tenpo:p.default.List.of(X(a)),tenpoNi:0},i}return Object(o.a)(t,[{key:"render",value:function(){var e=Z(this.state),n=k(e.lipuIjo),t=R(this.state.lipuMa.suli,n).map(pe).map((function(e,n){return Object(le.jsx)("p",{children:e},n)}));return Object(le.jsxs)("main",{children:[Object(le.jsx)("div",{className:"nimiMa",children:this.state.lipuMa.nimi}),Object(le.jsx)(fe,{suli:this.state.lipuMa.suli,lipuIjo:e.lipuIjo,lukinWawa:e.lukinWawa}),Object(le.jsx)("div",{children:t}),Object(le.jsx)(G,{palisaLa:this.lukaPalisa})]})}}]),t}(i.Component),me=function(){return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)("header",{children:[Object(le.jsx)("h1",{children:"soweli li mi"}),Object(le.jsx)("h2",{children:"soweli li mi"}),Object(le.jsx)("h3",{children:"nimi li lon la ijo li lon"})]}),Object(le.jsx)(je,{})]})},ke=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,i=n.getFID,a=n.getFCP,r=n.getLCP,o=n.getTTFB;t(e),i(e),a(e),r(e),o(e)}))};Object(a.render)(Object(le.jsx)(i.StrictMode,{children:Object(le.jsx)(me,{})}),document.getElementById("sijelo")),ke()}},[[40,1,2]]]);
//# sourceMappingURL=main.645414f1.chunk.js.map